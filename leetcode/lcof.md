## åŸºç¡€çŸ¥è¯†

#### ç±»å‹è½¬æ¢

1ï¼ŒåŒ…è£…ç±» åŸºæœ¬æ•°æ®ç±»å‹ String çš„è½¬æ¢ï¼š

- [1](https://blog.csdn.net/HY845638534/article/details/84669490)

## æ ˆé˜Ÿåˆ—

### [å‰‘æŒ‡ Offer 09. ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—](https://leetcode-cn.com/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof/)

æ–¹æ³•ä¸€ï¼šåŒæ ˆ

#### å®˜æ–¹-æ€è·¯å’Œç®—æ³•

ç»´æŠ¤ä¸¤ä¸ªæ ˆï¼Œç¬¬ä¸€ä¸ªæ ˆæ”¯æŒæ’å…¥æ“ä½œï¼Œç¬¬äºŒä¸ªæ ˆæ”¯æŒåˆ é™¤æ“ä½œã€‚

æ ¹æ®æ ˆå…ˆè¿›åå‡ºçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æ¯æ¬¡å¾€ç¬¬ä¸€ä¸ªæ ˆé‡Œæ’å…¥å…ƒç´ åï¼Œç¬¬ä¸€ä¸ªæ ˆçš„åº•éƒ¨å…ƒç´ æ˜¯æœ€åæ’å…¥çš„å…ƒç´ ï¼Œç¬¬ä¸€ä¸ªæ ˆçš„é¡¶éƒ¨å…ƒç´ æ˜¯ä¸‹ä¸€ä¸ªå¾…åˆ é™¤çš„å…ƒç´ ã€‚ä¸ºäº†ç»´æŠ¤é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¼•å…¥ç¬¬äºŒä¸ªæ ˆï¼Œç”¨ç¬¬äºŒä¸ªæ ˆç»´æŠ¤å¾…åˆ é™¤çš„å…ƒç´ ï¼Œåœ¨æ‰§è¡Œåˆ é™¤æ“ä½œçš„æ—¶å€™æˆ‘ä»¬é¦–å…ˆçœ‹ä¸‹ç¬¬äºŒä¸ªæ ˆæ˜¯å¦ä¸ºç©ºã€‚å¦‚æœä¸ºç©ºï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªæ ˆé‡Œçš„å…ƒç´ ä¸€ä¸ªä¸ªå¼¹å‡ºæ’å…¥åˆ°ç¬¬äºŒä¸ªæ ˆé‡Œï¼Œè¿™æ ·ç¬¬äºŒä¸ªæ ˆé‡Œå…ƒç´ çš„é¡ºåºå°±æ˜¯å¾…åˆ é™¤çš„å…ƒç´ çš„é¡ºåºï¼Œè¦æ‰§è¡Œåˆ é™¤æ“ä½œçš„æ—¶å€™æˆ‘ä»¬ç›´æ¥å¼¹å‡ºç¬¬äºŒä¸ªæ ˆçš„å…ƒç´ è¿”å›å³å¯ã€‚

- æˆå‘˜å˜é‡
  - ç»´æŠ¤ä¸¤ä¸ªæ ˆ stack1 å’Œ stack2ï¼Œå…¶ä¸­ stack1 æ”¯æŒæ’å…¥æ“ä½œï¼Œstack2 æ”¯æŒåˆ é™¤æ“ä½œ

- æ„é€ æ–¹æ³•
  - åˆå§‹åŒ– stack1 å’Œ stack2 ä¸ºç©º

- æ’å…¥å…ƒç´ 

  æ’å…¥å…ƒç´ å¯¹åº”æ–¹æ³• appendTail

  - stack1 ç›´æ¥æ’å…¥å…ƒç´ 

- åˆ é™¤å…ƒç´ 

  åˆ é™¤å…ƒç´ å¯¹åº”æ–¹æ³• deleteHead

  - å¦‚æœ stack2 ä¸ºç©ºï¼Œåˆ™å°† stack1 é‡Œçš„æ‰€æœ‰å…ƒç´ å¼¹å‡ºæ’å…¥åˆ° stack2 é‡Œ

  - å¦‚æœ stack2 ä»ä¸ºç©ºï¼Œåˆ™è¿”å› -1ï¼Œå¦åˆ™ä» stack2 å¼¹å‡ºä¸€ä¸ªå…ƒç´ å¹¶è¿”å›

#### ä»£ç 

```java
class CQueue {
    //ä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªå‡ºæ ˆï¼Œä¸€ä¸ªå…¥æ ˆ
    private Stack<Integer> stack1;
    private Stack<Integer> stack2;
    
    public CQueue() {
        stack1 = new Stack<>();
        stack2 = new Stack<>();
    }
    
    public void appendTail(int value) {
        stack1.push(value);
    }
    
    public int deleteHead() {
        if(!stack2.isEmpty()){
            return stack2.pop();
        }else{
            while(!stack1.isEmpty()){
                stack2.push(stack1.pop());
            }
            return stack2.isEmpty() ? -1 : stack2.pop();
        }
    }
}
```

- ç½‘å‹é—®ï¼šâ€œè¿™ä¸ªæ–¹å¼ä¸ºä½•åªæ‰“è´¥50%çš„æäº¤ï¼Ÿâ€ã€‚ç½‘å‹ç­”ï¼šâ€œå› ä¸ºStackçš„å®ç°æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ€§èƒ½æ¯”LinkedListä½â€ã€‚

#### å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ï¼šå¯¹äºæ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸º O(1)O(1)ã€‚æ’å…¥ä¸å¤šè¯´ï¼Œå¯¹äºåˆ é™¤æ“ä½œï¼Œè™½ç„¶çœ‹èµ·æ¥æ˜¯ O(n)O(n) çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½†æ˜¯ä»”ç»†è€ƒè™‘ä¸‹æ¯ä¸ªå…ƒç´ åªä¼šã€Œè‡³å¤šè¢«æ’å…¥å’Œå¼¹å‡º stack2 ä¸€æ¬¡ã€ï¼Œå› æ­¤å‡æ‘Šä¸‹æ¥æ¯ä¸ªå…ƒç´ è¢«åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä»ä¸º O(1)O(1)ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼šO(n)O(n)ã€‚éœ€è¦ä½¿ç”¨ä¸¤ä¸ªæ ˆå­˜å‚¨å·²æœ‰çš„å…ƒç´ ã€‚

#### æ€è€ƒ

- 20220302ï¼š
  - ä¸è®°å¾—javaä¸­stackæ€ä¹ˆå®ç°
  - çŸ¥é“ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—ã€‚ä½†æ˜¯é’ˆå¯¹åˆ é™¤ï¼Œæƒ³çš„æ˜¯â€œæ’å…¥é˜Ÿåˆ—ç§»åŠ¨åˆ°åˆ é™¤é˜Ÿåˆ—ï¼Œåˆ é™¤å…ƒç´ åï¼Œè¦æŠŠåˆ é™¤é˜Ÿåˆ—çš„æ‰€æœ‰å…ƒç´ ç§»åŠ¨å›æ’å…¥é˜Ÿåˆ—â€ï¼Œä½†æ˜¯å®é™…ä¸Šä¸éœ€è¦æŠŠåˆ é™¤é˜Ÿåˆ—çš„å…ƒç´ ç§»åŠ¨å›å»ï¼›
    - æ­£ç¡®æ€è·¯å°±æ˜¯å¦‚é¢˜è§£ï¼šåˆ é™¤é˜Ÿåˆ—è´Ÿè´£åˆ é™¤ï¼Œæ’å…¥é˜Ÿåˆ—è´Ÿè´£æ’å…¥ï¼Œåˆ é™¤é˜Ÿåˆ—ç©ºäº†æ‰èƒ½æŠŠå…ƒç´ ä»æ’å…¥é˜Ÿåˆ—ç§»å…¥åˆ é™¤é˜Ÿåˆ—ï¼Œå¦‚æœåˆ é™¤é˜Ÿåˆ—å’Œæ’å…¥é˜Ÿåˆ—åŒæ—¶ä¸ºç©ºåˆ™è¿”å›-1.

#### å†æˆ˜

1,20220323ï¼Œè°ƒè¯•å¤šæ¬¡åæˆåŠŸï¼š

```java
class CQueue {

    Stack stackIn=null;
    Stack stackOut=null;


    public CQueue() {
        stackIn=new Stack<>();
        stackOut=new Stack<>();
    }
    
        public void appendTail(int value) {
        //å¦‚æœæ˜¯ä¼ å…¥integerç±»å‹ï¼Œè€Œéintçš„è¯ï¼Œè²Œä¼¼ä¼šç»™integerå†åŒ…è£¹ä¸€å±‚ï¼Œå¯¼è‡´å¼‚å¸¸
        stackIn.push(value);
    }

    public int deleteHead() {
        //å¦‚æœå‡ºæ ˆä¸ä¸ºç©ºï¼Œç›´æ¥popä¸€ä¸ªå°±è¡Œã€‚ï¼ï¼ï¼åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹çš„ç›¸äº’è½¬æ¢
        if(!stackOut.empty()){
            return (int) stackOut.pop();
        }
        //å¦‚æœå‡ºæ ˆä¸ºç©ºï¼Œæ­¤æ—¶è¦åˆ é™¤èŠ‚ç‚¹,å…ˆå°±å¾—æŠŠå…¥æ ˆçš„æ‰€æœ‰èŠ‚ç‚¹ç§»åŠ¨è¿‡æ¥
        else{
            if(stackIn.empty()){
                //å…¥æ ˆä¹Ÿä¸ºç©ºï¼Œè¯´æ˜æ•´ä¸ªé€»è¾‘é˜Ÿåˆ—ä¸ºç©ºï¼Œç›´æ¥è¿”å›-1
                return -1;
            }else{
                //å…¥æ ˆä¸ä¸ºç©ºï¼ŒæŠŠæ‰€æœ‰å…¥æ ˆå…ƒç´ è½¬ç§»åˆ°å‡ºæ ˆï¼›å¹¶å¼¹å‡ºå‡ºæ ˆçš„é¡¶éƒ¨ã€‚
                while(!stackIn.empty()){
                    stackOut.push(stackIn.pop());
                }
                return (int)stackOut.pop();
            }

        }

    }
}

/**
 * Your CQueue object will be instantiated and called as such:
 * CQueue obj = new CQueue();
 * obj.appendTail(value);
 * int param_2 = obj.deleteHead();
 */
```

2,20220323ï¼Œæ”¹è¿›ä»£ç ï¼š

```java
class CQueue {

    Stack <Integer> stackIn=null;
    Stack <Integer> stackOut=null;


    public CQueue() {
        stackIn=new Stack<>();
        stackOut=new Stack<>();
    }
    
        public void appendTail(int value) {
        //ç›´æ¥æŠŠintè½¬åŒ–ä¸ºIntegerå­˜å…¥
        stackIn.push(Integer.valueOf(value));
    }

    public int deleteHead() {
        //å¦‚æœå‡ºæ ˆä¸ä¸ºç©ºï¼Œç›´æ¥popä¸€ä¸ªå°±è¡Œã€‚ï¼ï¼ï¼åŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹çš„ç›¸äº’è½¬æ¢
        if(!stackOut.empty()){
            return stackOut.pop().intValue();
        }
        //å¦‚æœå‡ºæ ˆä¸ºç©ºï¼Œæ­¤æ—¶è¦åˆ é™¤èŠ‚ç‚¹,å…ˆå°±å¾—æŠŠå…¥æ ˆçš„æ‰€æœ‰èŠ‚ç‚¹ç§»åŠ¨è¿‡æ¥
        else{
            if(stackIn.empty()){
                //å…¥æ ˆä¹Ÿä¸ºç©ºï¼Œè¯´æ˜æ•´ä¸ªé€»è¾‘é˜Ÿåˆ—ä¸ºç©ºï¼Œç›´æ¥è¿”å›-1
                return -1;
            }else{
                //å…¥æ ˆä¸ä¸ºç©ºï¼ŒæŠŠæ‰€æœ‰å…¥æ ˆå…ƒç´ è½¬ç§»åˆ°å‡ºæ ˆï¼›å¹¶å¼¹å‡ºå‡ºæ ˆçš„é¡¶éƒ¨ã€‚
                while(!stackIn.empty()){
                    stackOut.push(stackIn.pop());
                }
                //ç”±äºå­˜çš„Integerå¯¹è±¡ï¼Œè¿”å›çš„æ—¶å€™è¦è½¬åŒ–ä¸ºintç±»å‹ã€‚
                return stackOut.pop().intValue();
            }

        }

    }
}

/**
 * Your CQueue object will be instantiated and called as such:
 * CQueue obj = new CQueue();
 * obj.appendTail(value);
 * int param_2 = obj.deleteHead();
 */
```

- æœ¬ä»£ç å› ä¸ºä¸»åŠ¨åŒ…è£…intä¸ºIntegerï¼Œæ€§èƒ½æ›´å·®äº†ï¼Œä½†æ˜¯æ›´ç¬¦åˆæŠŠå¯¹è±¡å­˜å…¥æ ˆçš„æ€æƒ³ã€‚
- `Stack <Integer> stackIn=new Stack<>();`ï¼Œæ³¨æ„æ˜¯åœ¨å‰é¢é™å®šæ³›å‹çš„ç±»å‹ï¼Œåé¢çš„å°–æ‹¬å·å¯ç•™ç©ºç”±ç¼–è¯‘å™¨è‡ªå·±æ¨æµ‹ï¼›ä¸æ­£ç¡®æŒ‡å®šæ³›å‹ç±»å‹çš„è¯ï¼Œä¼šå‡ºç°ä¸€äº›å¥‡æ€ªçš„åŒ…è£…é”™è¯¯ï¼Œæ¯”å¦‚è¯´æœŸå¾…åŒ…è£…æˆintegerå´åŒ…è£…ä¸ºobjectã€‚



### [å‰‘æŒ‡ Offer 30. åŒ…å«minå‡½æ•°çš„æ ˆ](https://leetcode-cn.com/problems/bao-han-minhan-shu-de-zhan-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class MinStack {

    /** initialize your data structure here. */
    Stack<Integer> myStack=null;
    Stack<Integer> historicalMin=null;
    int min;
    public MinStack() {
        myStack=new Stack<>();
        historicalMin=new Stack<>();
        //ä¸è¦å¿˜è®°ç”¨å¼•å·ç»“å°¾
        min=Integer.MAX_VALUE;
    }
    
    public void push(int x) {
        myStack.push(x);
        
        if(x<=min){
            min=x;
            historicalMin.push(min);
        }
    }
    
    public void pop() {
        int temp=myStack.pop();

        //ä¸è¦è¯¯ç”¨=åˆ¤æ–­ç›¸ç­‰
        if(temp==min){
            historicalMin.pop();
            //å¦‚æœä¸¤ä¸ªæ ˆéƒ½ä¸ºç©ºäº†ï¼Œæ­¤æ—¶å†ç›´æ¥peekä¼šæŠ›å‡ºå¼‚å¸¸ï¼›è¦åˆ¤æ–­hostoricalMinæ˜¯å¦ä¸ºç©º
            if(!historicalMin.empty()){
                min=historicalMin.peek();
            }else{
                min=Integer.MAX_VALUE;
            }
            
        }

    }
    
    public int top() {
        return myStack.peek();
    }
    
    public int min() {
        return min;

    }
}

/**
 * Your MinStack object will be instantiated and called as such:
 * MinStack obj = new MinStack();
 * obj.push(x);
 * obj.pop();
 * int param_3 = obj.top();
 * int param_4 = obj.min();
 */
```

- æ‰§è¡Œåï¼Œæ®æç¤ºå¤„ç†äº†å‡ ä¸ªè¯­æ³•é”™è¯¯ï¼›æäº¤ä¸€æ¬¡åï¼Œå¤„ç†äº†ä¸€ä¸ªé€»è¾‘æ¼æ´ï¼›ç¬¬äºŒæ¬¡æäº¤å®Œæˆã€‚
- å¾…æ”¹è¿›ï¼š
  - è¯»äº†é¢˜è§£åï¼Œæˆ‘å‘ç°ä¸è¯¥åœ¨hostoricalMinä¸ºç©ºæ—¶ï¼ŒæŠŠintgermaxå½“åšminï¼›è€Œåº”è¯¥åœ¨pushæ—¶ï¼Œå‘ç°historicalMinä¸ºç©ºå°±ç›´æ¥å‹å…¥å½“å‰è¢«pushçš„å…ƒç´ ï¼Œè¿™æ ·å°±ä¸å­˜åœ¨æå‰ä¸€æ­¥è®¾ç½®minçš„é—®é¢˜ã€‚
  - åŸºæœ¬æ•°æ®ç±»å‹minå¯ä»¥ä¸è®¾ç½®ï¼Œç›´æ¥ç”¨stack.peek()å°±è¡Œã€‚

---

#### å®˜æ–¹-è§£é¢˜æ€è·¯
æ™®é€šæ ˆçš„ push() å’Œ pop() å‡½æ•°çš„å¤æ‚åº¦ä¸º O(1)O(1) ï¼›è€Œè·å–æ ˆæœ€å°å€¼ min() å‡½æ•°éœ€è¦éå†æ•´ä¸ªæ ˆï¼Œå¤æ‚åº¦ä¸º O(N)O(N) ã€‚

æœ¬é¢˜éš¾ç‚¹ï¼š å°† min() å‡½æ•°å¤æ‚åº¦é™ä¸º O(1)O(1) ï¼Œå¯é€šè¿‡å»ºç«‹è¾…åŠ©æ ˆå®ç°ï¼›

- æ•°æ®æ ˆ AA ï¼š æ ˆ AA ç”¨äºå­˜å‚¨æ‰€æœ‰å…ƒç´ ï¼Œä¿è¯å…¥æ ˆ push() å‡½æ•°ã€å‡ºæ ˆ pop() å‡½æ•°ã€è·å–æ ˆé¡¶ top() å‡½æ•°çš„æ­£å¸¸é€»è¾‘ã€‚
- è¾…åŠ©æ ˆ BB ï¼š æ ˆ BB ä¸­å­˜å‚¨æ ˆ AA ä¸­æ‰€æœ‰ éä¸¥æ ¼é™åº çš„å…ƒç´ ï¼Œåˆ™æ ˆ AA ä¸­çš„æœ€å°å…ƒç´ å§‹ç»ˆå¯¹åº”æ ˆ BB çš„æ ˆé¡¶å…ƒç´ ï¼Œå³ min() å‡½æ•°åªéœ€è¿”å›æ ˆ BB çš„æ ˆé¡¶å…ƒç´ å³å¯ã€‚

å› æ­¤ï¼Œåªéœ€è®¾æ³•ç»´æŠ¤å¥½ æ ˆ BB çš„å…ƒç´ ï¼Œä½¿å…¶ä¿æŒéä¸¥æ ¼é™åºï¼Œå³å¯å®ç° min() å‡½æ•°çš„ O(1)O(1) å¤æ‚åº¦ã€‚

#### å‡½æ•°è®¾è®¡

- push(x) å‡½æ•°ï¼š é‡ç‚¹ä¸ºä¿æŒæ ˆ BB çš„å…ƒç´ æ˜¯ éä¸¥æ ¼é™åº çš„ã€‚

  - å°† xx å‹å…¥æ ˆ AA ï¼ˆå³ A.add(x) ï¼‰ï¼›

  - è‹¥ â‘  æ ˆ BB ä¸ºç©º æˆ– â‘¡ xx å°äºç­‰äº æ ˆ BB çš„æ ˆé¡¶å…ƒç´ ï¼Œåˆ™å°† xx å‹å…¥æ ˆ BB ï¼ˆå³ B.add(x) ï¼‰ã€‚

- pop() å‡½æ•°ï¼š é‡ç‚¹ä¸ºä¿æŒæ ˆ A, BA,B çš„ å…ƒç´ ä¸€è‡´æ€§ ã€‚

  - æ‰§è¡Œæ ˆ AA å‡ºæ ˆï¼ˆå³ A.pop() ï¼‰ï¼Œå°†å‡ºæ ˆå…ƒç´ è®°ä¸º yy ï¼›

  - è‹¥ yy ç­‰äºæ ˆ BB çš„æ ˆé¡¶å…ƒç´ ï¼Œåˆ™æ‰§è¡Œæ ˆ B å‡ºæ ˆï¼ˆå³ B.pop() ï¼‰ã€‚

- top() å‡½æ•°ï¼š ç›´æ¥è¿”å›æ ˆ AA çš„æ ˆé¡¶å…ƒç´ å³å¯ï¼Œå³è¿”å› A.peek() ã€‚

- min() å‡½æ•°ï¼š ç›´æ¥è¿”å›æ ˆ BB çš„æ ˆé¡¶å…ƒç´ å³å¯ï¼Œå³è¿”å› B.peek() ã€‚

#### å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ O(1) ï¼š push(), pop(), top(), min() å››ä¸ªå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºå¸¸æ•°çº§åˆ«ã€‚
- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š å½“å…±æœ‰ N ä¸ªå¾…å…¥æ ˆå…ƒç´ æ—¶ï¼Œè¾…åŠ©æ ˆ BB æœ€å·®æƒ…å†µä¸‹å­˜å‚¨ N ä¸ªå…ƒç´ ï¼Œä½¿ç”¨ O(N) é¢å¤–ç©ºé—´ã€‚

#### ä»£ç 
Java ä»£ç ä¸­ï¼Œç”±äº Stack ä¸­å­˜å‚¨çš„æ˜¯ int çš„åŒ…è£…ç±» Integer ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ equals() ä»£æ›¿ == æ¥æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰ã€‚

```java
class MinStack {
    Stack<Integer> A, B;
    public MinStack() {
        A = new Stack<>();
        B = new Stack<>();
    }
    public void push(int x) {
        A.add(x);
        if(B.empty() || B.peek() >= x)
            B.add(x);
    }
    public void pop() {
        if(A.pop().equals(B.peek()))
            B.pop();
    }
    public int top() {
        return A.peek();
    }
    public int min() {
        return B.peek();
    }
}

```



## é“¾è¡¨

### [å‰‘æŒ‡ Offer 06. ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨](https://leetcode-cn.com/problems/cong-wei-dao-tou-da-yin-lian-biao-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) { val = x; }
 * }
 */
class Solution {
    //è®°å½•æœ€å¤§é€’å½’æ·±åº¦ï¼Œä»¥ä¾¿å„å±‚å®ç°é€†åºå­˜å…¥æ•°ç»„
    int deepMax;
    int[] array;//arrayåœ¨é€’å½’æœ€åº•å±‚è¢«å»ºç«‹
    public int[] reversePrint(ListNode head) {
        /*
        æ³¨æ„æ•°ç»„åœ¨javaä¸­æ˜¯å¼•ç”¨ä¼ é€’çš„ï¼šhttps://blog.csdn.net/qq_43555323/article/details/84783750;æ‰€ä»¥æ‰€æœ‰é€’å½’å±‚å…±äº«æ•°ç»„ï¼Œä½†æ˜¯é€’å½’æ·±åº¦å‚æ•°ä¸åŒã€‚
        æ‰€ä»¥å¯ä»¥è€ƒè™‘é€’å½’+å¼•ç”¨ä¼ é€’è§£å†³
        */
        return digui(head,0+1);
    }
    //å½¢å‚deepä¸ºæœ¬å±‚çš„æ·±åº¦ï¼Œä¹Ÿå³ä»¥æœ¬å±‚ä¸ºæœ€åèŠ‚ç‚¹çš„è¯ï¼Œæ•°ç»„çš„é•¿åº¦-1ã€‚
    public int[] digui(ListNode head,int deep){
        //å¦‚æœä¼ å…¥çš„å¤´èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œè¯´æ˜å¯ä»¥ç»§ç»­å¾€ä¸‹é€’å½’ï¼›å°å¿ƒä¸èƒ½ç”¨head.nextåˆ¤æ–­é“¾è¡¨å°¾éƒ¨,å› ä¸ºä¸çŸ¥é“ç»™çš„headæ˜¯å¦ä¸ºç©ºã€‚
        if(head!=null){
            //å…ˆé€’å½’è°ƒç”¨è·å¾—æ•°ç»„
            array = digui(head.next,deep+1);
            //å†æŠŠå½“å‰å…ƒç´ åŠ å…¥æ•°ç»„å¯¹åº”çš„ä½ç½®ï¼›
            array[deepMax-deep]=head.val;

            //åˆ«å¿˜äº†ifå’Œelseéƒ½å¾—æœ‰returnï¼Œå¦åˆ™èµ°ifçš„é€’å½’æ— æ³•è¿”å›
            return array;

        }
        //å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™æœ¬å±‚æ— èŠ‚ç‚¹ï¼›ä¸”åˆ¶é€ æ•°ç»„ï¼Œæ•°ç»„å¤§å°ä¸ºæœ¬å±‚æ·±åº¦-1
        else{
            deepMax=deep-1;
            return new int[deep-1];
        }

    }
}
```

- æˆ‘å’Œä¸€äº›ç½‘å‹ç†è§£ï¼šé€’å½’æœ¬è´¨å°±æ˜¯æ ˆçš„ä½¿ç”¨ï¼Œéšå¼ä½¿ç”¨äº†JVMæ ˆ
- æˆ‘è¿™æ–¹æ³•æ¯”å®˜æ–¹è¿˜å¥½ï¼Œæ²¡æœ‰å ç”¨é¢å¤–ç©ºé—´ï¼›æ—¶é—´å¤æ‚åº¦ä¸€è‡´ï¼›æœ€é«˜èµéå®˜æ–¹è§£ç”¨çš„ä¹Ÿæ˜¯é€’å½’ã€‚

---

#### å®˜æ–¹-ä½¿ç”¨æ ˆ

æ ˆçš„ç‰¹ç‚¹æ˜¯åè¿›å…ˆå‡ºï¼Œå³æœ€åå‹å…¥æ ˆçš„å…ƒç´ æœ€å…ˆå¼¹å‡ºã€‚è€ƒè™‘åˆ°æ ˆçš„è¿™ä¸€ç‰¹ç‚¹ï¼Œä½¿ç”¨æ ˆå°†é“¾è¡¨å…ƒç´ é¡ºåºå€’ç½®ã€‚ä»é“¾è¡¨çš„å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œä¾æ¬¡å°†æ¯ä¸ªèŠ‚ç‚¹å‹å…¥æ ˆå†…ï¼Œç„¶åä¾æ¬¡å¼¹å‡ºæ ˆå†…çš„å…ƒç´ å¹¶å­˜å‚¨åˆ°æ•°ç»„ä¸­ã€‚

- åˆ›å»ºä¸€ä¸ªæ ˆï¼Œç”¨äºå­˜å‚¨é“¾è¡¨çš„èŠ‚ç‚¹
- åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆï¼Œåˆå§‹æ—¶æŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹
- å½“æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ éç©ºæ—¶ï¼Œé‡å¤ä¸‹åˆ—æ“ä½œï¼š
  - å°†æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹å‹å…¥æ ˆå†…
  - å°†æŒ‡é’ˆç§»åˆ°å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
- è·å¾—æ ˆçš„å¤§å° sizeï¼Œåˆ›å»ºä¸€ä¸ªæ•°ç»„ printï¼Œå…¶å¤§å°ä¸º size
- åˆ›å»ºä¸‹æ ‡å¹¶åˆå§‹åŒ– index = 0
- é‡å¤ size æ¬¡ä¸‹åˆ—æ“ä½œï¼š
  - ä»æ ˆå†…å¼¹å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†è¯¥èŠ‚ç‚¹çš„å€¼å­˜åˆ° print[index]
  - å°† index çš„å€¼åŠ  1
- è¿”å› print

#### ä»£ç 

```java

/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) { val = x; }
 * }
 */
class Solution {
    public int[] reversePrint(ListNode head) {
        Stack<ListNode> stack = new Stack<ListNode>();
        ListNode temp = head;
        while (temp != null) {
            stack.push(temp);
            temp = temp.next;
        }
        int size = stack.size();
        int[] print = new int[size];
        for (int i = 0; i < size; i++) {
            print[i] = stack.pop().val;
        }
        return print;
    }
}

```

- è¿™ç§å€’ç€å¤„ç†çš„ï¼Œå°±å¯ä»¥æƒ³åˆ°æ ˆ æˆ–é€’å½’ï¼

#### å¤æ‚æ€§åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚æ­£å‘éå†ä¸€éé“¾è¡¨ï¼Œç„¶åä»æ ˆå¼¹å‡ºå…¨éƒ¨èŠ‚ç‚¹ï¼Œç­‰äºåˆåå‘éå†ä¸€éé“¾è¡¨ã€‚

ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚é¢å¤–ä½¿ç”¨ä¸€ä¸ªæ ˆå­˜å‚¨é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚



### [å‰‘æŒ‡ Offer 24. åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/fan-zhuan-lian-biao-lcof/)

#### é¦–æˆ˜å¯„

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) { val = x; }
 * }
 */
class Solution {
    /*
    åè½¬ï¼Œä¸€å¼€å§‹æƒ³åˆ°è¦ç”¨æ ˆç»“æ„ï¼Œå¦‚ç”¨é€’å½’è§£å†³ï¼›ä½†æ˜¯é€’å½’è¿”å›çš„å¤´ç»“ç‚¹æ˜¯åŸèŠ‚ç‚¹çš„æœ«å°¾æ²¡é”™ï¼Œå¯æ˜¯æƒ³æŠŠå½“å‰èŠ‚ç‚¹æ”¾åˆ°é€†é“¾è¡¨çš„å°¾éƒ¨çš„è¯
    å´ä¸èƒ½ç›´æ¥é€šè¿‡å¤´èŠ‚ç‚¹ç›´æ¥æ”¾ç½®ï¼Œå› ä¸ºå¤´èŠ‚ç‚¹çš„åç»­æ°¸è¿œéƒ½æ˜¯å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œè¦å¤šæ¬¡nextæ‰èƒ½æ”¾åˆ°å°¾éƒ¨ï¼Œå¾ˆéº»çƒ¦ã€‚

    æ¢ç§æ€è·¯ï¼Œåœ¨æ¯å±‚é€’å½’æ—¶ï¼Œäº¤æ¢èŠ‚ç‚¹æŒ‡å‘ï¼›å¹¶è®°å½•é€†é“¾è¡¨çš„å¤´ç»“ç‚¹å³å¯ã€‚
     */
    ListNode resultHead,resultTail,temp; 
    public ListNode reverseList(ListNode head) {
        //resultTailä¿å­˜å°¾èŠ‚ç‚¹ï¼Œæœ€åæ‰èƒ½è®©å°¾èŠ‚ç‚¹æŒ‡å‘null
        resultTail=head;
        //ç¿»è½¬é“¾è¡¨
        recur(head);
        //æ‰èƒ½è®©ç¿»è½¬é“¾è¡¨çš„å°¾èŠ‚ç‚¹æŒ‡å‘null
        resultTail.next=null;

        return resultHead;
    }
    //å› ä¸ºé€†é“¾è¡¨æœ«å°¾éœ€è¦ä¸ºnullï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹ç»„æˆå°ç¯ï¼Œå¿…é¡»æŠŠé€’å½’æå‡ºæ¥
    public void recur(ListNode head){
        //å¦‚æœä¼ å…¥èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜æ˜¯ç©ºé“¾è¡¨ï¼Œç›´æ¥é€€å‡ºå‡½æ•°ï¼Œè®©reverseListè¿”å›ç©ºçš„resultHeadèŠ‚ç‚¹
        if(head==null){
            //æ³¨æ„voidä¸èƒ½æœ‰è¿”å›å€¼ï¼Œå¯ä»¥ç”¨returnæ˜¯æœ¬å±‚é€’å½’é€€æ ˆ
            return;
        }
        //å¦‚æœå½“å‰ä¼ å…¥èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œè¯´æ˜è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹
        else{
            //å¦‚æœä¸‹ä¸€èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹æ˜¯é€†é“¾è¡¨çš„å¤´ï¼Œç”¨resultHeadå¼•ç”¨å®ƒï¼Œä¿å­˜å¥½é€†é“¾è¡¨çš„å¤´ï¼›å› ä¸ºå¯¹è±¡ç»™æ–¹æ³•æ—¶ç»™çš„æ˜¯åœ°å€ï¼Œæ‰€ä»¥ä¸åŒå±‚çš„é€’å½’ä¿®æ”¹æ˜¯äº’ç›¸å½±å“çš„ã€‚æ­¤æ—¶ä¸éœ€è¦äº¤æ¢æœ¬èŠ‚ç‚¹ä¸ä¸‹ä¸€èŠ‚ç‚¹ï¼ˆæ¯•ç«Ÿä¸‹ä¸€èŠ‚ç‚¹ä¸ºç©ºï¼‰çš„æŒ‡å‘ã€‚
            if(head.next==null){
                resultHead=head;
            }
            //å¦‚æœä¸‹ä¸€èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œäº¤æ¢å½“å‰èŠ‚ç‚¹å’Œä¸‹ä¸€èŠ‚ç‚¹çš„æŒ‡å‘
            else{
                //äº¤æ¢æŒ‡å‘ï¼›ä¸€å®šè¦ç”¨tempï¼Œå¦åˆ™é“¾è¡¨ä¼šåœ¨head.nextåæ–­å¼€
                temp.next=head
                ???è¦å¤šä¸ªæŒ‡é’ˆ
                temp=head.next.next;
                head.next.next=head;
                //ä¿è¯é€†é“¾è¡¨çš„å°¾ç»“ç‚¹ä¸ºnull
                //head.next=null;
            }

        }
    }
}
```

- æƒ³æƒ³ç”¨é€’å½’å•æŒ‡é’ˆï¼Œä½†æ˜¯é€»è¾‘ä¸Šæ²¡ç†æ¸…ï¼›å°è¯•é€’å½’+åŒæŒ‡é’ˆæ—¶å°±æ”¾å¼ƒäº†

- ç½‘å‹ï¼šé“¾è¡¨é¢˜å¿…é¡»ç”»å›¾

#### å®˜æ–¹-æ–¹æ³•ä¸€ï¼šè¿­ä»£

![image-20220325152101750](lcof.assets/image-20220325152101750.png)

åœ¨éå†é“¾è¡¨æ—¶ï¼Œå°†å½“å‰èŠ‚ç‚¹çš„ \textit{next}next æŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ç”±äºèŠ‚ç‚¹æ²¡æœ‰å¼•ç”¨å…¶å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤å¿…é¡»äº‹å…ˆå­˜å‚¨å…¶å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚åœ¨æ›´æ”¹å¼•ç”¨ä¹‹å‰ï¼Œè¿˜éœ€è¦å­˜å‚¨åä¸€ä¸ªèŠ‚ç‚¹ã€‚æœ€åè¿”å›æ–°çš„å¤´å¼•ç”¨ã€‚

```java
class Solution {
    public ListNode reverseList(ListNode head) {
        ListNode prev = null;
        ListNode curr = head;
        while (curr != null) {
            ListNode next = curr.next;
            curr.next = prev;
            prev = curr;
            curr = next;
        }
        return prev;
    }
}
```

å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯é“¾è¡¨çš„é•¿åº¦ã€‚éœ€è¦éå†é“¾è¡¨ä¸€æ¬¡ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚

#### å®˜æ–¹-æ–¹æ³•äºŒï¼šé€’å½’

é€’å½’ç‰ˆæœ¬ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå…¶å…³é”®åœ¨äºåå‘å·¥ä½œã€‚å‡è®¾é“¾è¡¨çš„å…¶ä½™éƒ¨åˆ†å·²ç»è¢«åè½¬ï¼Œç°åœ¨åº”è¯¥å¦‚ä½•åè½¬å®ƒå‰é¢çš„éƒ¨åˆ†ï¼Ÿ

å‡è®¾é“¾è¡¨ä¸ºï¼š

![image-20220325152508307](lcof.assets/image-20220325152508307.png)

```java
class Solution {
    public ListNode reverseList(ListNode head) {
        if (head == null || head.next == null) {
            return head;
        }
        ListNode newHead = reverseList(head.next);
        head.next.next = head;
        head.next = null;
        return newHead;
    }
}

```

å¤æ‚åº¦åˆ†æ:

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯é“¾è¡¨çš„é•¿åº¦ã€‚éœ€è¦å¯¹é“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œåè½¬æ“ä½œã€‚

- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯é“¾è¡¨çš„é•¿åº¦ã€‚ç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºé€’å½’è°ƒç”¨çš„æ ˆç©ºé—´ï¼Œæœ€å¤šä¸º n å±‚ã€‚

#### å³æ—¶å†æˆ˜-æˆåŠŸ

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) { val = x; }
 * }
 */
class Solution {
    ListNode newHead;
    public ListNode reverseList(ListNode head) {
        //è®¾ç½®é€’å½’è¿”å›æ¡ä»¶
        if(head==null||head.next==null){
            return head;
        }else{//åªæœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°±è®©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘æœ¬èŠ‚ç‚¹ï¼Œæœ¬èŠ‚ç‚¹æŒ‡å‘ç©ºï¼ˆä¿è¯å°¾èŠ‚ç‚¹æŒ‡å‘äº†nullï¼‰
            newHead=reverseList(head.next);
            //å¿…é¡»æŠŠåè½¬é“¾è¡¨æ”¾åœ¨é€’å½’åé¢ï¼Œæ‰èƒ½åˆ©ç”¨é€€æ ˆæ—¶çš„é€†åº
            head.next.next=head;
            head.next=null;
            return newHead;

        }

    }
}
```

- è¿˜æ˜¯ç”¨çš„é€’å½’æ³•



### [å‰‘æŒ‡ Offer 35. å¤æ‚é“¾è¡¨çš„å¤åˆ¶](https://leetcode-cn.com/problems/fu-za-lian-biao-de-fu-zhi-lcof/)

#### é¦–æˆ˜å¯„

ä¸çŸ¥é“æ€ä¹ˆå†™

----

#### å®˜æ–¹-è§£é¢˜æ€è·¯

æ™®é€šé“¾è¡¨çš„èŠ‚ç‚¹å®šä¹‰å¦‚ä¸‹ï¼š

```java
// Definition for a Node.
class Node {
    int val;
    Node next;
    public Node(int val) {
        this.val = val;
        this.next = null;
    }
}

```

æœ¬é¢˜é“¾è¡¨çš„èŠ‚ç‚¹å®šä¹‰å¦‚ä¸‹ï¼š

```java
// Definition for a Node.
class Node {
    int val;
    Node next, random;
    public Node(int val) {
        this.val = val;
        this.next = null;
        this.random = null;
    }
}

```

ç»™å®šé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œå¤åˆ¶æ™®é€šé“¾è¡¨å¾ˆç®€å•ï¼Œåªéœ€éå†é“¾è¡¨ï¼Œæ¯è½®å»ºç«‹æ–°èŠ‚ç‚¹ + æ„å»ºå‰é©±èŠ‚ç‚¹ pre å’Œå½“å‰èŠ‚ç‚¹ node çš„å¼•ç”¨æŒ‡å‘å³å¯ã€‚

æœ¬é¢˜é“¾è¡¨çš„èŠ‚ç‚¹æ–°å¢äº† random æŒ‡é’ˆï¼ŒæŒ‡å‘é“¾è¡¨ä¸­çš„ ä»»æ„èŠ‚ç‚¹ æˆ–è€… null ã€‚è¿™ä¸ª random æŒ‡é’ˆæ„å‘³ç€åœ¨å¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ„å»ºå‰é©±èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„å¼•ç”¨æŒ‡å‘ pre.next ï¼Œè¿˜è¦æ„å»ºå‰é©±èŠ‚ç‚¹å’Œå…¶éšæœºèŠ‚ç‚¹çš„å¼•ç”¨æŒ‡å‘ pre.random ã€‚

æœ¬é¢˜éš¾ç‚¹ï¼š åœ¨å¤åˆ¶é“¾è¡¨çš„è¿‡ç¨‹ä¸­æ„å»ºæ–°é“¾è¡¨å„èŠ‚ç‚¹çš„ random å¼•ç”¨æŒ‡å‘:

```java
class Solution {
    public Node copyRandomList(Node head) {
        Node cur = head;
        Node dum = new Node(0), pre = dum;
        while(cur != null) {
            Node node = new Node(cur.val); // å¤åˆ¶èŠ‚ç‚¹ cur
            pre.next = node;               // æ–°é“¾è¡¨çš„ å‰é©±èŠ‚ç‚¹ -> å½“å‰èŠ‚ç‚¹
            // pre.random = "???";         // æ–°é“¾è¡¨çš„ ã€Œ å‰é©±èŠ‚ç‚¹ -> å½“å‰èŠ‚ç‚¹ ã€ æ— æ³•ç¡®å®š
            cur = cur.next;                // éå†ä¸‹ä¸€èŠ‚ç‚¹
            pre = node;                    // ä¿å­˜å½“å‰æ–°èŠ‚ç‚¹
        }
        return dum.next;
    }
}
```

> æœ¬æ–‡ä»‹ç» ã€Œå“ˆå¸Œè¡¨ã€ ï¼Œã€Œæ‹¼æ¥ + æ‹†åˆ†ã€ ä¸¤ç§æ–¹æ³•ã€‚å“ˆå¸Œè¡¨æ–¹æ³•æ¯”è¾ƒç›´è§‚ï¼›æ‹¼æ¥ + æ‹†åˆ†æ–¹æ³•çš„ç©ºé—´å¤æ‚åº¦æ›´ä½ã€‚

#### å®˜æ–¹-æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨

åˆ©ç”¨å“ˆå¸Œè¡¨çš„æŸ¥è¯¢ç‰¹ç‚¹ï¼Œè€ƒè™‘æ„å»º åŸé“¾è¡¨èŠ‚ç‚¹ å’Œ æ–°é“¾è¡¨å¯¹åº”èŠ‚ç‚¹ çš„é”®å€¼å¯¹æ˜ å°„å…³ç³»ï¼Œå†éå†æ„å»ºæ–°é“¾è¡¨å„èŠ‚ç‚¹çš„ next å’Œ random å¼•ç”¨æŒ‡å‘å³å¯ã€‚

ç®—æ³•æµç¨‹ï¼š

1. è‹¥å¤´èŠ‚ç‚¹ head ä¸ºç©ºèŠ‚ç‚¹ï¼Œç›´æ¥è¿”å› null ï¼›
2. åˆå§‹åŒ–ï¼š å“ˆå¸Œè¡¨ dic ï¼Œ èŠ‚ç‚¹ cur æŒ‡å‘å¤´èŠ‚ç‚¹ï¼›
3. å¤åˆ¶é“¾è¡¨ï¼š
   1. å»ºç«‹æ–°èŠ‚ç‚¹ï¼Œå¹¶å‘ dic æ·»åŠ é”®å€¼å¯¹ (åŸ cur èŠ‚ç‚¹, æ–° cur èŠ‚ç‚¹ï¼‰ ï¼›
   2. cur éå†è‡³åŸé“¾è¡¨ä¸‹ä¸€èŠ‚ç‚¹ï¼›
4. æ„å»ºæ–°é“¾è¡¨çš„å¼•ç”¨æŒ‡å‘ï¼š
   1. æ„å»ºæ–°èŠ‚ç‚¹çš„ next å’Œ random å¼•ç”¨æŒ‡å‘ï¼›
   2. cur éå†è‡³åŸé“¾è¡¨ä¸‹ä¸€èŠ‚ç‚¹ï¼›
5. è¿”å›å€¼ï¼š æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ dic[cur] ï¼›

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N ï¼š ä¸¤è½®éå†é“¾è¡¨ï¼Œä½¿ç”¨ O(N)O(N) æ—¶é—´ã€‚
- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š å“ˆå¸Œè¡¨ dic ä½¿ç”¨çº¿æ€§å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public Node copyRandomList(Node head) {
        if(head == null) return null;
        Node cur = head;
        Map<Node, Node> map = new HashMap<>();
        // 3. å¤åˆ¶å„èŠ‚ç‚¹ï¼Œå¹¶å»ºç«‹ â€œåŸèŠ‚ç‚¹ -> æ–°èŠ‚ç‚¹â€ çš„ Map æ˜ å°„
        while(cur != null) {
            map.put(cur, new Node(cur.val));
            cur = cur.next;
        }
        cur = head;
        // 4. æ„å»ºæ–°é“¾è¡¨çš„ next å’Œ random æŒ‡å‘
        while(cur != null) {
            map.get(cur).next = map.get(cur.next);
            map.get(cur).random = map.get(cur.random);
            cur = cur.next;
        }
        // 5. è¿”å›æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹
        return map.get(head);
    }
}
```

#### å®˜æ–¹-æ–¹æ³•äºŒï¼šæ‹¼æ¥ + æ‹†åˆ†

è€ƒè™‘æ„å»º åŸèŠ‚ç‚¹ 1 -> æ–°èŠ‚ç‚¹ 1 -> åŸèŠ‚ç‚¹ 2 -> æ–°èŠ‚ç‚¹ 2 -> â€¦â€¦ çš„æ‹¼æ¥é“¾è¡¨ï¼Œå¦‚æ­¤ä¾¿å¯åœ¨è®¿é—®åŸèŠ‚ç‚¹çš„ random æŒ‡å‘èŠ‚ç‚¹çš„åŒæ—¶æ‰¾åˆ°æ–°å¯¹åº”æ–°èŠ‚ç‚¹çš„ random æŒ‡å‘èŠ‚ç‚¹ã€‚

ç®—æ³•æµç¨‹ï¼š

1. å¤åˆ¶å„èŠ‚ç‚¹ï¼Œæ„å»ºæ‹¼æ¥é“¾è¡¨:

   ![image-20220325163531591](lcof.assets/image-20220325163531591.png)

2. æ„å»ºæ–°é“¾è¡¨å„èŠ‚ç‚¹çš„ random æŒ‡å‘ï¼š
   - å½“è®¿é—®åŸèŠ‚ç‚¹ cur çš„éšæœºæŒ‡å‘èŠ‚ç‚¹ cur.random æ—¶ï¼Œå¯¹åº”æ–°èŠ‚ç‚¹ cur.next çš„éšæœºæŒ‡å‘èŠ‚ç‚¹ä¸º cur.random.next ã€‚
3. æ‹†åˆ†åŸ / æ–°é“¾è¡¨ï¼š
   - è®¾ç½® pre / cur åˆ†åˆ«æŒ‡å‘åŸ / æ–°é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œéå†æ‰§è¡Œ pre.next = pre.next.next å’Œ cur.next = cur.next.next å°†ä¸¤é“¾è¡¨æ‹†åˆ†å¼€ã€‚
4. è¿”å›æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ res å³å¯ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š ä¸‰è½®éå†é“¾è¡¨ï¼Œä½¿ç”¨ O(N) æ—¶é—´ã€‚
- ç©ºé—´å¤æ‚åº¦ O(1) ï¼š èŠ‚ç‚¹å¼•ç”¨å˜é‡ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public Node copyRandomList(Node head) {
        if(head == null) return null;
        Node cur = head;
        // 1. å¤åˆ¶å„èŠ‚ç‚¹ï¼Œå¹¶æ„å»ºæ‹¼æ¥é“¾è¡¨
        while(cur != null) {
            Node tmp = new Node(cur.val);
            tmp.next = cur.next;
            cur.next = tmp;
            cur = tmp.next;
        }
        // 2. æ„å»ºå„æ–°èŠ‚ç‚¹çš„ random æŒ‡å‘
        cur = head;
        while(cur != null) {
            if(cur.random != null)
                cur.next.random = cur.random.next;
            cur = cur.next.next;
        }
        // 3. æ‹†åˆ†ä¸¤é“¾è¡¨
        cur = head.next;
        Node pre = head, res = head.next;
        while(cur.next != null) {
            pre.next = pre.next.next;
            cur.next = cur.next.next;
            pre = pre.next;
            cur = cur.next;
        }
        pre.next = null; // å•ç‹¬å¤„ç†åŸé“¾è¡¨å°¾èŠ‚ç‚¹
        return res;      // è¿”å›æ–°é“¾è¡¨å¤´èŠ‚ç‚¹
    }
}
```

#### 20220325 åŠå¯„

```java
/*
// Definition for a Node.
class Node {
    int val;
    Node next;
    Node random;

    public Node(int val) {
        this.val = val;
        this.next = null;
        this.random = null;
    }
}
*/
class Solution {
    public Node copyRandomList(Node head) {
        //å¤„ç†ç©ºèŠ‚ç‚¹
        if(head==null)
            return head;

        //æŠŠæ–°é“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œè·Ÿåœ¨è€é“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹åé¢
        Node cur=head;
        while(cur!=null){
            Node temp=new Node(cur.val);
            temp.next=cur.next;
            cur.next=temp;
            cur=cur.next.next;
        }
        
        //æ ¹æ®è€é“¾è¡¨çš„ramdonï¼Œè®¾ç½®æ–°é“¾è¡¨çš„random
        cur=head;
        while(cur!=null){
            //æœ‰äº›èŠ‚ç‚¹æŒ‡å‘randomï¼Œæ‰€ä»¥è¦å°å¿ƒrandom.nextæ—¶å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ä¸ç»™æ–°é“¾è¡¨çš„randomèµ‹å€¼çš„è¯ï¼Œrandomå°±æ˜¯é»˜è®¤çš„nullã€‚
            if(cur.random!=null)
                cur.next.random=cur.random.next;
            cur=cur.next.next;
        }

        //æ‹†åˆ†ä¸¤ä¸ªé“¾è¡¨
        cur=head;
        Node result=cur.next;
        while(cur!=null){
            //å¿…é¡»è¦ä¸´æ—¶è¾…åŠ©èŠ‚ç‚¹è®°å½•æˆªæ–­å¤„
            Node temp=cur.next;
            cur.next=cur.next.next; 
            //ï¼ï¼ï¼é“¾è¡¨ä¸­å°å¿ƒæ·±åº¦nextï¼›æœ¬å¤„å¯èƒ½tempä¸ºæ–°é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹äº†ï¼Œä¸¤é‡nextä¼šæŠ¥é”™ï¼›æ¨èåƒæ ‡ç­”é‚£æ ·ï¼Œä»¥åè€…ä¸ºnextç»ˆæ­¢æ¡ä»¶
            if(temp.next!=null)
                temp.next=temp.next.next;
            cur=cur.next;
        }

        return result;
        
    }
}
```

- æ€è·¯æœ‰ï¼Œä½†æ˜¯åœ¨å¤„ç†æœ€åæ‹†åˆ†çš„æ—¶å€™ï¼Œæ²¡æ³¨æ„å¥½nextçš„æ·±åº¦ã€‚
  - å®˜æ–¹æ–¹æ³•äºŒæ‹†åˆ†æ—¶ï¼Œcur.next != nullå¯ä»¥ä¿è¯è¿˜æœ‰ä¸¤ä¸ªèŠ‚ç‚¹æ²¡æ‹†åˆ†ï¼Œä½†æ˜¯ä¼šå¯¼è‡´æ–°æ—§ä¸¤ä¸ªé“¾è¡¨æœ€åä¸€ä¸ªèŠ‚ç‚¹é»åœ¨ä¸€èµ·çš„æƒ…å†µï¼Œæ‰€ä»¥æœ€åè¦å•ç‹¬è®©åŸé“¾è¡¨çš„å°¾éƒ¨ä¸ºnullã€‚
  - æˆ‘çš„æ‹†åˆ†æ—¶ï¼Œä¸éœ€è¦æœ€åå¤„ç†æœ€åèŠ‚ç‚¹ç²˜åœ¨ä¸€èµ·çš„æƒ…å†µï¼Œä½†æ˜¯æ¯æ¬¡è¿­ä»£éƒ½è¦ifåˆ¤æ–­æ¯”è¾ƒè€—æ—¶ï¼›
  - æ€»ä¹‹ç¼åˆé“¾è¡¨æ‹†åˆ†æ—¶ï¼Œä»¥ç²˜åˆå¤„çš„åè€…ä¸ºåˆ¤æ–­ç¦»å¼€çš„æ ‡å¿—ä¸ºå¥½ï¼Œä¸å®¹æ˜“ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚



## å­—ç¬¦ä¸²

### [å‰‘æŒ‡ Offer 05. æ›¿æ¢ç©ºæ ¼](https://leetcode-cn.com/problems/ti-huan-kong-ge-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public String replaceSpace(String s) {
        
        String result="";

        //å¯¹å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦è¿›è¡Œå¤„ç†ã€‚å­—ç¬¦ä¸²é•¿åº¦ç”¨length()ï¼Œæ•°ç»„é•¿åº¦ç”¨lengthã€‚ï¼Ÿï¼Ÿï¼Ÿsizeçš„å¤§å°åŒ…å«ç©ºæ ¼å—
        for(int i=0;i<s.length();i++){
            //è·å–å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºçš„å½“å‰å­—ç¬¦
            String temp=String.valueOf(s.charAt(i));
            //å¯¹ç©ºæ ¼è¿›è¡Œæ›¿æ¢ã€‚æ³¨æ„å­—ç¬¦ä¸²ä¸èƒ½ç”¨==åˆ¤æ–­åœ°å€ç›¸ç­‰æ¨å‡ºå†…å®¹ç›¸ç­‰ï¼Œå› ä¸ºä¸åŒåœ°å€å­˜çš„å­—ç¬¦ä¸²çš„å†…å®¹å¯èƒ½ç›¸ç­‰ï¼›è€Œå¾—ç”¨equalsæ‰èƒ½åˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼ŒStringé‡å†™äº†equalsã€‚
            if(temp.equals(" ")){
                result+="%20";
            }else{
                result+=temp;
            }
        }

        return result;
    }
}
```

- æ³¨æ„ï¼šå­—ç¬¦ä¸²åˆ¤æ–­å†…å®¹ç›¸ç­‰è¦ç”¨equals

- charAtå¯ä»¥å¾—åˆ°å­—ç¬¦ä¸²æŸä½ç½®çš„å­—ç¬¦ï¼›String.valueOf()å¯ä»¥æŠŠå­—ç¬¦è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å­˜å…¥å †ä¸­çš„å­—ç¬¦ä¸²å¸¸é‡æ± ã€‚

----

#### å®˜æ–¹-éå†æ·»åŠ 

åœ¨ Python å’Œ Java ç­‰è¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²éƒ½è¢«è®¾è®¡æˆã€Œä¸å¯å˜ã€çš„ç±»å‹ï¼Œå³æ— æ³•ç›´æ¥ä¿®æ”¹å­—ç¬¦ä¸²çš„æŸä¸€ä½å­—ç¬¦ï¼Œéœ€è¦æ–°å»ºä¸€ä¸ªå­—ç¬¦ä¸²å®ç°ã€‚

ç®—æ³•æµç¨‹ï¼š

1. åˆå§‹åŒ–ä¸€ä¸ª list (Python) / StringBuilder (Java) ï¼Œè®°ä¸º res ï¼›
2. éå†åˆ—è¡¨ s ä¸­çš„æ¯ä¸ªå­—ç¬¦ c ï¼š
   - å½“ c ä¸ºç©ºæ ¼æ—¶ï¼šå‘ res åæ·»åŠ å­—ç¬¦ä¸² "%20" ï¼›
   - å½“ c ä¸ä¸ºç©ºæ ¼æ—¶ï¼šå‘ res åæ·»åŠ å­—ç¬¦ c ï¼›
3. å°†åˆ—è¡¨ res è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N) ï¼š éå†ä½¿ç”¨ O(N) ï¼Œæ¯è½®æ·»åŠ ï¼ˆä¿®æ”¹ï¼‰å­—ç¬¦æ“ä½œä½¿ç”¨ O(1)ï¼›
- ç©ºé—´å¤æ‚åº¦ O(N) ï¼š Python æ–°å»ºçš„ list å’Œ Java æ–°å»ºçš„ StringBuilder éƒ½ä½¿ç”¨äº†çº¿æ€§å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

```java

class Solution {
    public String replaceSpace(String s) {
        StringBuilder res = new StringBuilder();
        for(Character c : s.toCharArray())
        {
            if(c == ' ') res.append("%20");
            else res.append(c);
        }
        return res.toString();
    }
}

```



#### å®˜æ–¹-å­—ç¬¦æ•°ç»„

ç”±äºæ¯æ¬¡æ›¿æ¢ä» 1 ä¸ªå­—ç¬¦å˜æˆ 3 ä¸ªå­—ç¬¦ï¼Œä½¿ç”¨å­—ç¬¦æ•°ç»„å¯æ–¹ä¾¿åœ°è¿›è¡Œæ›¿æ¢ã€‚å»ºç«‹å­—ç¬¦æ•°ç»„åœ°é•¿åº¦ä¸º s çš„é•¿åº¦çš„ 3 å€ï¼Œè¿™æ ·å¯ä¿è¯å­—ç¬¦æ•°ç»„å¯ä»¥å®¹çº³æ‰€æœ‰æ›¿æ¢åçš„å­—ç¬¦ã€‚ç®—æ³•ï¼š

- è·å¾— s çš„é•¿åº¦ length
- åˆ›å»ºå­—ç¬¦æ•°ç»„ arrayï¼Œå…¶é•¿åº¦ä¸º length * 3
- åˆå§‹åŒ– size ä¸º 0ï¼Œsize è¡¨ç¤ºæ›¿æ¢åçš„å­—ç¬¦ä¸²çš„é•¿åº¦
- ä»å·¦åˆ°å³éå†å­—ç¬¦ä¸² s
  - è·å¾— s çš„å½“å‰å­—ç¬¦ c
  - å¦‚æœå­—ç¬¦ c æ˜¯ç©ºæ ¼ï¼Œåˆ™ä»¤ array[size] = '%'ï¼Œarray[size + 1] = '2'ï¼Œarray[size + 2] = '0'ï¼Œå¹¶å°† size çš„å€¼åŠ  3
  - å¦‚æœå­—ç¬¦ c ä¸æ˜¯ç©ºæ ¼ï¼Œåˆ™ä»¤ array[size] = cï¼Œå¹¶å°† size çš„å€¼åŠ  1
- éå†ç»“æŸä¹‹åï¼Œsize çš„å€¼ç­‰äºæ›¿æ¢åçš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä» array çš„å‰ size ä¸ªå­—ç¬¦åˆ›å»ºæ–°å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›æ–°å­—ç¬¦ä¸²

ä»£ç ï¼š

```java
class Solution {
    public String replaceSpace(String s) {
        int length = s.length();
        char[] array = new char[length * 3];
        int size = 0;
        for (int i = 0; i < length; i++) {
            char c = s.charAt(i);
            if (c == ' ') {
                array[size++] = '%';
                array[size++] = '2';
                array[size++] = '0';
            } else {
                array[size++] = c;
            }
        }
        String newStr = new String(array, 0, size);
        return newStr;
    }
}

```

- ç½‘å‹ï¼šè¿™æ ·ä¸è¡Œå—ğŸ˜‚`return s.replace(" ","%20");`?
  - ç½‘å‹ç­”ï¼šä¸è¡Œï¼Œè¿™ä¸ªåªèƒ½æ›¿æ¢ç¬¬ä¸€ä¸ªï¼Œåº”è¯¥ç”¨replaceAll
    - ç½‘å‹åé©³ï¼šä¸æ˜¯å“‡ï¼Œè¿™ä¸ªreplaceæ–¹æ³•ç¡®å®æ˜¯æ›¿æ¢äº†å‘€ï¼Œä½ å†å»ç¿»ç¿»çœ‹æ–‡æ¡£
    - ç½‘å‹ï¼šreplaceå’ŒreplaceAllçš„åŒºåˆ«æ˜¯åè€…æ”¯æŒæ­£åˆ™ä½†æ˜¯å‰è€…ä¸æ”¯æŒï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯å…¨éƒ¨æ›¿æ¢çš„

å¤æ‚æ€§åˆ†æ:

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚éå†å­—ç¬¦ä¸² `s` ä¸€éã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚é¢å¤–åˆ›å»ºå­—ç¬¦æ•°ç»„ï¼Œé•¿åº¦ä¸º `s` çš„é•¿åº¦çš„ 3 å€ã€‚



### [å‰‘æŒ‡ Offer 58 - II. å·¦æ—‹è½¬å­—ç¬¦ä¸²](https://leetcode-cn.com/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public String reverseLeftWords(String s, int n) {
        //ä¿å­˜å‰è‹¥å¹²ä½å­—ç¬¦
        String head="";
        //ä¿å­˜åè‹¥å¹²ä½å­—ç¬¦
        String tail="";

        //æŠŠå‰nä½å­—ç¬¦å­˜å…¥head
        for(int i=0;i<n;i++){
            head+=String.valueOf(s.charAt(i));
        }

        //æŠŠåŸå­—ç¬¦ä¸²åé¢çš„éƒ¨åˆ†å–å‡ºæ¥
        for(int i=n;i<s.length();i++){
            tail+=String.valueOf(s.charAt(i));
        }

        return tail+head;

    }
}
```

- â€œæŠŠå­—ç¬¦ä¸²æ‹†æˆå•ä¸ªå­—ç¬¦ï¼Œå†æŠŠå•ä¸ªå­—ç¬¦è½¬åŒ–æˆå•å­—ç¬¦å­—ç¬¦ä¸²ï¼Œå†æ“ä½œå­—ç¬¦ä¸²â€ï¼›è¿™ç§æ–¹æ³•å¾ˆå®¹æ˜“ï¼Œä½†æ˜¯æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦æ¯”è¾ƒå¤§ã€‚



#### å®˜æ–¹-æ–¹æ³•ä¸€ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡

è§£é¢˜æ€è·¯ï¼š

- æœ¬é¢˜åšæ³•è¾ƒå¤šï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç» â€œå­—ç¬¦ä¸²åˆ‡ç‰‡â€ ï¼Œ â€œåˆ—è¡¨éå†æ‹¼æ¥â€ ï¼Œ â€œå­—ç¬¦ä¸²éå†æ‹¼æ¥â€ ä¸‰ç§æ–¹æ³•ã€‚
  ç”±äºæœ¬é¢˜çš„å¤šè§£æ³•æ¶‰åŠåˆ°äº† å­—ç¬¦ä¸²ä¸ºä¸å¯å˜å¯¹è±¡ çš„ç›¸å…³æ¦‚å¿µï¼Œå¯¼è‡´æ•ˆç‡åŒºåˆ«è¾ƒå¤§ã€‚å› æ­¤ï¼Œå•åˆ—ä¸€èŠ‚ ä¸‰ç§æ–¹æ³•çš„æ•ˆç‡åˆ†æ ï¼Œæœ›å¯¹å„ä½æœ‰æ‰€å¸®åŠ©ã€‚

æ–¹æ³•ä¸€ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡

- åº”ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡å‡½æ•°ï¼Œå¯æ–¹ä¾¿å®ç°å·¦æ—‹è½¬å­—ç¬¦ä¸²ã€‚

- è·å–å­—ç¬¦ä¸² s[n:]s[n:] åˆ‡ç‰‡å’Œ s[:n]s[:n] åˆ‡ç‰‡ï¼Œä½¿ç”¨ "++" è¿ç®—ç¬¦æ‹¼æ¥å¹¶è¿”å›å³å¯ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N) ï¼š å…¶ä¸­ N ä¸ºå­—ç¬¦ä¸² sçš„é•¿åº¦ï¼Œå­—ç¬¦ä¸²åˆ‡ç‰‡å‡½æ•°ä¸ºçº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼ˆå‚è€ƒèµ„æ–™ï¼‰ï¼›
- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š ä¸¤ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡çš„æ€»é•¿åº¦ä¸º Nã€‚

ä»£ç ï¼š

```java
class Solution {
    public String reverseLeftWords(String s, int n) {
        return s.substring(n, s.length()) + s.substring(0, n);
    }
}

```

- substringå·¦åŒ…å³ä¸åŒ…



#### å®˜æ–¹-æ–¹æ³•äºŒï¼šåˆ—è¡¨éå†æ‹¼æ¥
è‹¥é¢è¯•è§„å®šä¸å…è®¸ä½¿ç”¨ åˆ‡ç‰‡å‡½æ•° ï¼Œåˆ™ä½¿ç”¨æ­¤æ–¹æ³•ã€‚

ç®—æ³•æµç¨‹ï¼š

1. æ–°å»ºä¸€ä¸ª list(Python)ã€StringBuilder(Java) ï¼Œè®°ä¸º resres ï¼›

2. å…ˆå‘ resres æ·»åŠ  â€œç¬¬ n + 1n+1 ä½è‡³æœ«ä½çš„å­—ç¬¦â€ ï¼›
3. å†å‘ resres æ·»åŠ  â€œé¦–ä½è‡³ç¬¬ nn ä½çš„å­—ç¬¦â€ ï¼›
4. å°† resres è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š çº¿æ€§éå† så¹¶æ·»åŠ ï¼Œä½¿ç”¨çº¿æ€§æ—¶é—´ï¼›
- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š æ–°å»ºçš„è¾…åŠ© resä½¿ç”¨ O(N)å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public String reverseLeftWords(String s, int n) {
        StringBuilder res = new StringBuilder();
        for(int i = n; i < s.length(); i++)
            res.append(s.charAt(i));
        for(int i = 0; i < n; i++)
            res.append(s.charAt(i));
        return res.toString();
    }
}
```

- æ³¨æ„ï¼šStirngBuilderå®ä¾‹åŒ–çš„å¯¹è±¡æœ€åè¦ç”¨toStringæ–¹æ³•æŠŠè‡ªå·±è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚
- StirngBuilderå¯ä»¥ç›´æ¥appendå­—ç¬¦



#### å®˜æ–¹-æ–¹æ³•ä¸‰ï¼šå­—ç¬¦ä¸²éå†æ‹¼æ¥
è‹¥è§„å®š Python ä¸èƒ½ä½¿ç”¨ join() å‡½æ•°ï¼Œæˆ–è§„å®š Java åªèƒ½ç”¨ String ï¼Œåˆ™ä½¿ç”¨æ­¤æ–¹æ³•ã€‚

æ­¤æ–¹æ³•ä¸ æ–¹æ³•äºŒ æ€è·¯ä¸€è‡´ï¼ŒåŒºåˆ«æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²ä»£æ›¿åˆ—è¡¨ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š çº¿æ€§éå† så¹¶æ·»åŠ ï¼Œä½¿ç”¨çº¿æ€§æ—¶é—´ï¼›
- ç©ºé—´å¤æ‚åº¦ O(N) ï¼š å‡è®¾å¾ªç¯è¿‡ç¨‹ä¸­å†…å­˜ä¼šè¢«åŠæ—¶å›æ”¶ï¼Œå†…å­˜ä¸­è‡³å°‘åŒæ—¶å­˜åœ¨é•¿åº¦ä¸º Nå’Œ N-1çš„ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼ˆæ–°å»ºé•¿åº¦ä¸º Nçš„ reséœ€è¦ä½¿ç”¨å‰ä¸€ä¸ªé•¿åº¦ N-1çš„ resï¼‰ï¼Œå› æ­¤è‡³å°‘ä½¿ç”¨ O(N)çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public String reverseLeftWords(String s, int n) {
        String res = "";
        for(int i = n; i < s.length(); i++)
            res += s.charAt(i);
        for(int i = 0; i < n; i++)
            res += s.charAt(i);
        return res;
    }
}
```

- è¿™ä¸ªå°±æ˜¯æˆ‘é¦–æˆ˜çš„åšæ³•ï¼›ä¸è¿‡æˆ‘è¿˜æŠŠcharAtè½¬æ¢æˆStirngåï¼Œå†ç”¨+=ã€‚



#### ä¸‰ç§å®˜æ–¹ç®—æ³•çš„åŒºåˆ«

è¯¦ç»†åˆ†æè¯·å‚è€ƒ Efficient String Concatenation in Python ã€‚

ä»¥ä¸Šä¸‰ç§æ–¹æ³•çš„ç©ºé—´ä½¿ç”¨å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
ä»¥ Python ä¸ºä¾‹å¼€å±•ä¸‰ç§æ–¹æ³•çš„æ•ˆç‡æµ‹è¯•ï¼Œç»“è®ºåŒæ ·é€‚ç”¨äº Java ç­‰å…¶ä»–è¯­è¨€ã€‚

![Picture4.png](lcof.assets/ef68413b3366b97af3ed76037c6a9d1e40ac09c74fd6e5cb6d5173cbd7116beb-Picture4.png)



## æŸ¥æ‰¾ç®—æ³•ï¼ˆç®€å•ï¼‰

### [å‰‘æŒ‡ Offer 03. æ•°ç»„ä¸­é‡å¤çš„æ•°å­—](https://leetcode-cn.com/problems/shu-zu-zhong-zhong-fu-de-shu-zi-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public int findRepeatNumber(int[] nums) {
        /*
        "é•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…",å°±æ˜¯æ˜ç¤ºè¦ç”¨æ•°ç»„å†…å®¹ä¸æ•°ç»„ä¸‹æ ‡å…³è”ã€‚
         */

        //docæ•°ç»„çš„æ¯ä¸€ä½ï¼Œè®°è½½äº†numsæ•°ç»„ä¸­å„å…ƒç´ å‡ºç°çš„é¢‘ç‡ï¼›docçš„ä¸‹æ ‡å’Œnumsçš„å€¼å¯¹åº”ã€‚æ•°ç»„ä¸­åˆå§‹ä¸ºå…¨0ã€‚
        int[] doc=new int[nums.length];

        //éå†numsï¼Œnumsä¸­å‡ºç°çš„å€¼å¯¹åº”docæ•°ç»„çš„ä¸‹æ ‡ï¼Œç»™å¯¹åº”ä¸‹æ ‡å­˜çš„å€¼+1æ¥è®°å½•é¢‘æ¬¡ã€‚
        for(int i=0;i<nums.length;i++){
           doc[nums[i]]++; 
        }

        //æŠŠé‡å¤æ•°å­—é‡Œï¼Œæœ€å°çš„é‚£ä¸ªè¿”å›
        for(int i=0;i<doc.length;i++){
            if(doc[i]>1){
                return i;
            }
        }

        //å¦‚æœä¸Šé¢forå¾ªç¯æ²¡æœ‰è¿”å›ï¼Œåˆ™è¯´æ˜æ•°ç»„ä¸­æ²¡æœ‰é‡å¤æ•°å­—ï¼›è¿”å›-1è¡¨ç¤ºæŠ¥é”™ã€‚
        return -1;

    }
}
```

- æˆ‘è¿™ç§æ–¹æ³•ï¼Œå¦‚æœnumsçš„å†…å®¹å¾ˆå¤§ï¼Œå¯èƒ½ä¼šè¶…è¿‡intçš„èŒƒå›´ï¼Œè¿™æ ·æ¥è¯´è¿˜æ˜¯å®˜æ–¹çš„æ›´å®‰å…¨
  - intçš„å–å€¼èŒƒå›´ä¸ºï¼š -2^31â€”â€”2^31-1ï¼Œå³-2147483648â€”â€”2147483647ã€‚
  - ä¸è¿‡æœ¬é¢˜ä¸­çš„â€é™åˆ¶â€œè¯´2 <= n <= 100000ï¼Œé‚£ä¹ˆä¸ä¼šå‡»ç©¿ã€‚åšé¢˜ä¸€å®šè¦çœ‹ç¤ºä¾‹ä¸‹çš„**â€œæç¤ºâ€**æˆ–**â€é™åˆ¶â€œ**

#### å®˜æ–¹-æ–¹æ³•ä¸€ï¼šéå†æ•°ç»„
ç”±äºåªéœ€è¦æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ï¼Œå› æ­¤éå†æ•°ç»„ï¼Œé‡åˆ°é‡å¤çš„æ•°å­—å³è¿”å›ã€‚ä¸ºäº†åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯å¦é‡å¤é‡åˆ°ï¼Œä½¿ç”¨é›†åˆå­˜å‚¨å·²ç»é‡åˆ°çš„æ•°å­—ï¼Œå¦‚æœé‡åˆ°çš„ä¸€ä¸ªæ•°å­—å·²ç»åœ¨é›†åˆä¸­ï¼Œåˆ™å½“å‰çš„æ•°å­—æ˜¯é‡å¤æ•°å­—ã€‚ç®—æ³•ï¼š

- åˆå§‹åŒ–é›†åˆä¸ºç©ºé›†åˆï¼Œé‡å¤çš„æ•°å­— repeat = -1
- éå†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼š
  - å°†è¯¥å…ƒç´ åŠ å…¥é›†åˆä¸­ï¼Œåˆ¤æ–­æ˜¯å¦æ·»åŠ æˆåŠŸ
    - å¦‚æœæ·»åŠ å¤±è´¥ï¼Œè¯´æ˜è¯¥å…ƒç´ å·²ç»åœ¨é›†åˆä¸­ï¼Œå› æ­¤è¯¥å…ƒç´ æ˜¯é‡å¤å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ çš„å€¼èµ‹ç»™ repeatï¼Œå¹¶ç»“æŸéå†
- è¿”å› repeat

ä»£ç ï¼š

```java
class Solution {
    public int findRepeatNumber(int[] nums) {
        Set<Integer> set = new HashSet<Integer>();
        int repeat = -1;
        for (int num : nums) {
            if (!set.add(num)) {
                repeat = num;
                break;
            }
        }
        return repeat;
    }
}
```

- **åˆ©ç”¨äº†hashSetåˆ¤æ–­é‡å¤ï¼›åŒç†å¯ä»¥åˆ©ç”¨hashmapåˆ¤æ–­ä¸ªæ•°**ã€‚

å¤æ‚æ€§åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚
  - éå†æ•°ç»„ä¸€éã€‚ä½¿ç”¨å“ˆå¸Œé›†åˆï¼ˆHashSetï¼‰ï¼Œæ·»åŠ å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œæ•…æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚ä¸é‡å¤çš„æ¯ä¸ªå…ƒç´ éƒ½å¯èƒ½å­˜å…¥é›†åˆï¼Œå› æ­¤å ç”¨ O(n)é¢å¤–ç©ºé—´ã€‚



### [å‰‘æŒ‡ Offer 53 - I. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­— I](https://leetcode-cn.com/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof/)

#### é¦–æˆ˜å‘Šæ·-hashæ³•

```java
class Solution {
    public int search(int[] nums, int target) {
        /*
        å› ä¸º10çš„9æ¬¡æ–¹ï¼Œå°äº2*10çš„9æ¬¡æ¬¡æ–¹ï¼Œæ‰€ä»¥numså­˜å€¼çš„èŒƒå›´åœ¨æ•´æ•°èŒƒå›´å†…ï¼Œä½†æ˜¯ç”¨æ•°ç»„ä¼šæœ‰è¿ç»­ç©ºé—´ï¼Œæµªè´¹ï¼›ç”¨hashMapå§
        */

        //æ³¨æ„å·¦è¾¹æŒ‡å®šæ³›å‹çš„å…·ä½“ç±»å‹
        Map<Integer,Integer> map=new HashMap<>();

        //ä¾¿åˆ©ç»™å®šçš„æ•°ç»„
        for(int i=0;i<nums.length;i++){
            //å¦‚æœå·²ä»…å­˜åœ¨hashæ˜ å°„ï¼Œç»™æ¬¡æ•°åŠ ä¸€
            if(map.containsKey(nums[i])){
                map.put(nums[i],map.get(nums[i])+1);

            }else{//å¦åˆ™å»ºç«‹é’ˆå¯¹æŸæ•°å­—å’Œå…¶æ•°å­—çš„hashæ˜ å°„
                map.put(nums[i],1);
            }
        }

        //å¤„ç†æ¬¡æ•°ä¸º0çš„è¯·æ¬¾
        return map.containsKey(target)?map.get(target):0;

    }
}
```

- æœ¬é¢˜æ¡ä»¶æ˜¯â€œæ’åºæ•°ç»„â€ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡ç”¨ä¸Šè¿™ä¸ªæ¡ä»¶ï¼›æ’åºæ•°ç»„åº”è¯¥ç”¨åŒæŒ‡é’ˆè§£å†³ã€‚

#### é¦–æˆ˜å‘Šæ·-åŒæŒ‡é’ˆ

```java
class Solution {
    public int search(int[] nums, int target) {
        //çœ‹åˆ°æ’åºæ•°ç»„ï¼Œæ‰€ä»¥ç›®æ ‡æ•°å­—æ˜¯è¿ç»­çš„ï¼›ç”¨åŒæŒ‡é’ˆ

        //å¤„ç†ç‰¹æ®Šæƒ…å†µï¼šç©ºæ•°ç»„æƒ…å†µï¼Œå¦åˆ™nums[right]ä¼šè¶…è¿‡æ•°ç»„è¾¹ç•Œ
        if(nums.length==0){
            return 0;
        }

        //åˆå§‹åŒ–åŒæŒ‡é’ˆä¸ºæ•°ç»„ä¸¤ç«¯
        int left=0;
        int right=nums.length-1;

        //åªè¦ä¸¤ä¸ªæŒ‡é’ˆæ²¡ç¢°åˆ°ç›®æ ‡æ•°å°±ä¸€ç›´å¾ªç¯
        while(true){
            if(nums[left]!=target){
                left++;
            }
            if(nums[right]!=target){
                right--;
            }

            //å½“left>rightï¼Œæˆ–nums[left]==nums[right]!=targetæ—¶ç›´æ¥è¿”å›0ï¼›å½“nums[left]==nums[right]==targetæ—¶è¿”å›right-left+1
            if(left>right||((nums[left]==nums[right])&&(nums[right]!=target))){
                return 0;
            }else if((nums[left]==nums[right])&&(nums[right]==target)){
                return right-left+1;
            }
        }

    }
}
```

- æˆ‘ï¼š
  - æ•°ç»„é—®é¢˜ï¼Œå°å¿ƒè‡ªå®šä¹‰iæ—¶ï¼Œåœ¨ç‰¹æ®Šè¾¹ç•Œæ¡ä»¶ä¸‹ï¼Œiè¶…å‡ºè¾¹ç•Œ
  - å˜é‡è¦ä¸€è‡´ï¼Œæ¯”å¦‚leftä¸è¦å†™ç€å†™ç€å°±å†™æˆlã€‚
- ç½‘å‹ï¼šé¢è¯•å®˜å‡ºè¿™é¢˜çš„è¯è‚¯å®šæ˜¯æƒ³è®©ä½ å†™äºŒåˆ†çš„å•¦ å…¶ä»–æ²¡ç”¨
  - ç½‘å‹ï¼šæˆ‘ç¬¬ä¸€æƒ³æ³•ä¹Ÿæ˜¯äºŒåˆ†ï¼Œä½†æ˜¯æˆ‘å‘ç°é¢˜ç›®æ²¡ç»™æ•°ç»„é•¿åº¦ï¼Œæ±‚ä¸ªé•¿åº¦ä¸å°±å·²ç» O(n)äº†å—
    - ç½‘å‹åé©³ï¼š åƒjavaè¿™ç§è¯­è¨€ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯ç¼–è¯‘çš„æ—¶å€™å°±ç”Ÿæˆå¥½çš„ï¼Œä¸éœ€è¦å®æ—¶ç®—çš„ï¼›nums.lengthç›´æ¥æ˜¯æ•°ç»„é•¿åº¦ï¼Œè¿™æ˜¯æ•°ç»„æœ¬èº«çš„å±æ€§
- æœ¬é¢˜åŒæŒ‡é’ˆï¼Œä¸å¦‚å®˜æ–¹çš„2åˆ†æ•ˆç‡é«˜ã€‚

æ€§èƒ½ï¼š

![image-20220326170601282](lcof.assets/image-20220326170601282.png)

#### å®˜æ–¹-äºŒåˆ†æ³•

è§£é¢˜æ€è·¯ï¼š

æ’åºæ•°ç»„ä¸­çš„æœç´¢é—®é¢˜ï¼Œé¦–å…ˆæƒ³åˆ° **äºŒåˆ†æ³•** è§£å†³ã€‚

![image-20220326172735012](lcof.assets/image-20220326172735012.png)

ç®—æ³•è§£æï¼š

![image-20220326172816408](lcof.assets/image-20220326172816408.png)

æ•ˆç‡ä¼˜åŒ–ï¼š

![image-20220326172840370](lcof.assets/image-20220326172840370.png)

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(log N)ï¼š äºŒåˆ†æ³•ä¸ºå¯¹æ•°çº§åˆ«å¤æ‚åº¦ã€‚
- ç©ºé—´å¤æ‚åº¦ O(1) ï¼š å‡ ä¸ªå˜é‡ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public int search(int[] nums, int target) {
        // æœç´¢å³è¾¹ç•Œ right
        int i = 0, j = nums.length - 1;
        while(i <= j) {
            int m = (i + j) / 2;
            if(nums[m] <= target) i = m + 1;
            else j = m - 1;
        }
        int right = i;
        // è‹¥æ•°ç»„ä¸­æ—  target ï¼Œåˆ™æå‰è¿”å›
        if(j >= 0 && nums[j] != target) return 0;
        // æœç´¢å·¦è¾¹ç•Œ right
        i = 0; j = nums.length - 1;
        while(i <= j) {
            int m = (i + j) / 2;
            if(nums[m] < target) i = m + 1;
            else j = m - 1;
        }
        int left = j;
        return right - left - 1;
    }
}
```

- å¯å°† nums[m] = targetnums[m]=target æƒ…å†µåˆå¹¶è‡³å…¶ä»–ä¸¤ç§æƒ…å†µä¸­ã€‚



### [å‰‘æŒ‡ Offer 53 - II. 0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­—](https://leetcode-cn.com/problems/que-shi-de-shu-zi-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public int missingNumber(int[] nums) {
        /*
        å¯ä»¥äºŒåˆ†æŸ¥æ‰¾ï¼Œâ€œl-râ€ä¸ç­‰äºâ€œnums[l]-nums[r]â€çš„è¯ï¼Œåˆ™ç¡®å®çš„æ•°å­—åœ¨lrä¹‹é—´ã€‚
        ä½†æ˜¯çº¯åŒæŒ‡é’ˆä¼šè·³è¿‡ç›®æ ‡å€¼ï¼Œä½¿ç›®æ ‡å€¼ä¸å†lrä¹‹é—´ï¼›å› ä¸ºåŒæŒ‡é’ˆè§„åˆ™ä¸­â€œå¥½åƒâ€è¯´lå’Œråœ¨ä¿®æ”¹æ—¶ä¸èƒ½å’Œmé‡åˆï¼Œåªèƒ½è¶Šè¿‡ã€‚

        æˆ‘å…ˆç”¨onéå†çš„æ–¹æ³•åšäº†
        */

        //ç¼ºå¤±å€¼åœ¨[0,n-2]æ—¶
        for(int i=0;i<nums.length;i++){
            if(nums[i]!=i)
                return i;
        }
        //ç¼ºå¤±å€¼æ˜¯n-1æ—¶
        return nums.length;

    }
}
```

æ•ˆæœè¿˜è¡Œï¼š

![image-20220327154126719](lcof.assets/image-20220327154126719.png)



#### å®˜æ–¹-äºŒåˆ†æ³•

è§£é¢˜æ€è·¯ï¼š

![image-20220327155156544](lcof.assets/image-20220327155156544.png)

ç®—æ³•è§£æï¼š

![image-20220327155218162](lcof.assets/image-20220327155218162.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220327155245698](lcof.assets/image-20220327155245698.png)

ä»£ç ï¼š

```java
class Solution {
    public int missingNumber(int[] nums) {
        int i = 0, j = nums.length - 1;
        while(i <= j) {
            int m = (i + j) / 2;
            if(nums[m] == m) i = m + 1;
            else j = m - 1;
        }
        return i;
    }
}
```

- æˆ‘å’Œå®˜æ–¹å’Œé«˜èµç½‘å‹ï¼šâ€œ**æ’åºæ•°ç»„ä¸­çš„æœç´¢é—®é¢˜ï¼Œé¦–å…ˆæƒ³åˆ° äºŒåˆ†æ³• è§£å†³**ã€‚â€getä¸€é¡¹æ–°æŠ€èƒ½ã€‚

- æˆ‘ï¼šæœ¬é¢˜è§£çš„è§†é¢‘ä¸é”™ï¼Œå¾ˆæ¸…æ™°ï¼Œå¯ä»¥çœ‹çœ‹
- æˆ‘ï¼šå®˜æ–¹ç®—æ³•åœ¨l==rçš„æ—¶å€™ä¸é€€å‡ºï¼Œè®©å®ƒä¸¤å†ç§»åŠ¨ä¸€æ­¥ä»è€Œäº¤å‰å¤¹ä½ç›®æ ‡å€¼ï¼Œä¸é”™ï¼



## æŸ¥æ‰¾ç®—æ³•ï¼ˆä¸­ç­‰ï¼‰

### [å‰‘æŒ‡ Offer 04. äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾](https://leetcode-cn.com/problems/er-wei-shu-zu-zhong-de-cha-zhao-lcof/)

#### é¦–æˆ˜å¯„

#### å®˜æ–¹-äºŒå‰æœç´¢æ ‘æ³•

ç”±äºç»™å®šçš„äºŒç»´æ•°ç»„å…·å¤‡æ¯è¡Œä»å·¦åˆ°å³é€’å¢ä»¥åŠæ¯åˆ—ä»ä¸Šåˆ°ä¸‹é€’å¢çš„ç‰¹ç‚¹ï¼Œå½“è®¿é—®åˆ°ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¯ä»¥æ’é™¤æ•°ç»„ä¸­çš„éƒ¨åˆ†å…ƒç´ ã€‚

ä»äºŒç»´æ•°ç»„çš„å³ä¸Šè§’å¼€å§‹æŸ¥æ‰¾ã€‚å¦‚æœå½“å‰å…ƒç´ ç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœå½“å‰å…ƒç´ å¤§äºç›®æ ‡å€¼ï¼Œåˆ™ç§»åˆ°å·¦è¾¹ä¸€åˆ—ã€‚å¦‚æœå½“å‰å…ƒç´ å°äºç›®æ ‡å€¼ï¼Œåˆ™ç§»åˆ°ä¸‹è¾¹ä¸€è¡Œã€‚

å¯ä»¥è¯æ˜è¿™ç§æ–¹æ³•ä¸ä¼šé”™è¿‡ç›®æ ‡å€¼ã€‚å¦‚æœå½“å‰å…ƒç´ å¤§äºç›®æ ‡å€¼ï¼Œè¯´æ˜å½“å‰å…ƒç´ çš„ä¸‹è¾¹çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸€å®šå¤§äºç›®æ ‡å€¼ï¼Œå› æ­¤å¾€ä¸‹æŸ¥æ‰¾ä¸å¯èƒ½æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¾€å·¦æŸ¥æ‰¾å¯èƒ½æ‰¾åˆ°ç›®æ ‡å€¼ã€‚å¦‚æœå½“å‰å…ƒç´ å°äºç›®æ ‡å€¼ï¼Œè¯´æ˜å½“å‰å…ƒç´ çš„å·¦è¾¹çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸€å®šå°äºç›®æ ‡å€¼ï¼Œå› æ­¤å¾€å·¦æŸ¥æ‰¾ä¸å¯èƒ½æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¾€ä¸‹æŸ¥æ‰¾å¯èƒ½æ‰¾åˆ°ç›®æ ‡å€¼ã€‚

- è‹¥æ•°ç»„ä¸ºç©ºï¼Œè¿”å› false
- åˆå§‹åŒ–è¡Œä¸‹æ ‡ä¸º 0ï¼Œåˆ—ä¸‹æ ‡ä¸ºäºŒç»´æ•°ç»„çš„åˆ—æ•°å‡ 1
- é‡å¤ä¸‹åˆ—æ­¥éª¤ï¼Œç›´åˆ°è¡Œä¸‹æ ‡æˆ–åˆ—ä¸‹æ ‡è¶…å‡ºè¾¹ç•Œ
  - è·å¾—å½“å‰ä¸‹æ ‡ä½ç½®çš„å…ƒç´  num
  - å¦‚æœ num å’Œ target ç›¸ç­‰ï¼Œè¿”å› true
  - å¦‚æœ num å¤§äº targetï¼Œåˆ—ä¸‹æ ‡å‡ 1
  - å¦‚æœ num å°äº targetï¼Œè¡Œä¸‹æ ‡åŠ  1
- å¾ªç¯ä½“æ‰§è¡Œå®Œæ¯•ä»æœªæ‰¾åˆ°å…ƒç´ ç­‰äº target ï¼Œè¯´æ˜ä¸å­˜åœ¨è¿™æ ·çš„å…ƒç´ ï¼Œè¿”å› false`

ä»£ç ï¼š

```java

class Solution {
    public boolean findNumberIn2DArray(int[][] matrix, int target) {
        if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {
            return false;
        }
        int rows = matrix.length, columns = matrix[0].length;
        int row = 0, column = columns - 1;
        while (row < rows && column >= 0) {
            int num = matrix[row][column];
            if (num == target) {
                return true;
            } else if (num > target) {
                column--;
            } else {
                row++;
            }
        }
        return false;
    }
}

```

å¤æ‚åº¦åˆ†æ:

- æ—¶é—´å¤æ‚åº¦ï¼šO(n+m)ã€‚è®¿é—®åˆ°çš„ä¸‹æ ‡çš„è¡Œæœ€å¤šå¢åŠ  n æ¬¡ï¼Œåˆ—æœ€å¤šå‡å°‘ m æ¬¡ï¼Œå› æ­¤å¾ªç¯ä½“æœ€å¤šæ‰§è¡Œ n + m æ¬¡ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚



#### 20220327æˆåŠŸ

```java
class Solution {
    public boolean findNumberIn2DArray(int[][] matrix, int target) {

        //å¤„ç†ç©ºæ•°ç»„æƒ…å†µ
        if(matrix.length==0){
            return false;
        }

        //å¤„ç†éç©ºæ•°ç»„ï¼Œä»æ•°ç»„çš„å·¦ä¸‹è§’å¼€å§‹åšäºŒå‰æœç´¢æ ‘å¼æ¢ç´¢
        //åˆå§‹åŒ–è¡Œåˆ—åæ ‡ï¼›å…±nè¡Œmåˆ—
        int n=matrix.length-1,m=0,maxM=matrix[0].length-1;

        while(n>=0&&m<=maxM){
            if(matrix[n][m]<target){
                m++;
            }else if(matrix[n][m]>target){
                n--;
            }else{
                return true;
            }
        }

        return false;

    }
}
```



### [å‰‘æŒ‡ Offer 11. æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—](https://leetcode-cn.com/problems/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof/)

#### é¦–æˆ˜åŠå¯„

```java
class Solution {
    public int minArray(int[] numbers) {

        //é¢˜ç›®è¯´nä¸ä¸ºè´Ÿæ•°ï¼Œä½†æ˜¯numbers[n]å¯èƒ½æ˜¯è´Ÿæ•°ï¼›é‚£ä¹ˆè¿™ä¸ªlastå–0å°±ä¼šå¯¼è‡´å…ƒç´ ä¸€æ—¦æœ‰è´Ÿæ•°ï¼Œå°±æå‰é€€å‡ºforå¾ªç¯
        //int last=0;
        int last=Integer.MIN_VALUE;
        for(int i=0;i<numbers.length;i++){
            //ä¾¦æŸ¥åˆ°æ–­å´–å°±è¿”å›
            if(numbers[i]<last){
                return numbers[i];
            }
            last=numbers[i];
        }

        //æ²¡ä¾¦æŸ¥åˆ°æ–­å´–ï¼Œå¯èƒ½æ˜¯æ•°å­—å…¨ç›¸åŒï¼›æˆ–è€…ç»å†äº†næ¬¡æ—‹è½¬æˆäº†æ²¡æ—‹è½¬å‰çš„å‡åºçŠ¶æ€ï¼šè¿”å›ç¬¬ä¸€ä¸ªæ•°
        return numbers[0];
    }
}
```

- æ€è·¯æœ‰ï¼Œä½†æ˜¯æŠŠlastè®¾ç½®ä¸º0å¿½ç•¥äº†æ•°ç»„å…ƒç´ ä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œå¯¼è‡´ç¨‹åºä¸€ç¢°åˆ°è´Ÿæ•°å…ƒç´ å°±ä»¥ä¸ºç¢°åˆ°äº†æ–­å´–å°±é€€å‡ºå¾ªç¯å¹¶è¿”å›é”™è¯¯çš„å€¼äº†ï¼›æŠŠlaståˆå§‹å€¼æ¢æˆæœ€å°æ•´æ•°å°±è¿‡äº†ã€‚
- æˆ‘åæ€ï¼šæ—¢ç„¶éƒ½çº¿æ€§éå†äº†ï¼Œä¸å¦‚å¹²è„†ç”¨laterè®°å½•ç¢°åˆ°è¿‡çš„æœ€å°å€¼ï¼Œç”šè‡³éƒ½ä¸ç”¨æŸ¥çœ‹æ–­å´–ï¼›æˆ‘ç›¸å½“äºç›¸åŒçš„æ—¶é—´å¤æ‚åº¦èƒ½è§£å†³çš„é—®é¢˜ï¼Œç”¨æ›´å¤æ‚çš„æ–¹å¼è§£å†³äº†ï¼Œå‡åˆ†é¡¹ã€‚

#### å®˜æ–¹-äºŒåˆ†æŸ¥æ‰¾

è§£é¢˜æ€è·¯ï¼š

![image-20220327224636236](lcof.assets/image-20220327224636236.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220327224718445](lcof.assets/image-20220327224718445.png)

- æˆ‘ï¼šj=j-1åï¼Œæœ€å°å€¼è¿˜åœ¨ijä¹‹é—´ï¼Œå› ä¸ºï¼š
  - å¦‚æœjæ˜¯æœ€å°å€¼ï¼Œé‚£ä¹ˆåŸæœ¬numsm==numsjï¼Œè®©j--åï¼Œè‡³å°‘mä½ç½®æœ‰æœ€å°å€¼
  - j--ç›¸å½“äºæ˜¯ä¸ºé‡å¤å…ƒç´ å»é‡ã€‚

æ­£ç¡®æ€§è¯æ˜ï¼š

![image-20220327224758158](lcof.assets/image-20220327224758158.png)

è¡¥å……æ€è€ƒï¼š ä¸ºä»€ä¹ˆæœ¬é¢˜äºŒåˆ†æ³•ä¸ç”¨ nums[m]*n**u**m**s*[*m*] å’Œ nums[i]*n**u**m**s*[*i*] ä½œæ¯”è¾ƒï¼Ÿ

![image-20220327224829837](lcof.assets/image-20220327224829837.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220327224853507](lcof.assets/image-20220327224853507.png)

ä»£ç ï¼š

```java
class Solution {
    public int minArray(int[] numbers) {
        int i = 0, j = numbers.length - 1;
        while (i < j) {
            int m = (i + j) / 2;
            if (numbers[m] > numbers[j]) i = m + 1;
            else if (numbers[m] < numbers[j]) j = m;
            else j--;
        }
        return numbers[i];
    }
}
```

- ç½‘å‹ï¼šä¸ºä»€ä¹ˆå®˜æ–¹çš„äºŒåˆ†æ³•çš„é¢˜è§£å¾ˆå¤šéƒ½æ˜¯å†™çš„`low + (high - low) / 2 `è€Œä¸æ˜¯ `(high + low) / 2`
  - ç½‘å‹ç­”ï¼šé˜²æ­¢æº¢å‡ºå§ã€‚

### [å‰‘æŒ‡ Offer 50. ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦](https://leetcode-cn.com/problems/di-yi-ge-zhi-chu-xian-yi-ci-de-zi-fu-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public char firstUniqChar(String s) {
        /*
        ç¬¬ä¸€æ¬¡é‡å¤ã€‚æ²¡æœ‰è¯´æœ‰åºï¼Œä½¿ç”¨hashMapåˆ¤æ–­é‡å¤
         */
        Map<Character,Integer> map=new HashMap<>();
        //å…ˆåšä¸€æ¬¡éå†ï¼Œè®°å½•ä¸‹å„å­—ç¬¦å‡ºç°çš„é¢‘åº¦
        for(int i=0;i<s.length();i++){
            char tempCh=s.charAt(i);
            if(map.containsKey(tempCh)){
                map.put(tempCh,map.get(tempCh)+1);
            }else{
                //åŸºæœ¬æ•°æ®ç±»å‹ä¼šè‡ªåŠ¨åŒ…è£…æ‹†åŒ…
                map.put(tempCh,1);
            }
        }
        //æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦
        for(int i=0;i<s.length();i++){
            char tempCh=s.charAt(i);
            if(map.get(tempCh)==1){
                return tempCh;
            }
        }

        //ä¸€ç›´æ²¡return è¯´æ˜ä¸å­˜åœ¨å­—ç¬¦
        return ' ';
    }
}
```

#### ç½‘å‹1-æ•°ç»„è®°å½•

```java
public char firstUniqChar(String s) {
    if (s.equals("")) return ' ';
    //åˆ›å»ºâ€˜a'-'z'çš„å­—å…¸
    int[] target = new int[26];
    //ç¬¬ä¸€æ¬¡éå†ï¼Œå°†å­—ç¬¦ç»Ÿè®¡åˆ°å­—å…¸æ•°ç»„
    for (int i = 0; i < s.length(); i++) {
        target[s.charAt(i) - 'a']++;
    }
    //ç¬¬äºŒæ¬¡éå†ï¼Œä»å­—å…¸æ•°ç»„è·å–æ¬¡æ•°
    for (int i = 0; i < s.length(); i++) {
        if (target[s.charAt(i) - 'a'] == 1) return s.charAt(i);
    }

    return ' ';
}
```

- é¢˜å¹²è¯´`s åªåŒ…å«å°å†™å­—æ¯`ï¼Œæˆ‘åšé¢˜æ—¶è®¤ä¸ºï¼Œé™¤äº†è‹±æ–‡çš„26ä¸ªå­—æ¯å¯èƒ½è¿˜æœ‰åˆ«çš„å°å†™å­—æ¯ï¼Œå°±ç”¨äº†hashMapï¼›å¦‚æœè¿™é‡Œçš„å°å†™å­—æ¯åªæŒ‡è‹±æ–‡26å­—æ¯çš„è¯ï¼Œç½‘å‹1çš„åšæ³•ç¡®å®æ›´å¿«æ›´å¥½ï¼›ä½†æ˜¯æˆ‘çœ‹å®˜æ–¹ä¹Ÿæ²¡æœ‰ä½¿ç”¨26å­—æ¯çš„ç‰¹æ€§ï¼Œä¿é™©èµ·è§ï¼Œè¿˜æ˜¯åˆ«ç”¨ç½‘å‹1çš„æ–¹æ³•ã€‚

#### å®˜æ–¹æ–¹æ³•1-hashè¡¨

æœ¬é¢˜è€ƒå¯Ÿ å“ˆå¸Œè¡¨ çš„ä½¿ç”¨ï¼Œæœ¬æ–‡ä»‹ç» å“ˆå¸Œè¡¨ å’Œ æœ‰åºå“ˆå¸Œè¡¨ ä¸¤ç§è§£æ³•ã€‚å…¶ä¸­ï¼Œåœ¨å­—ç¬¦ä¸²é•¿åº¦è¾ƒå¤§ã€é‡å¤å­—ç¬¦å¾ˆå¤šæ—¶ï¼Œâ€œæœ‰åºå“ˆå¸Œè¡¨â€ è§£æ³•ç†è®ºä¸Šæ•ˆç‡æ›´é«˜ã€‚

1. éå†å­—ç¬¦ä¸² `s` ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡ â€œå„å­—ç¬¦æ•°é‡æ˜¯å¦ > 1>1 â€ã€‚
2. å†éå†å­—ç¬¦ä¸² `s` ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°é¦–ä¸ª â€œæ•°é‡ä¸º 11 çš„å­—ç¬¦â€ï¼Œå¹¶è¿”å›ã€‚

![Picture1.png](lcof.assets/ed093aabc9195caff6d088454eaebe3cad875e8ca4a643c004ef25e4e5e9e174-Picture1.png)

ç®—æ³•æµç¨‹ï¼š

- åˆå§‹åŒ–ï¼š å­—å…¸ (Python)ã€HashMap(Java)ã€map(C++)ï¼Œè®°ä¸º dic ï¼›
- å­—ç¬¦ç»Ÿè®¡ï¼š éå†å­—ç¬¦ä¸² s ä¸­çš„æ¯ä¸ªå­—ç¬¦ c ï¼›
  - è‹¥ dic ä¸­ ä¸åŒ…å« é”®(key) c ï¼šåˆ™å‘ dic ä¸­æ·»åŠ é”®å€¼å¯¹ (c, True) ï¼Œä»£è¡¨å­—ç¬¦ c çš„æ•°é‡ä¸º 11 ï¼›
  - è‹¥ dic ä¸­ åŒ…å« é”®(key) c ï¼šåˆ™ä¿®æ”¹é”® c çš„é”®å€¼å¯¹ä¸º (c, False) ï¼Œä»£è¡¨å­—ç¬¦ c çš„æ•°é‡ > 1>1 ã€‚
- æŸ¥æ‰¾æ•°é‡ä¸º 11 çš„å­—ç¬¦ï¼š éå†å­—ç¬¦ä¸² s ä¸­çš„æ¯ä¸ªå­—ç¬¦ c ï¼›
  - è‹¥ dicä¸­é”® c å¯¹åº”çš„å€¼ä¸º True ï¼šï¼Œåˆ™è¿”å› c ã€‚
- è¿”å› ' ' ï¼Œä»£è¡¨å­—ç¬¦ä¸²æ— æ•°é‡ä¸º 11 çš„å­—ç¬¦ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š Nä¸ºå­—ç¬¦ä¸² s çš„é•¿åº¦ï¼›éœ€éå† s ä¸¤è½®ï¼Œä½¿ç”¨ O(N)ï¼›HashMap æŸ¥æ‰¾æ“ä½œçš„å¤æ‚åº¦ä¸º O(1) ï¼›
- ç©ºé—´å¤æ‚åº¦ O(1) ï¼š ç”±äºé¢˜ç›®æŒ‡å‡º s åªåŒ…å«å°å†™å­—æ¯ï¼Œå› æ­¤æœ€å¤šæœ‰ 26 ä¸ªä¸åŒå­—ç¬¦ï¼ŒHashMap å­˜å‚¨éœ€å ç”¨ O(26) = O(1)çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public char firstUniqChar(String s) {
        HashMap<Character, Boolean> dic = new HashMap<>();
        char[] sc = s.toCharArray();
        for(char c : sc)
            dic.put(c, !dic.containsKey(c));
        for(char c : sc)
            if(dic.get(c)) return c;
        return ' ';
    }
}
```

- æˆ‘ï¼šè¿™ä¸ªè§£æ³•å’Œæˆ‘çš„å¾ˆåƒï¼Œåªæ˜¯å®ƒæ²¡æœ‰å­˜å‚¨sä¸­å­—ç¬¦å‡ºç°çš„å…·ä½“æ•°ç›®ï¼Œè€Œæ˜¯å­˜å‚¨æ˜¯å¦è¶…è¿‡1ä¸ªï¼ˆå¸ƒå°”å€¼ï¼‰
  - ç½‘å‹é’ˆå¯¹æˆ‘çš„å†™æ³•çš„è¯„ä»·ï¼šæˆ‘è§‰å¾— Map ç»“æ„çš„ Value ä½¿ç”¨ Boolean ç±»å‹æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼ŒåŸå› å¦‚ä¸‹ï¼š
    1. ä¸€ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°å¤§äº 1 æ¬¡å°±ä¸ç¬¦åˆè¦æ±‚äº†ï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨ Fasle æ ‡è®°çŠ¶æ€ç›¸å¯¹äº Integer çš„ä¸æ–­é€’å¢æ›´åˆç†ï¼Œä¹Ÿæ›´çœç©ºé—´ã€‚
    2. å¸ƒå°”å€¼å¯ä»¥ç”¨æ¥åˆ¤æ–­ï¼Œå¯ä»¥ç®€åŒ–ä»£ç é€»è¾‘ã€‚

#### å®˜æ–¹æ–¹æ³•2-æœ‰åºhashè¡¨æ³•

åœ¨å“ˆå¸Œè¡¨çš„åŸºç¡€ä¸Šï¼Œæœ‰åºå“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹æ˜¯ **æŒ‰ç…§æ’å…¥é¡ºåºæ’åº** çš„ã€‚åŸºäºæ­¤ï¼Œå¯é€šè¿‡éå†æœ‰åºå“ˆå¸Œè¡¨ï¼Œå®ç°æœç´¢é¦–ä¸ª â€œæ•°é‡ä¸º 11 çš„å­—ç¬¦â€ã€‚

å“ˆå¸Œè¡¨æ˜¯ **å»é‡** çš„ï¼Œå³å“ˆå¸Œè¡¨ä¸­é”®å€¼å¯¹æ•°é‡ â‰¤ å­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚å› æ­¤ï¼Œç›¸æ¯”äºæ–¹æ³•ä¸€ï¼Œæ–¹æ³•äºŒå‡å°‘äº†ç¬¬äºŒè½®éå†çš„å¾ªç¯æ¬¡æ•°ã€‚å½“å­—ç¬¦ä¸²å¾ˆé•¿ï¼ˆé‡å¤å­—ç¬¦å¾ˆå¤šï¼‰æ—¶ï¼Œæ–¹æ³•äºŒåˆ™æ•ˆç‡æ›´é«˜ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦å‡ä¸ â€œæ–¹æ³•ä¸€â€ ç›¸åŒï¼Œè€Œå…·ä½“åˆ†æï¼šæ–¹æ³•ä¸€ éœ€éå† s ä¸¤è½®ï¼›æ–¹æ³•äºŒ éå† s ä¸€è½®ï¼Œéå† dic ä¸€è½®ï¼ˆ dic çš„é•¿åº¦ä¸å¤§äº 26 ï¼‰ã€‚

ä»£ç ï¼š

```java
class Solution {
    public char firstUniqChar(String s) {
        Map<Character, Boolean> dic = new LinkedHashMap<>();
        char[] sc = s.toCharArray();
        for(char c : sc)
            dic.put(c, !dic.containsKey(c));
        for(Map.Entry<Character, Boolean> d : dic.entrySet()){
           if(d.getValue()) return d.getKey();
        }
        return ' ';
    }
}
```

- Java ä½¿ç”¨ LinkedHashMap å®ç°æœ‰åºå“ˆå¸Œè¡¨ã€‚

- å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼š`s.toCharArray();`

- [ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Map.Entry](https://www.cnblogs.com/a198720/articles/4212034.html)



## æœç´¢ä¸å›æº¯ç®—æ³•(ç®€å•)

### [å‰‘æŒ‡ Offer 32 - I. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘](https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-lcof/)

#### é¦–æˆ˜åŠå¯„

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public int[] levelOrder(TreeNode root) {
        /*
        ä»ä¸Šå¾€ä¸‹ï¼Œä»å·¦å¾€å³ï¼Œè¿™æ˜¯bfsçš„ç‰¹ç‚¹ã€‚ä½¿ç”¨é˜Ÿåˆ—å®ç°bfsï¼šhttps://www.runoob.com/java/data-queue.html
        Queueæ¥å£è¦ç”¨linkedlistå®ç°ã€‚
         */
        //å¤„ç†ç‰¹æ®Šæƒ…å†µ
        if(root==null)return new int[0];

         //å­˜å‚¨ç»“æœ
         ArrayList<Integer> arrayList=new ArrayList<>();
         //åˆå§‹åŒ–é˜Ÿåˆ—
         Queue <TreeNode> queue=new LinkedList<>();
         queue.offer(root);

        //æŠŠå¤´èŠ‚ç‚¹åŠ å…¥ç»“æœæ•°ç»„åˆ—è¡¨ï¼Œå¹¶æŠŠå·¦å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
         while(!queue.isEmpty()){
             TreeNode temp=queue.poll();
             arrayList.add(temp.val);
            if(temp.left!=null)
                queue.offer(temp.left);
            if(temp.right!=null)
                queue.offer(temp.right);
         }

         //æŠŠintegeræ•°ç»„åˆ—è¡¨è½¬æ¢æˆintæ•°ç»„ï¼Œè¿™é‡Œåªèƒ½forå¾ªç¯ã€‚https://blog.csdn.net/huanghanqian/article/details/73920439
         int[] result=new int[arrayList.size()];
         for(int i=0;i<arrayList.size();i++){
             //arraylistä¸èƒ½æ•°ç»„å¼è®¿é—®ï¼Œè¦ç”¨getï¼Œä¸èƒ½ç”¨arraylist[i]å½¢å¼è®¿é—®
             result[i]=arrayList.get(i).intValue();
         }
         return result;

    }
}
```

- æ€è·¯æœ‰ï¼Œä½†æ˜¯queueçš„ä½¿ç”¨ï¼Œarraylistè½¬arrayéƒ½æ˜¯å€ŸåŠ©ç½‘ç»œäº†ï¼Œä¸­é—´è¿è¡Œäº†å‡ æ¬¡ã€‚

- æˆ‘æ¨æµ‹ï¼šå•ä¸ªint Integeräº’ç›¸è½¬æ¢å¯ä»¥è‡ªåŠ¨è£…ç®±æ‹†ç®±ï¼›ä½†æ˜¯int[]å’ŒInteger[]äº’ç›¸è½¬æ¢å°±ä¸èƒ½ç›´æ¥è£…ç®±æ‹†ç®±ï¼Œè€Œè¦å¯¹ä¸€ä¸ªä¸ªå…ƒç´ æ‰‹åŠ¨/è‡ªåŠ¨è£…ç®±æ‹†ç®±ï¼›
  - å¦‚æœ¬é¢˜ç›®æ‰€ç¤º`result[i]=arrayList.get(i).intValue();`æ˜¯æ‰‹åŠ¨æ‹†ç®±ï¼Œ`result[i]=arrayList.get(i);`æ˜¯è‡ªåŠ¨æ‹†ç®±ï¼Œäº²æµ‹éƒ½å¯ä»¥æäº¤æˆåŠŸã€‚

#### å®˜æ–¹-bfs

è§£é¢˜æ€è·¯ï¼š

- é¢˜ç›®è¦æ±‚çš„äºŒå‰æ ‘çš„ **ä»ä¸Šè‡³ä¸‹** æ‰“å°ï¼ˆå³æŒ‰å±‚æ‰“å°ï¼‰ï¼Œåˆç§°ä¸ºäºŒå‰æ ‘çš„ **å¹¿åº¦ä¼˜å…ˆæœç´¢**ï¼ˆBFSï¼‰ã€‚
- BFS é€šå¸¸å€ŸåŠ© **é˜Ÿåˆ—** çš„å…ˆå…¥å…ˆå‡ºç‰¹æ€§æ¥å®ç°ã€‚

![Picture0.png](lcof.assets/f824fdd8052ae4ee657365c98633480caf03c60e42e4661797618e318baf8664-Picture0.png)

ç®—æ³•æµç¨‹ï¼š

1. ç‰¹ä¾‹å¤„ç†ï¼š å½“æ ‘çš„æ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç©ºåˆ—è¡¨ [] ï¼›
2. åˆå§‹åŒ–ï¼š æ‰“å°ç»“æœåˆ—è¡¨ res = [] ï¼ŒåŒ…å«æ ¹èŠ‚ç‚¹çš„é˜Ÿåˆ— queue = [root] ï¼›
3. BFS å¾ªç¯ï¼š å½“é˜Ÿåˆ— queue ä¸ºç©ºæ—¶è·³å‡ºï¼›
   1. å‡ºé˜Ÿï¼š é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿï¼Œè®°ä¸º nodeï¼›
   2. æ‰“å°ï¼š å°† node.val æ·»åŠ è‡³åˆ—è¡¨ tmp å°¾éƒ¨ï¼›
   3. æ·»åŠ å­èŠ‚ç‚¹ï¼š è‹¥ node çš„å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™å°†å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ— queue ï¼›
4. è¿”å›å€¼ï¼š è¿”å›æ‰“å°ç»“æœåˆ—è¡¨ res å³å¯ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N)O(N) ï¼š NN ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå³ BFS éœ€å¾ªç¯ NN æ¬¡ã€‚
- ç©ºé—´å¤æ‚åº¦ O(N)O(N) ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³å½“æ ‘ä¸ºå¹³è¡¡äºŒå‰æ ‘æ—¶ï¼Œæœ€å¤šæœ‰ N/2N/2 ä¸ªæ ‘èŠ‚ç‚¹åŒæ—¶åœ¨ queue ä¸­ï¼Œä½¿ç”¨ O(N)O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public int[] levelOrder(TreeNode root) {
        if(root == null) return new int[0];
        Queue<TreeNode> queue = new LinkedList<>(){{ add(root); }};
        ArrayList<Integer> ans = new ArrayList<>();
        while(!queue.isEmpty()) {
            TreeNode node = queue.poll();
            ans.add(node.val);
            if(node.left != null) queue.add(node.left);
            if(node.right != null) queue.add(node.right);
        }
        int[] res = new int[ans.size()];
        for(int i = 0; i < ans.size(); i++)
            res[i] = ans.get(i);
        return res;
    }
}
```

- æˆ‘ï¼šå’Œæˆ‘çš„ä»£ç åŸºæœ¬ä¸€æ ·ã€‚

### [å‰‘æŒ‡ Offer 32 - II. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ II](https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-ii-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public List<List<Integer>> levelOrder(TreeNode root) {
        /*
        "I. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ ç±»ä¼¼ï¼Œå…³é”®æ˜¯æ€ä¹ˆåˆ¤æ–­ä¸€å±‚çš„èŒƒå›´
        æ‰“ç®—ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œcurå’Œnext
         */
         //å¤„ç†ç‰¹æ®Šæƒ…å†µ
         if(root==null) return new ArrayList<>();

        Queue<TreeNode> cur =new LinkedList<>();
        Queue<TreeNode> next =new LinkedList<>();
        List<List<Integer>> result=new ArrayList<>();//ArrayListåº•å±‚æ˜¯æ•°ç»„ï¼ŒæŸ¥è¯¢å¿«ã€å¢åˆ æ…¢ï¼›LinkedListåº•å±‚æ˜¯é“¾è¡¨ï¼ŒæŸ¥è¯¢æ…¢ã€å¢åˆ å¿«ã€‚

        cur.offer(root);
        do{
            //ç”¨äºå­˜å‚¨æ¥ä¸‹æ¥çš„é“¾è¡¨ä¸­çš„èŠ‚ç‚¹å€¼
            List<Integer> tempList=new ArrayList<>();
            while(!cur.isEmpty()){
            //å¤„ç†å½“å‰é˜Ÿåˆ—ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹
            TreeNode temp=cur.poll();
            tempList.add(temp.val);
            if(temp.left!=null) next.offer(temp.left);
            if(temp.right!=null) next.offer(temp.right);
            }
            //æŠŠä¸€ä¸ªé˜Ÿåˆ—å¤„ç†å®Œåå¾—åˆ°çš„åˆ—è¡¨ï¼Œå­˜å…¥ç»“æœåˆ—è¡¨
            result.add(tempList);

            //curå¤„ç†å®Œäº†ï¼Œäº¤æ¢curå’Œnextï¼›è®©curå˜æˆå­˜äº†èŠ‚ç‚¹çš„é˜Ÿåˆ—ï¼Œnextå˜æˆç©ºé˜Ÿåˆ—
            Queue<TreeNode> tempQueue=cur;
            cur=next;
            next=tempQueue;

        }while(!cur.isEmpty());//è¿™é‡Œåˆ¤æ–­å½“å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œå®é™…ä¸Šå°±æ˜¯åˆ¤æ–­ä¸Šä¸€è½®é˜Ÿåˆ—å¤„ç†åï¼Œè¿˜æœ‰æ²¡æœ‰èŠ‚ç‚¹è¦å¤„ç†

        return result;

    }
}
```

- æ€è·¯å’ŒçŸ¥è¯†ç‚¹éƒ½çŸ¥é“ï¼Œæœ‰äº›å°è¯­æ³•é”™è¯¯ï¼Œå€ŸåŠ©â€œæ‰§è¡Œä»£ç â€æ”¹äº†ä¸‹ï¼Œå°±æˆåŠŸäº†ã€‚

#### å®˜æ–¹-BFS

è§£é¢˜æ€è·¯ï¼š

> å»ºè®®å…ˆåš é¢è¯•é¢˜32 - I. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ å†åšæ­¤é¢˜ï¼Œä¸¤é¢˜ä»…æœ‰å¾®å°åŒºåˆ«ï¼Œå³æœ¬é¢˜éœ€å°† **æ¯ä¸€å±‚æ‰“å°åˆ°ä¸€è¡Œ** ã€‚

I. æŒ‰å±‚æ‰“å°ï¼š é¢˜ç›®è¦æ±‚çš„äºŒå‰æ ‘çš„ ä»ä¸Šè‡³ä¸‹ æ‰“å°ï¼ˆå³æŒ‰å±‚æ‰“å°ï¼‰ï¼Œåˆç§°ä¸ºäºŒå‰æ ‘çš„ å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ã€‚BFS é€šå¸¸å€ŸåŠ© é˜Ÿåˆ— çš„å…ˆå…¥å…ˆå‡ºç‰¹æ€§æ¥å®ç°ã€‚

II. æ¯å±‚æ‰“å°åˆ°ä¸€è¡Œï¼š å°†æœ¬å±‚å…¨éƒ¨èŠ‚ç‚¹æ‰“å°åˆ°ä¸€è¡Œï¼Œå¹¶å°†ä¸‹ä¸€å±‚å…¨éƒ¨èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå³å¯åˆ†ä¸ºå¤šè¡Œæ‰“å°ã€‚

![Picture1.png](lcof.assets/59e0600588ffdc2f34b4b563193b56c1f678743637e2754e2a9be0e7facc5d48-Picture1.png)

ç®—æ³•æµç¨‹ï¼š

1. ç‰¹ä¾‹å¤„ç†ï¼š å½“æ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›ç©ºåˆ—è¡¨ [] ï¼›
2. åˆå§‹åŒ–ï¼š æ‰“å°ç»“æœåˆ—è¡¨ res = [] ï¼ŒåŒ…å«æ ¹èŠ‚ç‚¹çš„é˜Ÿåˆ— queue = [root] ï¼›
3. BFS å¾ªç¯ï¼š å½“é˜Ÿåˆ— queue ä¸ºç©ºæ—¶è·³å‡ºï¼›
   1. æ–°å»ºä¸€ä¸ªä¸´æ—¶åˆ—è¡¨ tmp ï¼Œç”¨äºå­˜å‚¨å½“å‰å±‚æ‰“å°ç»“æœï¼›
   2. å½“å‰å±‚æ‰“å°å¾ªç¯ï¼š å¾ªç¯æ¬¡æ•°ä¸ºå½“å‰å±‚èŠ‚ç‚¹æ•°ï¼ˆå³é˜Ÿåˆ— queue é•¿åº¦ï¼‰ï¼›
      1. å‡ºé˜Ÿï¼š é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿï¼Œè®°ä¸º nodeï¼›
      2. æ‰“å°ï¼š å°† node.val æ·»åŠ è‡³ tmp å°¾éƒ¨ï¼›
      3. æ·»åŠ å­èŠ‚ç‚¹ï¼š è‹¥ node çš„å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™å°†å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ— queue ï¼›
   3. å°†å½“å‰å±‚ç»“æœ tmp æ·»åŠ å…¥ res ã€‚
4. è¿”å›å€¼ï¼š è¿”å›æ‰“å°ç»“æœåˆ—è¡¨ res å³å¯ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N) ï¼š Nä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå³ BFS éœ€å¾ªç¯ N æ¬¡ã€‚
- ç©ºé—´å¤æ‚åº¦ O(N) ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³å½“æ ‘ä¸ºå¹³è¡¡äºŒå‰æ ‘æ—¶ï¼Œæœ€å¤šæœ‰ N/2 ä¸ªæ ‘èŠ‚ç‚¹åŒæ—¶åœ¨ queue ä¸­ï¼Œä½¿ç”¨ O(N)å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public List<List<Integer>> levelOrder(TreeNode root) {
        Queue<TreeNode> queue = new LinkedList<>();
        List<List<Integer>> res = new ArrayList<>();
        if(root != null) queue.add(root);
        while(!queue.isEmpty()) {
            List<Integer> tmp = new ArrayList<>();
            for(int i = queue.size(); i > 0; i--) {
                TreeNode node = queue.poll();
                tmp.add(node.val);
                if(node.left != null) queue.add(node.left);
                if(node.right != null) queue.add(node.right);
            }
            res.add(tmp);
        }
        return res;
    }
}

```

- ç½‘å‹ï¼šè¿˜åœ¨æ€è€ƒæ€ä¹ˆåˆ†å±‚æ‰“å°ï¼Œåšä¸»è¿™ä¸ªlen(queue)çš„æ“ä½œå¤ª6äº†
  - æˆ‘ç†è§£ï¼šè¿™è¯´çš„len(queue)å°±æ˜¯i = queue.size()



### [å‰‘æŒ‡ Offer 32 - III. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ III](https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-iii-lcof/)

#### é¦–æˆ˜åŠå¯„

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public List<List<Integer>> levelOrder(TreeNode root) {
        /*
        æ€»æ˜¯ä½¿ç”¨dequeä¸ä¼šé”™ï¼Œå®ƒä¹Ÿä»£æ›¿äº†Stackï¼šhttps://blog.csdn.net/devnn/article/details/82716447
         */

         //åˆ›å»ºåŒç«¯é˜Ÿåˆ—;é»˜è®¤èŠ‚ç‚¹lastè¿›firstå‡º;æ³¨æ„ç”¨LinkedListå®ç°Dequeï¼ï¼ï¼
         Deque <TreeNode> deque=new LinkedList<>();
         Deque <TreeNode> deque2=new LinkedList<>();
         if(root!=null) deque.offerLast(root);

         List<List<Integer>> resultList=new ArrayList<>();

         //å†³å®šæ˜¯å¦ä»å·¦(first)å¾€å³ï¼ˆlastï¼‰æ‰“å°èŠ‚ç‚¹;ç¬¬ä¸€è¡Œä»å·¦å¾€å³ï¼Œæ‰€ä»¥åˆå§‹true
         boolean left2right=true;

         while(!deque.isEmpty()){
             List<Integer> tempList=new ArrayList();
             //ä¸èƒ½åœ¨forä¸­åˆ¤æ–­sizeï¼Œå› ä¸ºåŠ äº†å­èŠ‚ç‚¹sizeå°±å˜äº†
             int dequeSize=deque.size();
             for(int i=0;i<dequeSize;i++){
                 //ä»å·¦å¾€å³æ‰“å°èŠ‚ç‚¹ï¼Œå°±å…ˆæ”¾å·¦å­èŠ‚ç‚¹è¿›é˜Ÿåˆ—(é»˜è®¤éƒ½ä»å°¾éƒ¨å…¥)
                if(left2right){
                    TreeNode temp=deque.pollLast();
                    tempList.add(temp.val);
                    //!!!åƒä¸‡ä¸è¦æŠŠnullå­˜å…¥é˜Ÿåˆ—ï¼Œå®ƒä¼šå ç”¨é˜Ÿåˆ—çš„ä¸€ä¸ªä½ç½®ï¼Œä¸”null.val null.leftéƒ½ä¼šå¯¼è‡´é”™è¯¯
                    if(temp.left!=null)deque2.offerLast(temp.left);
                    if(temp.right!=null)deque2.offerLast(temp.right);

                }else{//ä»å³å¾€å·¦æ‰“å°èŠ‚ç‚¹ï¼Œå°±å…ˆæ”¾å³å­èŠ‚ç‚¹è¿›é˜Ÿåˆ—(é»˜è®¤éƒ½ä»å°¾éƒ¨å…¥)
                    TreeNode temp=deque.pollLast();
                    tempList.add(temp.val);
                    if(temp.right!=null)deque2.offerLast(temp.right);
                    if(temp.left!=null)deque2.offerLast(temp.left);

                }
             }
             //æ›´æ”¹èµ°å‘æ ‡å¿—ï¼Œæ¢ä¸€ä¸ªæ–¹å‘çš„å­èŠ‚ç‚¹å…ˆå…¥é˜Ÿåˆ—
             left2right=!left2right;
             resultList.add(tempList);

             Deque <TreeNode> tempDeque=deque;
             deque=deque2;
             deque2=tempDeque;
         }

         return resultList;
    }
}
```

- åšçš„æ—¶å€™å„ç§bugï¼Œå’Œé€»è¾‘å°é”™è¯¯ï¼Œæœ€åç”¨ideaä¸€ä¸‹ä¸‹debugå¼„å‡ºæ¥äº†
- åº”è¯¥æ˜¯ç”¨æ¥å®˜æ–¹æ–¹æ³•2ï¼Œä½†æ˜¯ç¡®å®ç»•ã€‚

#### å®˜æ–¹1-å±‚åºéå† + åŒç«¯é˜Ÿåˆ—

æ€æƒ³ï¼š

- åˆ©ç”¨åŒç«¯é˜Ÿåˆ—çš„ä¸¤ç«¯çš†å¯æ·»åŠ å…ƒç´ çš„ç‰¹æ€§ï¼Œè®¾æ‰“å°åˆ—è¡¨ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰ tmp ï¼Œå¹¶è§„å®šï¼š
  - å¥‡æ•°å±‚ åˆ™æ·»åŠ è‡³ tmp å°¾éƒ¨ ï¼Œ
  - å¶æ•°å±‚ åˆ™æ·»åŠ è‡³ tmp å¤´éƒ¨ ã€‚

ç®—æ³•æµç¨‹ï¼š

1. ç‰¹ä¾‹å¤„ç†ï¼š å½“æ ‘çš„æ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç©ºåˆ—è¡¨ [] ï¼›
2. åˆå§‹åŒ–ï¼š æ‰“å°ç»“æœç©ºåˆ—è¡¨ res ï¼ŒåŒ…å«æ ¹èŠ‚ç‚¹çš„åŒç«¯é˜Ÿåˆ— deque ï¼›
3. BFS å¾ªç¯ï¼š å½“ deque ä¸ºç©ºæ—¶è·³å‡ºï¼›
   1. æ–°å»ºåˆ—è¡¨ tmp ï¼Œç”¨äºä¸´æ—¶å­˜å‚¨å½“å‰å±‚æ‰“å°ç»“æœï¼›
   2. å½“å‰å±‚æ‰“å°å¾ªç¯ï¼š å¾ªç¯æ¬¡æ•°ä¸ºå½“å‰å±‚èŠ‚ç‚¹æ•°ï¼ˆå³ deque é•¿åº¦ï¼‰ï¼›
      1. å‡ºé˜Ÿï¼š é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿï¼Œè®°ä¸º nodeï¼›
      2. æ‰“å°ï¼š è‹¥ä¸ºå¥‡æ•°å±‚ï¼Œå°† node.val æ·»åŠ è‡³ tmp å°¾éƒ¨ï¼›å¦åˆ™ï¼Œæ·»åŠ è‡³ tmp å¤´éƒ¨ï¼›
      3. æ·»åŠ å­èŠ‚ç‚¹ï¼š è‹¥ node çš„å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™åŠ å…¥ deque ï¼›
   3. å°†å½“å‰å±‚ç»“æœ tmp è½¬åŒ–ä¸º list å¹¶æ·»åŠ å…¥ res ï¼›
4. è¿”å›å€¼ï¼š è¿”å›æ‰“å°ç»“æœåˆ—è¡¨ res å³å¯ï¼›

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N) ï¼š Nä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå³ BFS éœ€å¾ªç¯ Næ¬¡ï¼Œå ç”¨ O(N) ï¼›åŒç«¯é˜Ÿåˆ—çš„é˜Ÿé¦–å’Œé˜Ÿå°¾çš„æ·»åŠ å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(1) ã€‚
- ç©ºé—´å¤æ‚åº¦ O(N) ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³å½“æ ‘ä¸ºæ»¡äºŒå‰æ ‘æ—¶ï¼Œæœ€å¤šæœ‰ N/2 ä¸ªæ ‘èŠ‚ç‚¹ åŒæ—¶ åœ¨ deque ä¸­ï¼Œä½¿ç”¨ O(N)å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    public List<List<Integer>> levelOrder(TreeNode root) {
        Queue<TreeNode> queue = new LinkedList<>();
        List<List<Integer>> res = new ArrayList<>();
        if(root != null) queue.add(root);
        while(!queue.isEmpty()) {
            LinkedList<Integer> tmp = new LinkedList<>();
            for(int i = queue.size(); i > 0; i--) {
                TreeNode node = queue.poll();
                if(res.size() % 2 == 0) tmp.addLast(node.val); // å¶æ•°å±‚ -> é˜Ÿåˆ—å¤´éƒ¨
                else tmp.addFirst(node.val); // å¥‡æ•°å±‚ -> é˜Ÿåˆ—å°¾éƒ¨
                if(node.left != null) queue.add(node.left);
                if(node.right != null) queue.add(node.right);
            }
            res.add(tmp);
        }
        return res;
    }
}
```

- Java ä¸­å°†é“¾è¡¨ LinkedList ä½œä¸ºåŒç«¯é˜Ÿåˆ—ä½¿ç”¨ï¼ŒLinkedList å¯ä»¥ç”¨addLastå’ŒaddFirstä»é“¾çŠ¶åˆ—è¡¨çš„ä¸¤ç«¯æ’å…¥ã€‚
- æ³¨æ„ï¼šæˆ‘` for(int i = 0; i <queue.size(); i++) `ï¼Œä¼šå¯¼è‡´å¾€é˜Ÿåˆ—åŠ å…ƒç´ åé˜Ÿåˆ—é•¿åº¦å˜åŒ–ï¼Œå¯¼è‡´çš„æ— æ³•æŒ‰å±‚è¾“å‡ºã€‚ä½†æ˜¯é¢˜è§£ä¸­` for(int i = queue.size(); i > 0; i--)`çš„å†™æ³•ï¼Œå°±ä¿è¯ä¸€å±‚çº§çš„èŠ‚ç‚¹æ•°ä¸ä¼šè¢«åç»­åŠ å…¥é˜Ÿåˆ—çš„èŠ‚ç‚¹æ‰€å½±å“ã€‚

#### å®˜æ–¹2-å±‚åºéå† + åŒç«¯é˜Ÿåˆ—ï¼ˆå¥‡å¶å±‚é€»è¾‘åˆ†ç¦»ï¼‰
- æ–¹æ³•ä¸€ä»£ç ç®€çŸ­ã€å®¹æ˜“å®ç°ï¼›ä½†éœ€è¦åˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€åœ¨å±‚å¥‡å¶æ€§ï¼Œå³å†—ä½™äº† NN æ¬¡åˆ¤æ–­ã€‚
- é€šè¿‡å°†å¥‡å¶å±‚é€»è¾‘æ‹†åˆ†ï¼Œå¯ä»¥æ¶ˆé™¤å†—ä½™çš„åˆ¤æ–­ã€‚

ç®—æ³•æµç¨‹ï¼š

![image-20220329165225545](lcof.assets/image-20220329165225545.png)

- ä¸æ–¹æ³•ä¸€å¯¹æ¯”ï¼Œä»… BFS å¾ªç¯ä¸åŒã€‚

- BFS å¾ªç¯ï¼š å¾ªç¯æ‰“å°å¥‡ / å¶æ•°å±‚ï¼Œå½“ deque ä¸ºç©ºæ—¶è·³å‡ºï¼›
  1. æ‰“å°å¥‡æ•°å±‚ï¼š ä»å·¦å‘å³ æ‰“å°ï¼Œå…ˆå·¦åå³ åŠ å…¥ä¸‹å±‚èŠ‚ç‚¹ï¼›
  2. è‹¥ deque ä¸ºç©ºï¼Œè¯´æ˜å‘ä¸‹æ— å¶æ•°å±‚ï¼Œåˆ™è·³å‡ºï¼›
  3. æ‰“å°å¶æ•°å±‚ï¼š ä»å³å‘å·¦ æ‰“å°ï¼Œå…ˆå³åå·¦ åŠ å…¥ä¸‹å±‚èŠ‚ç‚¹ï¼›

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N) ï¼š åŒæ–¹æ³•ä¸€ã€‚
- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š åŒæ–¹æ³•ä¸€ã€‚

ä»£ç ï¼š

```java
class Solution {
    public List<List<Integer>> levelOrder(TreeNode root) {
        Deque<TreeNode> deque = new LinkedList<>();
        List<List<Integer>> res = new ArrayList<>();
        if(root != null) deque.add(root);
        while(!deque.isEmpty()) {
            // æ‰“å°å¥‡æ•°å±‚
            List<Integer> tmp = new ArrayList<>();
            for(int i = deque.size(); i > 0; i--) {
                // ä»å·¦å‘å³æ‰“å°
                TreeNode node = deque.removeFirst();
                tmp.add(node.val);
                // å…ˆå·¦åå³åŠ å…¥ä¸‹å±‚èŠ‚ç‚¹
                if(node.left != null) deque.addLast(node.left);
                if(node.right != null) deque.addLast(node.right);
            }
            res.add(tmp);
            if(deque.isEmpty()) break; // è‹¥ä¸ºç©ºåˆ™æå‰è·³å‡º
            // æ‰“å°å¶æ•°å±‚
            tmp = new ArrayList<>();
            for(int i = deque.size(); i > 0; i--) {
                // ä»å³å‘å·¦æ‰“å°
                TreeNode node = deque.removeLast();
                tmp.add(node.val);
                // å…ˆå³åå·¦åŠ å…¥ä¸‹å±‚èŠ‚ç‚¹
                if(node.right != null) deque.addFirst(node.right);
                if(node.left != null) deque.addFirst(node.left);
            }
            res.add(tmp);
        }
        return res;
    }
}

```

- å› ä¸ºå¥‡æ•°å±‚æ—¶ä»firstæ‹¿ï¼Œä»laståŠ ï¼›å¶æ•°å±‚æ˜¯ä»lastæ‹¿ï¼Œä»firståŠ ï¼›ä¸¤è€…åˆ†åˆ«ä»ä¸¤ç«¯æ‹¿ã€‚æ‰€ä»¥å¯ä»¥å¤„ç†å®Œå¥‡æ•°å±‚åç´§æ¥ç€å°±å¤„ç†å¶æ•°å±‚ã€‚
- æœ¬é¢˜ï¼Œå¥‡æ•°å±‚ä»åŒç«¯é˜Ÿåˆ—çš„å·¦è¾¹æ‹¿æ•°ï¼Œå¶æ•°å±‚ä»åŒç«¯é˜Ÿåˆ—çš„å³è¾¹æ‹¿æ•°ã€‚





### [å‰‘æŒ‡ Offer 26. æ ‘çš„å­ç»“æ„](https://leetcode-cn.com/problems/shu-de-zi-jie-gou-lcof/)

#### é¦–æˆ˜å¯„

- æ€è·¯æ¯”è¾ƒæ··ä¹±ï¼Œæ‹…å¿ƒè‡ªå·±çš„ç®—æ³•ä¼šé€ æˆèŠ‚ç‚¹çš„åå¤åˆ¤æ–­ï¼Œå°±æ”¾å¼ƒäº†

#### å®˜æ–¹-é€’å½’

è§£é¢˜æ€è·¯ï¼š

![image-20220329184634598](lcof.assets/image-20220329184634598.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220329184701480](lcof.assets/image-20220329184701480.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220329185817677](lcof.assets/image-20220329185817677.png)

ä»£ç ï¼š

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public boolean isSubStructure(TreeNode A, TreeNode B) {
        //å¦‚æœå·¦å³èŠ‚ç‚¹æœ‰ç©ºçš„ï¼Œåˆ™è¯´æ˜ä¼ äº†ç©ºæ ‘è¿›æ¥ï¼ŒæŒ‰ç…§é¢˜ç›®è¯´æ˜ï¼Œç©ºæ ‘ä¸å‚ä¸å­—æ•°åˆ¤æ–­ï¼Œç›´æ¥è¿”å›falseã€‚
        if (A == null||B == null ) {
            return false;
        }

        //å·¦å³èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹ç›¸ç­‰ï¼Œå°±ç»§ç»­åˆ¤æ–­å½“å‰ä¸¤ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘æ˜¯å¦è¿˜ç¬¦åˆå­ç»“æ„
        if (A.val == B.val && (helper(A.left, B.left) && helper(A.right, B.right))) {
            return true;
        }

        //å¦‚æœä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘ä¸ç¬¦åˆï¼Œå°±åˆ¤æ–­Açš„å·¦å­æ ‘æ˜¯å¦åŒ…å«Bï¼Œæˆ–Açš„å³å­æ ‘æ˜¯å¦åŒ…å«B
        return isSubStructure(A.left, B) || isSubStructure(A.right, B);
    }

    private boolean helper(TreeNode root1, TreeNode root2) {
        //å¿…é¡»è¦å…ˆåˆ¤æ–­root2ï¼Œå†åˆ¤æ–­root1ï¼›è¿™æ ·å¦‚é¢˜å¹²ä¸­Bæ ‘çš„4å·èŠ‚ç‚¹çš„å³å­æ ‘ä¸ºç©ºï¼Œä½†æ˜¯Aæ ‘çš„4å·èŠ‚ç‚¹çš„å³å­æ ‘ä¸ä¸ºç©ºï¼Œå…ˆåˆ¤æ–­Bæ ‘ä¸ºç©ºæ‰èƒ½è¿”å›trueã€‚
        if (root2 == null) {
            return true;
        }
        if (root1 == null) {
            return false;
        }
        //å¦‚æœæ ‘çš„è·¯å¾„ä¸Šçš„èŠ‚ç‚¹ç›¸åŒï¼Œç»§ç»­å¾€ä¸‹åˆ¤æ–­
        if (root1.val == root2.val) {
            return helper(root1.left, root2.left) && helper(root1.right, root2.right);
        } else {
            return false;
        }
    }
}
```

- helperä¸“é—¨ç”¨æ¥åˆ¤æ–­å·¦å³å­æ ‘ã€‚



### [å‰‘æŒ‡ Offer 27. äºŒå‰æ ‘çš„é•œåƒ](https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public TreeNode mirrorTree(TreeNode root) {
        /*
        äº¤æ¢æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹ï¼Œå³å¾—åˆ°é•œåƒ
         */
         
         //å¦‚æœåŸæ ‘ä¸ºç©ºï¼Œè¿”å›null
         if(root==null)return null;
        //å¦‚æœåŸæ ‘ä¸ä¸ºç©ºï¼Œåˆ›é€ æ–°æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶é€’å½’æ„å»ºæ–°æ ‘çš„å·¦å³å­èŠ‚ç‚¹ã€‚
         TreeNode result=new TreeNode(root.val);
         result.left=recur(root.right);
         result.right=recur(root.left);

        //è¿”å›æ–°æ ‘
         return result;
    }
    public TreeNode recur(TreeNode root){
        if(root==null) return null;
        
        //è®¾ç½®å¥½å½“å‰èŠ‚ç‚¹å’Œå·¦å³å­èŠ‚ç‚¹
        TreeNode curNode=new TreeNode(root.val);
        curNode.left=recur(root.right);
        curNode.right=recur(root.left);

        //æŠŠå½“å‰èŠ‚ç‚¹è¿”å›ç»™ä¸Šä¸€å±‚é€’å½’
        return curNode;
    }
}
```

#### å®˜æ–¹-é€’å½’

æ€è·¯ä¸ç®—æ³•:

- è¿™æ˜¯ä¸€é“å¾ˆç»å…¸çš„äºŒå‰æ ‘é—®é¢˜ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé€’å½’åœ°å¯¹æ ‘è¿›è¡Œéå†ï¼Œå¹¶ä»å¶å­èŠ‚ç‚¹å…ˆå¼€å§‹ç¿»è½¬å¾—åˆ°é•œåƒã€‚å¦‚æœå½“å‰éå†åˆ°çš„èŠ‚ç‚¹root çš„å·¦å³ä¸¤æ£µå­æ ‘éƒ½å·²ç»ç¿»è½¬å¾—åˆ°é•œåƒï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦äº¤æ¢ä¸¤æ£µå­æ ‘çš„ä½ç½®ï¼Œå³å¯å¾—åˆ°ä»¥root ä¸ºæ ¹èŠ‚ç‚¹çš„æ•´æ£µå­æ ‘çš„é•œåƒã€‚

ä»£ç ï¼š

```java
class Solution {
    public TreeNode mirrorTree(TreeNode root) {
        if (root == null) {
            return null;
        }
        TreeNode left = mirrorTree(root.left);
        TreeNode right = mirrorTree(root.right);
        root.left = right;
        root.right = left;
        return root;
    }
}
```

- å®˜æ–¹æ€è·¯å’Œæˆ‘ä¸€æ ·ï¼Œä¸è¿‡æˆ‘è‡ªå»ºäº†ä¸€ä¸ªrecurå‡½æ•°ï¼Œè®©recurä¸“é—¨è´Ÿè´£å­èŠ‚ç‚¹çš„å¤„ç†ï¼Œè®©é€»è¾‘æ›´æ¸…æ™°ã€‚

å¤æ‚åº¦åˆ†æ:

- æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N  ä¸ºäºŒå‰æ ‘èŠ‚ç‚¹çš„æ•°ç›®ã€‚æˆ‘ä»¬ä¼šéå†äºŒå‰æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨å¸¸æ•°æ—¶é—´å†…äº¤æ¢å…¶ä¸¤æ£µå­æ ‘ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼šO(N) ã€‚ä½¿ç”¨çš„ç©ºé—´ç”±é€’å½’æ ˆçš„æ·±åº¦å†³å®šï¼Œå®ƒç­‰äºå½“å‰èŠ‚ç‚¹åœ¨äºŒå‰æ ‘ä¸­çš„é«˜åº¦ã€‚åœ¨å¹³å‡æƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘çš„é«˜åº¦ä¸èŠ‚ç‚¹ä¸ªæ•°ä¸ºå¯¹æ•°å…³ç³»ï¼Œå³ O(logN)ã€‚è€Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ ‘å½¢æˆé“¾çŠ¶ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(N)ã€‚

### [å‰‘æŒ‡ Offer 28. å¯¹ç§°çš„äºŒå‰æ ‘](https://leetcode-cn.com/problems/dui-cheng-de-er-cha-shu-lcof/)

#### é¦–æˆ˜å¯„

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public boolean isSymmetric(TreeNode root) {
        /*
        dequeå’Œqueueç”¨linkedlistå®ç°æ˜¯å¯ä»¥å­˜å‚¨nullçš„ï¼ˆå®˜æ–¹ä¸å»ºè®®ï¼‰ï¼Œè¿™æ ·å¯ä»¥ç”¨bfsæ„å»ºé˜Ÿåˆ—ï¼Œä»ä¸¤ç«¯æ‹¿èŠ‚ç‚¹ï¼Œåªè¦ä¸åŒå°±è¿”å›false
         */
        if(root==null)return true;

        Deque<Integer> deque=new LinkedList<>();
        deque.addLast(root.val);
        while(!deque.isEmpty()){
            
            for
        }

    }
}
```

- æ²¡æœ‰å¥½æ–¹æ³•ï¼Œæœ¬æ¥æƒ³ç€ç”¨dequeä»ä¸¤ç«¯å¾€ä¸­é—´æ‹¿æ•°æ¥åˆ¤æ–­å¯¹ç§°ï¼Œä½†æ˜¯åŒæ—¶ä»ä¸¤ç«¯åŒæ—¶æ‹¿æ•°çš„è¯åˆæ— æ³•æ­£å¸¸å½¢æˆä¸‹ä¸€å±‚é˜Ÿåˆ—ã€‚

#### å®˜æ–¹-é€’å½’

è§£é¢˜æ€è·¯ï¼š

![image-20220330162905068](lcof.assets/image-20220330162905068.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220330162925469](lcof.assets/image-20220330162925469.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220330162944480](lcof.assets/image-20220330162944480.png)

<img src="https://pic.leetcode-cn.com/88916808515487aac3ca24f9c55cbbdf6514f012eea04ec46cc2cc26acf9c4eb-Picture12.png" alt="Picture12.png" style="zoom:25%;" />

ä»£ç ï¼š

ç»†èŠ‚ç‰ˆï¼š

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public boolean isSymmetric(TreeNode root) {
        if (root == null) return true;
        return check(root.left, root.right); // æ£€æŸ¥rootçš„å·¦å³å­æ ‘
    }

    private boolean check(TreeNode a, TreeNode b) { 
        if (a == null && b == null) return true; // éƒ½ä¸ºç©º, å¯¹ç§°
        if (a != null && b == null) return false;
        if (a == null && b != null) return false; // åªæœ‰ä¸€è¾¹ä¸ºç©º, ä¸å¯¹ç§°
        if (a.val != b.val) return false; // éƒ½ä¸ä¸ºç©º, ä½†å€¼ä¸ç›¸ç­‰

        boolean outside = check(a.left, b.right); // æ¯”è¾ƒa, bä¸¤æ£µæ ‘çš„å¤–ä¾§
        boolean inside = check(a.right, b.left); // æ¯”è¾ƒa, bä¸¤é¢—æ ‘çš„å†…æµ‹
        return outside && inside; // a, bå†…å¤–ä¾§éƒ½ç›¸ç­‰æ‰å¯¹ç§°
    }
}

```

ç®€å†™ç‰ˆï¼š

```java
class Solution {
    public boolean isSymmetric(TreeNode root) {
        return root == null ? true : recur(root.left, root.right);
    }
    boolean recur(TreeNode L, TreeNode R) {
        if(L == null && R == null) return true;
        if(L == null || R == null || L.val != R.val) return false;
        return recur(L.left, R.right) && recur(L.right, R.left);
    }
}

```

#### å³æ—¶å†æˆ˜æˆåŠŸ

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public boolean isSymmetric(TreeNode root) {
        /*å¯¹ç§°æ¯”è¾ƒï¼ŒæŠ“ä½æ ‘çš„å¤–ä¾§å’Œå†…ä¾§ */
        if(root==null)return true;

        //åŸæ ‘æ ¹èŠ‚ç‚¹ä¸ä¸ºç©ºçš„è¯ï¼Œæ¯”è¾ƒå·¦å³å­æ ‘æ˜¯å¦å¯¹ç§°
        return recur(root.left,root.right);
    }
    public boolean recur(TreeNode leftTree,TreeNode rightTree){
        //å¦‚æœä¼ å…¥çš„ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºnullï¼Œè¯´æ˜éå†åˆ°æœ¬è·¯åŠ²çš„æœ«å°¾éƒ½æ²¡falseï¼Œè¿”å›ä»£è¡¨æœ¬è·¯åŠ²çš„true
        if(leftTree==null&&rightTree==null) return true;
        //å¦‚æœä¼ å…¥çš„ä¸¤ä¸ªæ ‘æ ¹èŠ‚ç‚¹çš„å€¼ä¸ç›¸åŒï¼Œæˆ–å·¦å³æ ¹èŠ‚ç‚¹æœ‰ä¸€ä¸ªä¸ºç©ºå¦ä¸€ä¸ªä¸æ˜¯ï¼Œåˆ™è¯´æ˜ä¼ å…¥çš„ä¸¤ä¸ªæ ‘ä¸å¯¹ç§°ï¼›æ³¨æ„åˆ¤æ–­nullåœ¨å–valä¹‹å‰åšï¼Œå¦åˆ™å¯èƒ½ç©ºæŒ‡é’ˆå¼‚å¸¸,è¿™å°±è¦åˆ©ç”¨||çš„â€œå¾—åˆ°trueå°±åœæ­¢åˆ¤æ–­çš„ç‰¹æ€§â€
        if((leftTree==null&&rightTree!=null)||(leftTree!=null&&rightTree==null)||(leftTree.val!=rightTree.val))return false;

        //å¦‚æœä¸Šé¢æƒ…å†µéƒ½æ²¡å‘ç”Ÿï¼Œè¯´æ˜ä¼ å…¥çš„ä¸¤ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹ç›¸åŒï¼Œé€’å½’åˆ¤æ–­è¿™é“¾å„ä¸ªæ ‘æ˜¯å¦ä¸ºå¯¹ç§°çš„ã€‚
        return recur(leftTree.left,rightTree.right)&&recur(leftTree.right,rightTree.left);
    }

}
```

## åŠ¨æ€è§„åˆ’(ç®€å•)

### [å‰‘æŒ‡ Offer 10- I. æ–æ³¢é‚£å¥‘æ•°åˆ—](https://leetcode-cn.com/problems/fei-bo-na-qi-shu-lie-lcof/)

#### é¦–æˆ˜å¯„

å…ˆå°è¯•ç›´æ¥é€’å½’ï¼Œn==43æ—¶ä¼šè¶…æ—¶ï¼Œå› ä¸ºæ‰§è¡Œæ¯ä¸€ä¸ªfibéƒ½ä¼šä¸€ç›´é€’å½’åˆ°0æˆ–1ï¼Œä½†æ˜¯æ¯”å¦‚`return (fib(n-1)+fib(n-2))%1000000007;`è®¡ç®—äº†å·¦è¾¹çš„fib(49)åï¼Œè®¡ç®—å³è¾¹çš„fib(48)æ—¶è¿˜é€’å½’åˆ°åº•ï¼Œæ‰€ä»¥æœ€å¥½æŠŠè®¡ç®—è¿‡çš„ç»“æœä¿å­˜ï¼ä¿å­˜è®¡ç®—ç»“æœåº”è¯¥æ˜¯åŠ¨æ€è§„åˆ’åŒºåˆ«äºé€’å½’çš„ä¸€ä¸ªç‰¹å¾ã€‚

```java
class Solution {
    public int fib(int n) {
        //è®¾å®šè¿”å›æ¡ä»¶
        if(n==0) {
            return 0;
        }else if(n==1) {
            return 1;
        }

        return (fib(n-1)+fib(n-2))%1000000007;
    }
}
```

- ä½†æ˜¯æƒ³ä¸èµ·æ¥æ€ä¹ˆä¿å­˜ç»“æœäº†

#### å®˜æ–¹-åŠ¨æ€è§„åˆ’

è§£é¢˜æ€è·¯ï¼š

![image-20220330174419199](lcof.assets/image-20220330174419199.png)

![image-20220330174432153](lcof.assets/image-20220330174432153.png)

åŠ¨æ€è§„åˆ’è§£æï¼š

![image-20220330174451619](lcof.assets/image-20220330174451619.png)

ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–ï¼š

![image-20220330174517988](lcof.assets/image-20220330174517988.png)

å¾ªç¯æ±‚ä½™æ³• å¤„ç†å¤§æ•°ï¼š

![image-20220330174550027](lcof.assets/image-20220330174550027.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220330174615495](lcof.assets/image-20220330174615495.png)

ä»£ç ï¼š

```java
class Solution {
    public int fib(int n) {
        int a = 0, b = 1, sum;
        for(int i = 0; i < n; i++){
            sum = (a + b) % 1000000007;
            a = b;
            b = sum;
        }
        return a;
    }
}
```

#### å³æ—¶å†æˆ˜åŠå¯„

```java
class Solution {
    public int fib(int n) {
        /*
        åŠ¨æ€è§„åˆ’ï¼Œå½“å‰å€¼åªä¸å‰ä¸¤ä¸ªå€¼æœ‰å…³ï¼›è®©å€¼ä»å°å¾€å¤§åŠ å³å¯
         */

        //å…ˆè¿”å›ç‰¹æ®Šå€¼ï¼›è¿™æ ·ä¸‹é¢çš„forå¾ªç¯æ‰èƒ½å®‰å…¨åœ°åªæ¥æ”¶n>=2çš„æƒ…å†µ
        if(n==0||n==1)return n;

        int pre2=0,pre1=1;

        //å¾ªç¯å½“å‰çš„iä¸ºè°ï¼Œæ‰§è¡Œå®Œå½“å‰å¾ªç¯ï¼Œå¾—åˆ°çš„sumå³ä¸ºfib(i)
        for(int i=2;i<=n;i++){

            int tempSum=(pre2%1000000007+pre1%1000000007)%1000000007;
            pre2=pre1;
            pre1=tempSum;
        }

        //æœ€åä¸€æ¬¡å¾ªç¯å¾—åˆ°çš„sumå³ä¸ºfib(n)ï¼Œè¿™ä¸ªsumè¢«å¤åˆ¶ç»™pre1äº†
        return pre1;

    }
}
```

- ç¬¬ä¸€æ¬¡æäº¤çš„æ—¶å€™ï¼Œå¿½ç•¥äº†å¤„ç†n==1å’Œ0çš„æƒ…å†µï¼›forå¾ªç¯æ— æ³•å¤„ç†n<2çš„æƒ…å†µï¼Œæ‰€ä»¥è¦åšé¢å¯¹n==1å’Œ0çš„æƒ…å†µæ—¶çš„ç‰¹æ®Šå¤„ç†ã€‚å¦‚ä¸Šå¤„ç†åå°±æäº¤æˆåŠŸäº†ã€‚



### [å‰‘æŒ‡ Offer 10- II. é’è›™è·³å°é˜¶é—®é¢˜](https://leetcode-cn.com/problems/qing-wa-tiao-tai-jie-wen-ti-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public int numWays(int n) {
        /*
        è·³ä¸Šå°é˜¶çš„è·³æ³•ï¼Œè‡³åªä¸å‰ä¸¤æ­¥æœ‰å…³ç³»:è·³åˆ°å½“å‰å°é˜¶çš„æ–¹æ³•æ•°==è·³åˆ°prev1ï¼ˆå‰ä¸€ä¸ªå°é˜¶ï¼‰çš„æ–¹æ³•æ•°+è·³åˆ°prev2çš„æ–¹æ³•æ•°ã€‚
        å› ä¸ºè·³åˆ°å½“å‰å°é˜¶åªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»prev1è·³1ä¸ªå°é˜¶ä¸Šæ¥ï¼Œæˆ–ä»prev2ä¸€è·ƒè·³ä¸¤ä¸ªå°é˜¶ä¸Šæ¥
         */

         if(n==0||n==1)return 1;
         if(n==2)return 2;

        //ä»ç¬¬ä¸‰çº§å°é˜¶å¼€å§‹åŠ¨æ€è§„åˆ’
         int prev1=2,prev2=1;
         //å½“å‰å¾ªç¯ä¸ºiï¼Œåˆ™æ‰§è¡Œå®Œå½“å‰å¾ªç¯æ—¶çš„sumä¸ºè·³åˆ°ç¬¬içº§å°é˜¶çš„è·³æ³•æ•°
         for(int i=3;i<=n;i++){
             int tempSum=(prev1%1000000007+prev2%1000000007)%1000000007;
             prev2=prev1;
             prev1=tempSum;
         }

         return prev1;

    }
}
```

#### å®˜æ–¹-åŠ¨æ€è§„åˆ’

è§£é¢˜æ€è·¯ï¼š

![image-20220330180140749](lcof.assets/image-20220330180140749.png)

- æœ¬é¢˜å’Œæ–æ³¢é‚£å¥‘æ•°åˆ—é—®é¢˜åŸºæœ¬ä¸€æ¨¡ä¸€æ ·ã€‚
- æ³¨æ„å¤§ä½¬è¯„è¯­ï¼šæ­¤ç±»æ±‚ ***å¤šå°‘ç§å¯èƒ½æ€§*** çš„é¢˜ç›®ä¸€èˆ¬éƒ½æœ‰ **é€’æ¨æ€§è´¨** ï¼Œå³ f(n)*f*(*n*) å’Œ f(n-1)*f*(*n*âˆ’1)â€¦f(1)*f*(1) ä¹‹é—´æ˜¯æœ‰è”ç³»çš„ã€‚

å¤æ‚åº¦åˆ†æï¼š

![image-20220330180256791](lcof.assets/image-20220330180256791.png)

ä»£ç ï¼š

```java
class Solution {
    public int numWays(int n) {
        int a = 1, b = 1, sum;
        for(int i = 0; i < n; i++){
            sum = (a + b) % 1000000007;
            a = b;
            b = sum;
        }
        return a;
    }
}
```



### [å‰‘æŒ‡ Offer 63. è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦](https://leetcode-cn.com/problems/gu-piao-de-zui-da-li-run-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public int maxProfit(int[] prices) {
        /*è®°å½•å†å²æœ€å¤§åˆ©æ¶¦ï¼Œå’Œæœ€ä½ä»·æ ¼çš„è‚¡ç¥¨ */
        
        //å¤„ç†ç‰¹æ®Šæƒ…å†µ
        if(prices.length==0)return 0;
        
        int lowP=prices[0];
        int benefit=0;
        for(int i=0;i<prices.length;i++){
            //æ—¶åˆ»æ›´æ–°æœ€å¤§æ”¶ç›Š
            if((prices[i]-lowP)>benefit){
                benefit=prices[i]-lowP;
            }
            //åªè¦ç¢°è§æ›´å°çš„priceå°±ä¿å­˜ï¼Œå› ä¸ºæœªæ¥ç¢°è§ç›¸åŒçš„é«˜å€¼æ—¶ï¼Œè®°å½•ä¸‹æ›´å°çš„lowPå¯ä»¥å¸¦æ¥æ›´å¤§çš„æ”¶å…¥ã€‚
            if(prices[i]<lowP){
                lowP=prices[i];
            }
        }
        
        return benefit;

    }
}
```

#### å®˜æ–¹-åŠ¨æ€è§„åˆ’

è§£é¢˜æ€è·¯ï¼š

![image-20220330192323464](lcof.assets/image-20220330192323464.png)

åŠ¨æ€è§„åˆ’è§£æï¼š

![image-20220330192357464](lcof.assets/image-20220330192357464.png)

æ•ˆç‡ä¼˜åŒ–ï¼š

![image-20220330192427858](lcof.assets/image-20220330192427858.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220330192446488](lcof.assets/image-20220330192446488.png)

ä»£ç ï¼š

```java
class Solution {
    public int maxProfit(int[] prices) {
        int cost = Integer.MAX_VALUE, profit = 0;
        for(int price : prices) {
            cost = Math.min(cost, price);
            profit =Math.min(profit, price - cost);
        }
        return profit;
    }
}
```

- æ³¨æ„è¿™é‡Œjavaå·¥å…·ç±»æ–¹æ³•`Math.min`å’Œ`Math.min`çš„ç”¨æ³•ã€‚



## åŠ¨æ€è§„åˆ’(ä¸­ç­‰)

### [å‰‘æŒ‡ Offer 42. è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ](https://leetcode-cn.com/problems/lian-xu-zi-shu-zu-de-zui-da-he-lcof/)

#### é¦–æˆ˜å¯„

#### å®˜æ–¹-åŠ¨æ€è§„åˆ’

è§£é¢˜æ€è·¯ï¼š

![image-20220331195848158](lcof.assets/image-20220331195848158.png)

åŠ¨æ€è§„åˆ’è§£æï¼š

![image-20220331195938823](lcof.assets/image-20220331195938823.png)

ç©ºé—´å¤æ‚åº¦é™ä½ï¼š

![image-20220331200048428](lcof.assets/image-20220331200048428.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220331200117017](lcof.assets/image-20220331200117017.png)

ä»£ç ï¼š

```java
class Solution {
    public int maxSubArray(int[] nums) {
        int res = nums[0];
        for(int i = 1; i < nums.length; i++) {
            nums[i] += Math.max(nums[i - 1], 0);
            res = Math.max(res, nums[i]);
        }
        return res;
    }
}
```

ç½‘å‹è¡¥å……ï¼šæ„Ÿè°¢åˆ†äº«ï¼Œæ€è·¯å¾ˆæ¸…æ™°ï¼Œåªæ˜¯æœ‰ä¸€ç‚¹å»ºè®®ã€‚ å› ä¸ºæœ‰çš„æ—¶å€™ï¼Œé¢˜ç›®è¦æ±‚å¯èƒ½ä¸èƒ½ä¿®æ”¹åŸæœ‰æ•°ç»„ï¼Œè€ƒè™‘åˆ°åœ¨dpåˆ—è¡¨ä¸­ï¼Œdp[i]åªå’Œdp[i-1]æœ‰å…³,æ‰€ä»¥ç”¨ä¸¤ä¸ªå‚æ•°å­˜å‚¨å¾ªç¯è¿‡ç¨‹ä¸­çš„dp[i]å’Œdp[i-1]çš„å€¼å³å¯ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿä¸ºO(1)ã€‚ ä»£ç å¦‚ä¸‹ï¼š

```java
class Solution {
    public int maxSubArray(int[] nums) {
        int max = nums[0];
        int former = 0;//ç”¨äºè®°å½•dp[i-1]çš„å€¼ï¼Œå¯¹äºdp[0]è€Œè¨€ï¼Œå…¶å‰é¢çš„dp[-1]=0
        int cur = nums[0];//ç”¨äºè®°å½•dp[i]çš„å€¼
        for(int num:nums){
            cur = num;
            if(former>0) cur +=former;
            if(cur>max) max = cur;
            former=cur;
        }
        return max;
    }
}
```



#### å³æ—¶å†æˆ˜æˆåŠŸ

```java
class Solution {
    public int maxSubArray(int[] nums) {
        /* 
        dpiè¡¨ç¤ºå·²iå·å…ƒç´ ç»“å°¾çš„æœ€å¤§å­æ•°ç»„ï¼Œé‚£ä¹ˆdpi=Max(dp[i-1]+numsi,numsi),æ‰€ä»¥dp[i-1]<0çš„è¯åªèƒ½æ‹–åè…¿å°±æˆªæ‰
        å› ä¸ºæœ€é•¿å­æ•°ç»„æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥è¦ä»¥iä¸ºç»“å°¾çš„æ•°ç»„åšdpæ•°ç»„
        */
        //å¤„ç†ç‰¹æ®Šæƒ…å†µ
        if(nums.length==0)return 0;
        if(nums.length==1)return nums[0];

        //ä»æ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹å°±dpi
        int curMaxSum=nums[0],historyMaxSum=curMaxSum;
        for(int i=1;i<nums.length;i++){
            if(curMaxSum<0){
                curMaxSum=nums[i];
            }else{
                curMaxSum+=nums[i];
            }

            //åˆ¤æ–­å½“å‰çš„æœ€å¤§å€¼æ˜¯å¦æ¯”ä¹‹å‰æ‰€æœ‰è®°è½½è¿‡çš„æœ€å¤§å€¼éƒ½å¤§ï¼Œéƒ½å¤§çš„è¯æ›´æ–°å†å²æœ€å¤§å€¼
            if(curMaxSum>historyMaxSum){
                historyMaxSum=curMaxSum;
            }
        }

        return historyMaxSum;

    }
}
```



### [å‰‘æŒ‡ Offer 47. ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼](https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public int maxValue(int[][] grid) {
        /*
        è¦†å†™äºŒç»´æ•°ç»„ï¼Œåœ¨ç›¸åº”ä½ç½®å†™ä¸Šâ€œä»¥å·¦ä¸Šè§’å‡ºå‘åˆ°å½“å‰ä½ç½®èƒ½æ‹¿åˆ°çš„æœ€å¤§ç¤¼ç‰©â€ï¼Œè¿™ä¸ªç¤¼ç‰©å€¼åªä¸ä¸Šä¸€èŠ‚ç‚¹å’Œå·¦ä¸€èŠ‚ç‚¹æœ‰å…³ã€‚

        ä¸ºäº†ç©ºé—´å¤æ‚åº¦ï¼Œç›´æ¥åœ¨äºŒç»´æ•°ç»„ä¸Šè®°å½•
         */
         //å¤„ç†ç‰¹æ®Šæƒ…å†µ;æ³¨æ„è¦å…ˆåˆ¤æ–­è¡Œä¸ä¸º0ï¼Œå¦åˆ™å…ˆåˆ¤æ–­åˆ—ä¸ä¸º0çš„è¯å¯èƒ½å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸
         if(grid.length==0||grid[0].length==0)return 0;

         //å…ˆå¤„ç†äºŒç»´æ•°ç»„çš„è¡Œ
         for(int i=0;i<grid.length;i++){
             //å†åœ¨äºŒç»´æ•°ç»„çš„æŸä¸ªè¡Œä¸­ä¾æ¬¡å¤„ç†å„ä¸ªåˆ—å…ƒç´ 
             for(int j=0;j<grid[0].length;j++){
                 //è·å¾—æ•°ç»„å½“å‰å…ƒç´ ï¼Œä»å·¦orä»ä¸Šæ¥ï¼Œå“ªä¸ªæ‹¿æ›´å¤šç¤¼ç‰©
                 int tempLeft=0,tempUp=0;
                if(i>0){//å¦‚æœiå¤§äº0ï¼Œè¯´æ˜ä¸åœ¨ç¬¬ä¸€è¡Œï¼Œé‚£ä¹ˆå¯ä»¥è·å¾—grid[i-1][j]ä½ç½®å­˜æ”¾çš„æœ€å¤§ç¤¼ç‰©
                    tempUp=grid[i-1][j];
                }
                if(j>0){//å¦‚æœjå¤§äº0ï¼Œè¯´æ˜ä¸åœ¨ç¬¬ä¸€åˆ—ï¼Œé‚£ä¹ˆå¯ä»¥è·å¾—grid[i][j-1]ä½ç½®å­˜æ”¾çš„æœ€å¤§ç¤¼ç‰©
                    tempLeft=grid[i][j-1];
                }

                //æŠŠgrid[i][j]è¦†ç›–å†™ä¸ºèµ°å½“å½“å‰ä½ç½®èƒ½æ‹¿åˆ°å¾—æœ€å¤šç¤¼ç‰©ã€‚
                grid[i][j]=Math.max(tempLeft,tempUp)+grid[i][j];
             }

         }

         return grid[grid.length-1][grid[0].length-1];

    }
}
```

- çœ‹äº†å®˜æ–¹è§£æï¼Œæˆ‘å¾—è§£æ³•å°±æ˜¯å®˜æ–¹çš„å¾…ä¼˜åŒ–ç‰ˆï¼Œå¯ä»¥å…ˆåˆå§‹åŒ–â€œç¬¬ä¸€è¡Œ ç¬¬ä¸€åˆ—â€ï¼Œè¿™æ ·å°±é¿å…æ¯æ¬¡åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯ä¸æ˜¯åœ¨äºŒç»´æ•°ç»„çš„è¾¹ç¼˜ã€‚

#### å®˜æ–¹-åŠ¨æ€è§„åˆ’

è§£é¢˜æ€è·¯ï¼š

![image-20220401152228155](lcof.assets/image-20220401152228155.png)

åŠ¨æ€è§„åˆ’è§£æï¼š

![image-20220401152255940](lcof.assets/image-20220401152255940.png)

ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–ï¼š

![image-20220401152320811](lcof.assets/image-20220401152320811.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220401152346735](lcof.assets/image-20220401152346735.png)

ä»£ç ï¼š

```java
class Solution {
    public int maxValue(int[][] grid) {
        int m = grid.length, n = grid[0].length;
        for(int i = 0; i < m; i++) {
            for(int j = 0; j < n; j++) {
                if(i == 0 && j == 0) continue;
                if(i == 0) grid[i][j] += grid[i][j - 1] ;
                else if(j == 0) grid[i][j] += grid[i - 1][j];
                else grid[i][j] += Math.max(grid[i][j - 1], grid[i - 1][j]);
            }
        }
        return grid[m - 1][n - 1];
    }
}
```

ä»¥ä¸Šä»£ç é€»è¾‘æ¸…æ™°ï¼Œå’Œè½¬ç§»æ–¹ç¨‹ç›´æ¥å¯¹åº”ï¼Œä½†ä»å¯æå‡æ•ˆç‡ï¼šå½“ gridgrid çŸ©é˜µå¾ˆå¤§æ—¶ï¼Œ i = 0i=0 æˆ– j = 0j=0 çš„æƒ…å†µä»…å æå°‘æ•°ï¼Œç›¸å½“å¾ªç¯æ¯è½®éƒ½å†—ä½™äº†ä¸€æ¬¡åˆ¤æ–­ã€‚å› æ­¤ï¼Œå¯å…ˆåˆå§‹åŒ–çŸ©é˜µç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ï¼Œå†å¼€å§‹éå†é€’æ¨:

```java
class Solution {
    public int maxValue(int[][] grid) {
        int m = grid.length, n = grid[0].length;
        for(int j = 1; j < n; j++) // åˆå§‹åŒ–ç¬¬ä¸€è¡Œ
            grid[0][j] += grid[0][j - 1];
        for(int i = 1; i < m; i++) // åˆå§‹åŒ–ç¬¬ä¸€åˆ—
            grid[i][0] += grid[i - 1][0];
        for(int i = 1; i < m; i++)
            for(int j = 1; j < n; j++) 
                grid[i][j] += Math.max(grid[i][j - 1], grid[i - 1][j]);
        return grid[m - 1][n - 1];
    }
}

```



### [å‰‘æŒ‡ Offer 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²](https://leetcode-cn.com/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/)

#### é¦–æˆ˜å¯„

#### å¤§ä½¬-é€‚åˆæ–°æ‰‹ç†è§£

æ€è·¯ï¼š

æ­¤é¢˜æ€»ç»“è§„å¾‹å’Œé’è›™è·³å°é˜¶æœ‰ç‚¹ç›¸ä¼¼ï¼ˆæ²¡åˆ·åˆ°çš„å¯ä»¥å…ˆåˆ·é’è›™è·³å°é˜¶ï¼‰ï¼Œé’è›™è·³å°é˜¶æ˜¯åªèƒ½è·³ä¸€æ­¥æˆ–è€…ä¸¤æ­¥ï¼Œæ‰€ä»¥æœ€ååªæœ‰ä¸¤ç§æƒ…å†µï¼š


    1. è·³åˆ°n-1é˜¶ï¼Œç„¶åå†è·³1
    2. è·³åˆ°n-2é˜¶,ç„¶åå†è·³2
    æ‰€ä»¥f(n) = f(n-1)+f(n-2)
æ­¤é¢˜å…³æ³¨çš„æ˜¯æœ€å¤§èƒ½ç¿»è¯‘çš„æ•°å­—ä¸º25ï¼Œè¯´æ˜æƒ…å†µä¸ºè¦ä¸ä¸€æ¬¡æ€§ç¿»è¯‘ä¸€ä¸ªæ•°å­—ï¼Œè¦ä¸ä¸€æ¬¡æ€§ç¿»è¯‘ä¸¤ä¸ªæ•°å­—ï¼ˆä¸å¯èƒ½ä¸‰ä¸ªæ•°å­—ï¼Œä¸‰ä¸ªæ•°å­—è‚¯å®šå¤§äº25äº†ï¼‰ï¼Œå’Œé’è›™è·³åªèƒ½è·³ä¸€æ­¥æˆ–ä¸¤æ­¥ç±»ä¼¼


    å‡è®¾dp(i)ä¸ºé•¿åº¦ä¸ºiçš„æ•°å­—çš„ç¿»è¯‘æ€»æ•°
        a.å¦‚æœæœ€åä¸¤ä½æ•°å­—å¤§äº10ä¸”å°äº25ï¼Œä»–æ‰èƒ½ç¿»è¯‘ä¸¤ä¸ªæ•°å­—ï¼Œä»–å°±å’Œé’è›™è·³ç±»ä¼¼æœ‰ä¸¤ç§æƒ…å†µï¼š
             1.dp(i-1),ç„¶åæœ€åä¸€ä¸ªæ•°å­—å•ç‹¬ç¿»è¯‘
             2.dp(i-2),ç„¶åæœ€åä¸¤ä¸ªæ•°å­—ä¸€èµ·ç¿»è¯‘
             æ‰€ä»¥dp(i) = dp(i-1) + dp(i-2);
        b.å¦‚æœæœ€åä¸¤ä½æ•°å­—æ¯”10å°ï¼Œæ¯”25å¤§ï¼Œé‚£ä¹ˆä»–æœ€åä¸€ä¸ªæ•°å­—åªèƒ½å•ç‹¬ç¿»è¯‘ï¼Œæ‰€ä»¥åªæœ‰ä¸€ç§æƒ…å†µï¼š
             1.dp(i-1),ç„¶åæœ€åä¸€ä¸ªæ•°å­—å•ç‹¬ç¿»è¯‘,æ‰€ä»¥dp(i) = dp(i-1);
ä»£ç (æœ€å¥½ç†è§£çš„å†™æ³•)

```java
class Solution {
    public int translateNum(int num) {
        //dp[i-2]
        int a = 1;
        //dp[i-1]
        int b = 1;
        //dp[i]
        int c = 1;
        String s = String.valueOf(num);
        for (int i = 1; i < s.length(); i++) {
            //æœ€åä¸¤ä¸ªæ•°å­—å¤§äº10å°äº25
            if ((s.charAt(i-1) == '1') || ( s.charAt(i-1) == '2' && s.charAt(i) <= '5')) {
                c = b + a;
                //æ›´æ–°æ–°çš„dp[i-2]
                a = b;
                //æ›´æ–°æ–°çš„dp[i-1]
                b = c;
            }else {
                c = b;
                //ç”±äºæ–°çš„dp[i-1]å€¼æ²¡å˜ï¼Œæ‰€ä»¥åªæ›´æ–°æ–°çš„dp[i-2]
                a = b;
            }
        }
        return c;

    }
}
```

- æ³¨æ„ï¼šå­—ç¬¦â€˜1â€™ â€˜2â€™ â€˜3â€™ â€˜4â€™ â€˜5â€™ï¼Œï¼Œä¹Ÿæ˜¯asciié€’å¢çš„ï¼Œä»–ä»¬å¯ä»¥ç”¨ç¬¦å·æ¯”å¤§å°ã€‚

#### å®˜æ–¹1-åŠ¨æ€è§„åˆ’+å­—ç¬¦ä¸²éå†

è§£é¢˜æ€è·¯ï¼š

æ ¹æ®é¢˜æ„ï¼Œå¯æŒ‰ç…§ä¸‹å›¾çš„æ€è·¯ï¼Œæ€»ç»“å‡º â€œé€’æ¨å…¬å¼â€ ï¼ˆå³è½¬ç§»æ–¹ç¨‹ï¼‰ã€‚
å› æ­¤ï¼Œæ­¤é¢˜å¯ç”¨åŠ¨æ€è§„åˆ’è§£å†³ï¼Œä»¥ä¸‹æŒ‰ç…§æµç¨‹è§£é¢˜ã€‚

![Picture1.png](lcof.assets/e231fde16304948251633cfc65d04396f117239ea2d13896b1d2678de9067b42-Picture1.png)

åŠ¨æ€è§„åˆ’è§£æï¼š

![image-20220401172718039](lcof.assets/image-20220401172718039.png)

å­—ç¬¦ä¸²éå†åšæ³•ï¼š

![image-20220401172829205](lcof.assets/image-20220401172829205.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220401172857171](lcof.assets/image-20220401172857171.png)

ä»£ç ï¼š

```java
class Solution {
    public int translateNum(int num) {
        String s = String.valueOf(num);
        int a = 1, b = 1;
        for(int i = 2; i <= s.length(); i++) {
            String tmp = s.substring(i - 2, i);
            int c = tmp.compareTo("10") >= 0 && tmp.compareTo("25") <= 0 ? a + b : a;
            b = a;
            a = c;
        }
        return a;
    }
}
```

é«˜èµç½‘å‹è¡¥å……ï¼šåŠ¨æ€è§„åˆ’æ€æƒ³ï¼ŒæŒ‰ç…§å¤§ä½¬çš„æ€è·¯ï¼Œä½¿ç”¨çš„æ•°ç»„ï¼ˆæ„Ÿè§‰ä½¿ç”¨aå’Œbä¸å¤ªç›´è§‚ï¼‰

```java
class Solution {
    public int translateNum(int num) {
        String s = String.valueOf(num);
        int[] dp = new int[s.length()+1];
        dp[0] = 1;
        dp[1] = 1;
        for(int i = 2; i <= s.length(); i ++){
            String temp = s.substring(i-2, i);
            if(temp.compareTo("10") >= 0 && temp.compareTo("25") <= 0)
                dp[i] = dp[i-1] + dp[i-2];
            else
                dp[i] = dp[i-1];
        }
        return dp[s.length()];
    }
}
```

![image-20220401173035518](lcof.assets/image-20220401173035518.png)

```java
class Solution {
    public int translateNum(int num) {
        String s = String.valueOf(num);
        int a = 1, b = 1;
        for(int i = s.length() - 2; i > -1; i--) {
            String tmp = s.substring(i, i + 2);
            int c = tmp.compareTo("10") >= 0 && tmp.compareTo("25") <= 0 ? a + b : a;
            b = a;
            a = c;
        }
        return a;
    }
}
```

#### å®˜æ–¹2-åŠ¨æ€è§„åˆ’+æ•°å­—æ±‚ä½™

ä¸Šè¿°æ–¹æ³•1è™½ç„¶å·²ç»èŠ‚çœäº† dpåˆ—è¡¨çš„ç©ºé—´å ç”¨ï¼Œä½†å­—ç¬¦ä¸² s ä»ä½¿ç”¨äº† O(N)å¤§å°çš„é¢å¤–ç©ºé—´ã€‚

ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–ï¼š

![image-20220401173303141](lcof.assets/image-20220401173303141.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220401173327733](lcof.assets/image-20220401173327733.png)

ä»£ç ï¼š

```java
class Solution {
    public int translateNum(int num) {
        int a = 1, b = 1, x, y = num % 10;
        while(num != 0) {
            num /= 10;
            x = num % 10;
            int tmp = 10 * x + y;
            int c = (tmp >= 10 && tmp <= 25) ? a + b : a;
            b = a;
            a = c;
            y = x;
        }
        return a;
    }
}
```

é«˜èµç½‘å‹è¡¥å……ï¼šå¤§ä½¬ï¼Œç›´æ¥å¯¹100å–ä½™å¯ä»¥ç®€åŒ–ä»£ç :

```java
class Solution {
    public int translateNum(int num) {
        int m = 1, n = 1;
        // è‡³å°‘æ˜¯ä¸€ä¸ªä¸¤ä½æ•°æ‰éœ€è¦è€ƒè™‘èƒ½ä¸èƒ½ç»„åˆ
        while (num > 9) { 
            int t = (num % 100 < 26 && num % 100 > 9) ? m + n : n;
            m = n;
            n = t;
            num /= 10;
        }
        return n;
    }
}
```

#### åŠæ—¶å†æˆ˜æˆåŠŸ

```java
class Solution {
    public int translateNum(int num) {

        /**
        æ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²æ˜¯å¯¹ç§°çš„ï¼Œæ‰€ä»¥ä»å³å¾€å·¦çœ‹ï¼›ä»¥nums[i-1]ä¸ºé¦–ä½çš„æ•°å­—ï¼Œå¯èƒ½æ”¶åˆ°nums[i]å’Œnums[i+1]çš„å½±å“
         */
        //åˆå§‹åŒ–ï¼ŒæŠŠnumçœ‹åšnumsæ•°ç»„çš„è¯ï¼Œè¡¨ç¤ºä»¥nums[len-1]å’Œnums[len]ä¸ºç»ˆç‚¹çš„çš„ç¿»è¯‘æœ‰å‡ ç§æƒ…å†µï¼Œè™½ç„¶åˆå§‹æƒ…å†µä¸‹dpLater2å¯¹åº”çš„nums[len]ä¸å­˜åœ¨ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡dp[len-2]å’Œdp[len-1]æ¨å‡ºdp[len].
        int dpLater1=1,dpLater2=1;

        //ä½¿ç”¨å¯¹100æ±‚ä½™æ•°ï¼Œå¾—åˆ°æœ€æ¥è¿‘å·¦éå†ç»ˆç‚¹çš„ä¸¤ä¸ªæ•°å­—æ„æˆçš„æ•°
        while(num>9){
            int tempFocus=num%100;
            int dpCur;
            //æ•°å­—åœ¨[10,25]æœ‰ä¸¤ç§ç¿»è¯‘æ–¹æ³•
            if(tempFocus>=10&&tempFocus<=25){
                dpCur=dpLater1+dpLater2;
            }else{
                dpCur=dpLater1;
            }

            //å¾€å·¦ç»§ç»­å¤„ç†
            dpLater2=dpLater1;
            dpLater1=dpCur;
            num/=10;
        }

        //æœ€åçš„dpCurç»™äº†dpLater1
        return dpLater1;

    }
}
```

è‡ªç”»æ€è·¯å›¾ï¼š

![image-20220401181306013](lcof.assets/image-20220401181306013.png)

- å³æœ€åçš„12ï¼Œå¦‚æœæ•´ä½“ç¿»è¯‘ï¼Œå°±æ˜¯ä»¥4ä¸ºå·¦ç»“å°¾çš„ç¿»è¯‘å¯èƒ½æ•°ï¼ˆ12    4ï¼Œå…±ä¸€ç§æƒ…å†µï¼‰ï¼›å¦‚æœæ‹†å¼€ç¿»è¯‘ï¼Œå³æ˜¯ä»¥2ä¸ºç»“å°¾çš„è¿”å›æ•°ï¼ˆ1   2   4ï¼Œ1    24ï¼Œ  å…±ä¸¤ç§æƒ…å†µï¼‰ï¼›åˆå› ä¸ºæ—¢èƒ½ç¿»è¯‘ä¸º1åˆèƒ½ç¿»è¯‘ä¸º12ï¼Œæ‰€ä»¥æ˜¯ä¸¤ç§ç¿»è¯‘æƒ…å†µçš„ç§æ•°çš„å’Œã€‚
  - æ¯”å¦‚324ï¼Œæœ€ååˆ†æ32ï¼Œä¸èƒ½ä½œä¸ºç¿»è¯‘å•å…ƒï¼Œæ‰€ä»¥åªèƒ½æ‹†å¼€3å’Œ2ï¼›æœ‰3   24ï¼Œ3    2    4ä¸¤ç§æƒ…å†µï¼Œå³ç›¸å½“äºä»¥2ç»“å°¾çš„ç¿»è¯‘å¯èƒ½æ•°ã€‚

- å…¶å®æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œä»å³å¾€å·¦å¤„ç†æ—¶ï¼Œæœ€åçš„ç¿»è¯‘å•å…ƒæ˜¯1 è¿˜æ˜¯12ï¼›æœ€åçš„ç¿»è¯‘å•å…ƒæ˜¯1åˆ™å¯¹åº”ä¸€ä¸ª1xxxxç¿»è¯‘ï¼Œæœ€åçš„ç¿»è¯‘å•å…ƒæ˜¯12åˆ™å¯¹åº”ä¸€ä¸ª12xxxxç¿»è¯‘ï¼ŒxxxxåŒºåŸŸç›¸å½“äºå°±æ˜¯åŠ¨æ€è§„åˆ’çš„å­é—®é¢˜ï¼Œå…±ä¸¤ç§æƒ…å†µã€‚å¦‚æœæ•°å­—æ›´é•¿çš„è¯ï¼Œä¹Ÿæ˜¯åŒç†ã€‚

### [å‰‘æŒ‡ Offer 48. æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²](https://leetcode-cn.com/problems/zui-chang-bu-han-zhong-fu-zi-fu-de-zi-zi-fu-chuan-lcof/)

#### é¦–æˆ˜å¯„

#### å®˜æ–¹-è§£é¢˜æ€è·¯

è§£é¢˜æ€è·¯ï¼š

![image-20220402102952931](lcof.assets/image-20220402102952931.png)

åŠ¨æ€è§„åˆ’è§£æï¼š

![image-20220402103030643](lcof.assets/image-20220402103030643.png)

ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–ï¼š

![image-20220402103106620](lcof.assets/image-20220402103106620.png)

#### å®˜æ–¹æ–¹æ³•1-åŠ¨æ€è§„åˆ’ + å“ˆå¸Œè¡¨

![image-20220402103323735](lcof.assets/image-20220402103323735.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220402103346795](lcof.assets/image-20220402103346795.png)

ä»£ç ï¼š

```java
class Solution {
    public int lengthOfLongestSubstring(String s) {
        Map<Character, Integer> dic = new HashMap<>();
        int res = 0, tmp = 0;
        for(int j = 0; j < s.length(); j++) {
            int i = dic.getOrDefault(s.charAt(j), -1); // è·å–ç´¢å¼• i
            dic.put(s.charAt(j), j); // æ›´æ–°å“ˆå¸Œè¡¨
            tmp = tmp < j - i ? tmp + 1 : j - i; // dp[j - 1] -> dp[j]
            res = Math.max(res, tmp); // max(dp[j - 1], dp[j])
        }
        return res;
    }
}
```

- Java çš„  getOrDefault(key, default)ï¼Œ ä»£è¡¨å½“å“ˆå¸Œè¡¨åŒ…å«é”® keyæ—¶è¿”å›å¯¹åº” value ï¼Œä¸åŒ…å«æ—¶è¿”å›é»˜è®¤å€¼ default ã€‚

- æˆ‘ï¼šdpjçš„å€¼ç”±dpj-1å’Œiå…±åŒå†³å®šï¼›å¦‚æœiåœ¨dpj-1æ‰€ä»£è¡¨çš„å­—ç¬¦ä¸²ä¸­ï¼Œåˆ™dpjçš„é•¿åº¦ä¸ºj-iï¼›å¦‚æœiä¸åœ¨dpj-1æ‰€ä»£è¡¨çš„å­—ç¬¦ä¸²ä¸­ï¼Œåˆ™dpjçš„é•¿åº¦ä¸º(dpj-1)+1ã€‚

#### å®˜æ–¹æ–¹æ³•2-åŠ¨æ€è§„åˆ’ + çº¿æ€§éå†

æ€è·¯ï¼š

![image-20220402104704664](lcof.assets/image-20220402104704664.png)

ä»£ç ï¼š

```java
class Solution {
    public int lengthOfLongestSubstring(String s) {
        Map<Character, Integer> dic = new HashMap<>();
        int res = 0, tmp = 0;
        for(int j = 0; j < s.length(); j++) {
            int i = j - 1;
            while(i >= 0 && s.charAt(i) != s.charAt(j)) i--; // çº¿æ€§æŸ¥æ‰¾ i
            tmp = tmp < j - i ? tmp + 1 : j - i; // dp[j - 1] -> dp[j]
            res = Math.max(res, tmp); // max(dp[j - 1], dp[j])
        }
        return res;
    }
}

```

- è¿™ç§å¾€å·¦éå†å¢å¤§äº†æ—¶é—´å¤æ‚åº¦ä¸ºon2ï¼Œä¸å¯å–ï¼Œä¸å»ºè®®

#### å®˜æ–¹æ–¹æ³•3-åŒæŒ‡é’ˆ + å“ˆå¸Œè¡¨

æ€è·¯ï¼š

![image-20220402104914233](lcof.assets/image-20220402104914233.png)

ä»£ç ï¼š

```java
class Solution {
    public int lengthOfLongestSubstring(String s) {
        Map<Character, Integer> dic = new HashMap<>();
        int i = -1, res = 0;
        for(int j = 0; j < s.length(); j++) {
            if(dic.containsKey(s.charAt(j)))
                i = Math.max(i, dic.get(s.charAt(j))); // æ›´æ–°å·¦æŒ‡é’ˆ i
            dic.put(s.charAt(j), j); // å“ˆå¸Œè¡¨è®°å½•
            res = Math.max(res, j - i); // æ›´æ–°ç»“æœï¼›j - iå³ä¸ºä»¥iä¸ºå³æŒ‡é’ˆçš„æœ€é•¿å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå…¶è¦ä¸å†å²æœ€å¤§å€¼æ¯”è¾ƒæ¥æ›´æ–°å†å²æœ€å¤§å€¼ã€‚
        }
        return res;
    }
}

```

- ç½‘å‹é—®ï¼šleft = Math.max(left, hashMap.get(ch) + 1);ä¸ºä»€ä¹ˆå–æœ€å¤§å€¼

  - ç½‘å‹ç­”ï¼š

  - å› ä¸ºéœ€è¦ä¿è¯çš„æ˜¯`[left,right]`æ²¡æœ‰é‡å¤å€¼ã€‚è€Œä½ çš„leftå¦‚æœä¸å–æœ€å¤§å€¼çš„è¯ï¼Œæ˜¯æœ‰å¯èƒ½å¾€å‰é€€ï¼Œå°±æ— æ³•ä¿è¯è¿™ä¸ªæ¡ä»¶äº†ã€‚

    æ¯”å¦‚`abba` , åˆ°ç¬¬äºŒä¸ª`a`çš„æ—¶å€™ï¼Œè¿™æ—¶å€™ä¸Šä¸€è½®çš„ç¬¬äºŒä¸ªbå®Œæˆï¼Œæ­¤æ—¶`left=2` ï¼Œè€Œ`a`ä¸Šä¸€æ¬¡å‡ºç°çš„åœ°æ–¹æ˜¯0ã€‚

    å¦‚æœä½ ç›´æ¥`left = hashMap.get(ch) + 1` ,æ­¤æ—¶ left = 1 ,èŒƒå›´ä¸º`[left,right] = [1,3]` è€Œæ­¤æ—¶`[1,2] = bb` ï¼Œbå·²ç»é‡å¤äº†ã€‚æœ¬è´¨å°±æ˜¯ä½ è¿™ä¸ªå­—æ¯ä¸Šæ¬¡å‡ºç°çš„åœ°æ–¹åˆ°å½“å‰å†æ¬¡å‡ºç°çš„ä½ç½®ï¼Œè¿™ä¸¤è€…é—´å¯èƒ½å­˜åœ¨é‡å¤çš„å€¼

#### å³æ—¶å†æˆ˜åŠå¯„

```java
class Solution {
    public int lengthOfLongestSubstring(String s) {
        /**
        ä»å·¦å¾€å³éå†ï¼Œijåˆ†åˆ«ä¸ºå·¦å³é‡å¤å…ƒç´ ï¼Œdpjç”±dpj-1å’Œiå…±åŒå†³å®š
         */

        //å­˜å‚¨å­—ç¬¦å…ƒç´ -ä½ç½®
        Map<Character,Integer> map=new HashMap<>();
        //jä½ç½®ä¸ºå½“å‰å…ƒç´ ï¼Œiä¸ºå½“å‰å…ƒç´ ä¹‹å‰çš„é‡å¤å…ƒç´ çš„ä½ç½®
        int i=-1,dpPre=0,result=0;
        for(int j=0;j<s.length();j++){
            //å…ˆè·å–å½“å‰å…ƒç´ çš„ä¸Šä¸€ä¸ªé‡å¤å…ƒç´ çš„indexï¼Œå¦‚æœæ²¡å‡ºç°è¿‡åˆ™è¿”å›-1ï¼›
            i=map.getOrDefault(s.charAt(j),-1);

            //å½“å‰å…ƒç´ ä¸ºå³å°¾çš„å­ä¸²çš„é•¿åº¦ï¼Œç”±dpPreå’Œijå…³ç³»å…±åŒå†³å®šã€‚æ³¨æ„dpPre==j-iæ—¶jçš„ä¸Šä¸€ä¸ªé‡å¤å…ƒç´ åœ¨dpPreå¯¹åº”çš„å­ä¸²çš„é¦–ä½ï¼Œæ‰€ä»¥åœ¨dpPreå¯¹åº”çš„å­ä¸²å†…ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨dpPre+1ä½œä¸ºæ–°å€¼ã€‚
            int dpCur=(dpPre>=j-i?j-i:dpPre+1);
            //æ¯”è¾ƒä»¥å½“å‰å…ƒç´ ä¸ºç»“å°¾çš„å­ä¸²çš„æœ€å¤§é•¿åº¦å’Œå†å²ä¸Šè®°å½•çš„æœ€å¤§é•¿åº¦ï¼Œæ›´æ–°å†å²æœ€å¤§é•¿åº¦
            result=Math.max(result,dpCur);

            //æ›´æ–°s.charAt(j)å­—ç¬¦çš„ä½ç½®ä¸ºå½“å‰ä½ç½®
            map.put(s.charAt(j),j);
            //ä¸è¦å¿˜è®°æ›´æ–°dpPreï¼Œå¦åˆ™dpPreæ°¸è¿œæ˜¯0
            dpPre=dpCur;
        }

        return result;

    }
}
```

- èƒ½ç†é¡ºåŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼Œä½†æ˜¯å†™ä»£ç çš„æ—¶å€™å¿˜è®°æ›´æ–°dpPreï¼Œä¸”ä¸€ç›´æ²¡æ’æŸ¥å‡ºæ¥ï¼›æœ€åç”¨idea debugæ‰å‘ç°ã€‚**æ¶‰åŠåˆ°preçš„ä¸€å®šè¦æ³¨æ„preæ˜¯å¦éœ€è¦è¢«æ›´æ–°**ï¼

## åŒæŒ‡é’ˆ(ç®€å•)

### [å‰‘æŒ‡ Offer 18. åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹](https://leetcode-cn.com/problems/shan-chu-lian-biao-de-jie-dian-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) { val = x; }
 * }
 */
class Solution {
    public ListNode deleteNode(ListNode head, int val) {
        //å¤„ç†ç‰¹æ®Šæƒ…å†µã€‚ä¹ æƒ¯æ€§çš„åšä¸€ä¸‹nullå¤„ç†ï¼Œé¿å…æ¶å¿ƒäººçš„æ¡ˆä¾‹ã€‚
        if(head==null)return null;
        
        //åˆ›å»ºå¼•ç”¨å½“å‰èŠ‚ç‚¹çš„å¼•ç”¨
        ListNode cur=head;
        
        //ç”±äºæ€»æ˜¯åˆ é™¤ä¸‹ä¸€èŠ‚ç‚¹ï¼Œæ‰€ä»¥å…ˆå¤„ç†å¤´èŠ‚ç‚¹;å› ä¸ºå¤´èŠ‚ç‚¹ä¸èƒ½è¢«é€šè¿‡å‰èŠ‚ç‚¹åˆ é™¤ã€‚
        if(head.val==val){
            head=head.next;
            return head;
        }

        //ç”±äºæ€»æ˜¯åˆ¤æ–­åˆ é™¤ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥åˆ¤æ–­çš„æ˜¯nextä¸ä¸ºç©ºï¼›æœ¬whileå¾ªç¯ä¸ä¼šå¾ªç¯å®Œé€€å‡ºï¼Œåªä¼šåœ¨å¾ªç¯ä¸­æ‰¾åˆ°äº†è¦åˆ é™¤çš„èŠ‚ç‚¹å¹¶é€€å‡º
        while(cur.next!=null){
            //åˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¦ä¸è¦è¢«åˆ æ‰ï¼›ç”±äºç¨‹åºæœ€è¿Ÿåœ¨curä¸ºå€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹æ—¶èƒ½åˆ¤æ–­åˆ°å€’æ•°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è¦è¢«åˆ æ‰ï¼Œå¹¶ä¸”whileçš„æ¡ä»¶ä¿è¯äº†ä¸‹ä¸€èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œæ‰€ä»¥å…¶å®ä¸ç”¨æ‹…å¿ƒcur.next==nullå³curä¸ºç»“å°¾æŒ‡é’ˆé€ æˆçš„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚
            if(cur.next.val==val){
                //å³ä½¿æ˜¯åˆ æ‰æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œcurä¸ºå€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œcur.next.nextä¹Ÿä¸ºnullä¸ä¼šç©ºæŒ‡é’ˆå¼‚å¸¸
                cur.next=cur.next.next;
                return head;
            }
            //whileä¸è¦å¿˜è®°ç§»åŠ¨cur
            cur=cur.next;
        }
        //æ­£å¸¸æ¥è¯´ï¼Œè¿™ä¸ªreturnæ˜¯æ°¸è¿œä¸ä¼šä½¿ç”¨çš„ã€‚
        return null;
    }
}
```

- æ²¡ç”¨åˆ°åŒæŒ‡é’ˆï¼Œå°±æ—¶é—´å¤æ‚åº¦onè§£å†³äº†

#### å®˜æ–¹-åŒæŒ‡é’ˆ

å…¶å®å®˜æ–¹çš„åŒæŒ‡é’ˆå°±æ˜¯æˆ‘çš„åšæ³•å—ï¼Œåªä¸è¿‡å¤šæ­¤ä¸€ä¸¾ç”¨äº†ä¸¤ä¸ªæŒ‡é’ˆã€‚

è§£é¢˜æ€è·¯ï¼š

![image-20220403171506936](lcof.assets/image-20220403171506936.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220403171539038](lcof.assets/image-20220403171539038.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220403171557465](lcof.assets/image-20220403171557465.png)

ä»£ç ï¼š

```java
class Solution {
    public ListNode deleteNode(ListNode head, int val) {
        if(head.val == val) return head.next;
        ListNode pre = head, cur = head.next;
        while(cur != null && cur.val != val) {
            pre = cur;
            cur = cur.next;
        }
        if(cur != null) pre.next = cur.next;
        return head;
    }
}
```

- æˆ‘ï¼šæœ‰ä¸ªç½‘å‹è¯„ä»·â€œå•æŒ‡é’ˆâ€å°±å¤Ÿäº†ï¼Œåšæ³•å°±æ˜¯æˆ‘çš„åšæ³•ã€‚



### [å‰‘æŒ‡ Offer 22. é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹](https://leetcode-cn.com/problems/lian-biao-zhong-dao-shu-di-kge-jie-dian-lcof/)

#### é¦–æˆ˜å‘Šæ·--é€’å½’æ³•

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) { val = x; }
 * }
 */
class Solution {
    //å®šä¹‰å…¨å±€å˜é‡
    ListNode result;
    public ListNode getKthFromEnd(ListNode head, int k) {
        /*
        å€’æ•°ï¼Œæƒ³åˆ°æ ˆï¼šå…ˆæŠŠèŠ‚ç‚¹å…¨éƒ¨å…¥æ ˆï¼Œå‡ºæ ˆçš„æ—¶å€™è®¡æ•°ï¼Œåˆ°æŒ‡å®šèŠ‚ç‚¹éƒ½å‡ºæ ˆçš„æ—¶å€™ï¼Œè¿”å›é‚£ä¸ªèŠ‚ç‚¹ã€‚
        æ ˆå¯ä»¥é€šè¿‡é€’å½’å®ç°ï¼Œè®¡æ•°å¯ä»¥é€šè¿‡å…¨å±€å˜é‡
         */

        //æ‰§è¡Œé€’å½’ï¼Œä»¥ä¿å­˜ç›®æ ‡èŠ‚ç‚¹
        recur(head,k);

        return result;

    }
    public int recur(ListNode head,int k){
        //è®¾å®šé€’å½’è§¦åº•æ¡ä»¶ï¼Œå“ªä¸ªé€’å½’å±‚æ‹¿åˆ°çš„returnä¸kç›¸åŒï¼Œåˆ™è¯´æ˜åº”è¿”å›å½“å‰èŠ‚ç‚¹
        if(head==null) return 1;

        //å¦‚æœä¸‹ä¸€å±‚é€’å½’è¿”å›çš„å½“å‰å±‚çš„å€’æ•°å±‚æ•°ä¸ºkï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å°±æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼›
        int kthFromEnd=recur(head.next,k);
        if(kthFromEnd==k){
            result=head;
        }

        //ç»™é€€æ ˆæ—¶çš„å„å±‚è¿”å›ä»–ä»¬çš„å€’æ•°çš„å±‚æ•°
        return kthFromEnd+1;
    }
}
```

- é—®é—®é—®ï¼šæˆ‘nå±‚é€’å½’ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ä¸æ˜¯å°±æ˜¯onäº†ï¼Œé‚£æ€§èƒ½å°±ä¸å¦‚å®˜æ–¹çš„äº†ã€‚

#### å®˜æ–¹--åŒæŒ‡é’ˆ

è§£é¢˜æ€è·¯ï¼š

![image-20220403175326006](lcof.assets/image-20220403175326006.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220403175352955](lcof.assets/image-20220403175352955.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220403175419032](lcof.assets/image-20220403175419032.png)

ä»£ç ï¼š

```java
class Solution {
    public ListNode getKthFromEnd(ListNode head, int k) {
        ListNode former = head, latter = head;
        for(int i = 0; i < k; i++)
            former = former.next;
        while(former != null) {
            former = former.next;
            latter = latter.next;
        }
        return latter;
    }
}
```

- æœ¬é¢˜æ²¡æœ‰ k*k* å¤§äºé“¾è¡¨é•¿åº¦çš„ case ï¼Œå› æ­¤ä¸ç”¨è€ƒè™‘è¶Šç•Œé—®é¢˜ã€‚

- æˆ‘ï¼šçœ‹æ¥åŒæŒ‡é’ˆå¯ä»¥è¿™æ ·æ§åˆ¶è·ç¦»ï¼Œç‰›é€¼ï¼



### [å‰‘æŒ‡ Offer 25. åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨](https://leetcode-cn.com/problems/he-bing-liang-ge-pai-xu-de-lian-biao-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) { val = x; }
 * }
 */
class Solution {
    public ListNode mergeTwoLists(ListNode l1, ListNode l2) {
        //å¤„ç†ç‰¹æ®Šæƒ…å†µ
        if(l1==null)return l2;
        if(l2==null)return l1;
        //èƒ½èµ°åˆ°è¿™ä¸€æ­¥è¯´æ˜ä¸¤ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œä¸ä¼šç©ºæŒ‡é’ˆï¼›ä¿å­˜åˆå§‹å¤´ç»“ç‚¹ä¸ºä¸¤ä¸ªé“¾è¡¨å¤´ç»“ç‚¹é‡Œå°çš„é‚£ä¸ªï¼›å¿…é¡»ä¿å­˜äº†å¤´ç»“ç‚¹ï¼Œåé¢whileä¸­æ‰èƒ½æœ‰head.nextçš„æ–¹å¼èµ‹å€¼ï¼Œæ‰èƒ½è¿æ¥èµ·é“¾è¡¨ã€‚
        ListNode head;
        if(l1.val<=l2.val){
            head=l1;
            //l1çš„å¤´ç»“ç‚¹å·²ç»è¢«åŠ å…¥ç»“æœé“¾è¡¨äº†ï¼Œæ‰€ä»¥å¾€ä¸‹ç§»åŠ¨ä¸€ä½çœ‹ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            l1=l1.next;
        }else{
            head=l2;
            l2=l2.next;
        }
        ListNode headCur=head;

        //å»ºç«‹åŒæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªé“¾è¡¨ï¼Œåˆå¹¶
        ListNode pl1=l1;
        ListNode pl2=l2;
        //æŠŠä¸¤ä¸ªèŠ‚ç‚¹ä¸­è¾ƒå°çš„èŠ‚ç‚¹åŠ å…¥ç»“æœåˆ—è¡¨head
        while(pl1!=null&&pl2!=null){   
            if(pl1.val<=pl2.val){
                headCur.next=pl1;
                headCur=headCur.next;
                pl1=pl1.next;
            }else{
                headCur.next=pl2;
                headCur=headCur.next;
                pl2=pl2.next;
            }
        }

        //ä¸€ä¸ªé˜Ÿåˆ—éå†å®Œæ¯•åï¼ŒæŠŠå¦ä¸€ä¸ªé˜Ÿåˆ—çš„å‰©ä½™éƒ¨åˆ†ç›´æ¥åŠ å…¥ç»“æœé“¾è¡¨
        if(pl1!=null){
            headCur.next=pl1;
        }else{
            headCur.next=pl2;
        }


        return head;
    }
}
```

- ä¸ºäº†ç»“æœé“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘çš„æ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œå®é™…ä¸Šå¯ä»¥åƒå®˜æ–¹ç­”æ¡ˆä¸€æ ·ï¼Œä½¿ç”¨ä¸€ä¸ªä¼ªå¤´èŠ‚ç‚¹å³å¯ã€‚

#### å®˜æ–¹-åŒæŒ‡é’ˆ+ä¼ªå¤´ç»“ç‚¹

è§£é¢˜æ€è·¯ï¼š

![image-20220403192034915](lcof.assets/image-20220403192034915.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220403192122384](lcof.assets/image-20220403192122384.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220403192147988](lcof.assets/image-20220403192147988.png)

ä»£ç ï¼š

```java
class Solution {
    public ListNode mergeTwoLists(ListNode l1, ListNode l2) {
        ListNode dum = new ListNode(0), cur = dum;
        while(l1 != null && l2 != null) {
            if(l1.val < l2.val) {
                cur.next = l1;
                l1 = l1.next;
            }
            else {
                cur.next = l2;
                l2 = l2.next;
            }
            cur = cur.next;
        }
        cur.next = l1 != null ? l1 : l2;
        return dum.next;
    }
}

```

- è¿™ä¸ªä¼ªå¤´ç»“ç‚¹çš„æ€è·¯ç¡®å®ä¸é”™ï¼



### [å‰‘æŒ‡ Offer 52. ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹](https://leetcode-cn.com/problems/liang-ge-lian-biao-de-di-yi-ge-gong-gong-jie-dian-lcof/)

#### é¦–æˆ˜å¯„

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) {
 *         val = x;
 *         next = null;
 *     }
 * }
 */
public class Solution {
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
        /**
         é“¾è¡¨åˆ¤æ–­ç¯ï¼Œåˆ¤æ–­ç›¸äº¤ï¼Œå°±è€ƒè™‘åŒæŒ‡é’ˆ
         */
        ListNode la=headA;
        ListNode lb=headB;

        //ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«éå†ä¸¤ä¸ªé“¾è¡¨ï¼Œå½“å‘ç°æŒ‡å‘åŒä¸€èŠ‚ç‚¹æ—¶è¿”å›è¯¥èŠ‚ç‚¹ï¼›ä»¥èŠ‚ç‚¹çš„åœ°å€ä¸ºåˆ¤æ–­èŠ‚ç‚¹ç›¸ç­‰çš„æ ‡å‡†ï¼Œå› ä¸ºèŠ‚ç‚¹çš„å€¼å¯é‡å¤è§ï¼ˆç¤ºä¾‹ï¼‰
        while((la!=null)&&(lb!=null)){
            System.out.println("la:"+la);
            System.out.println("lb:"+lb);
            if(la==lb){
                return la;
            }
            //whileå§‹ç»ˆè®°ä½è¦ç§»åŠ¨æŒ‡é’ˆ
            la=la.next;
            lb=lb.next;
        }

        //ç»è¿‡éå†éƒ½æ²¡æ‰¾åˆ°å…¬å…±èŠ‚ç‚¹ï¼Œè¯´æ˜æ— å…¬å…±èŠ‚ç‚¹
        return null;
    }
}
```

- å¿½ç•¥äº†å…¬å…±èŠ‚ç‚¹å‰ï¼Œä¸¤ä¸ªé“¾è¡¨çš„å‰éƒ¨é•¿åº¦ä¸ä¸€è‡´çš„é—®é¢˜ï¼›æ¯”å¦‚å…¬å…±éƒ¨åˆ†æœ‰c1 c2çš„è¯ï¼Œå¤´éƒ¨é•¿çš„é“¾è¡¨çš„æŒ‡é’ˆèµ°åˆ°c1ï¼Œå¤´éƒ¨çŸ­çš„é“¾è¡¨çš„æŒ‡é’ˆèµ°åˆ°c2ï¼Œä¸¤ä¸ªæŒ‡é’ˆæ€»æ˜¯æœ‰å‰åå·®è·é”™å¼€äº†ã€‚



#### å®˜æ–¹-åŒæŒ‡é’ˆ+æµªæ¼«ç›¸é‡

è§£é¢˜æ€è·¯ï¼š

æˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ node1ï¼Œnode2 åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªé“¾è¡¨ headAï¼ŒheadB çš„å¤´ç»“ç‚¹ï¼Œç„¶ååŒæ—¶åˆ†åˆ«é€ç»“ç‚¹éå†ï¼Œå½“ node1 åˆ°è¾¾é“¾è¡¨ headA çš„æœ«å°¾æ—¶ï¼Œé‡æ–°å®šä½åˆ°é“¾è¡¨ headB çš„å¤´ç»“ç‚¹ï¼›å½“ node2 åˆ°è¾¾é“¾è¡¨ headB çš„æœ«å°¾æ—¶ï¼Œé‡æ–°å®šä½åˆ°é“¾è¡¨ headA çš„å¤´ç»“ç‚¹ã€‚

è¿™æ ·ï¼Œå½“å®ƒä»¬ç›¸é‡æ—¶ï¼Œæ‰€æŒ‡å‘çš„ç»“ç‚¹å°±æ˜¯ç¬¬ä¸€ä¸ªå…¬å…±ç»“ç‚¹ã€‚

å¤æ‚åº¦åˆ†æï¼š

![image-20220404150150252](lcof.assets/image-20220404150150252.png)

ä»£ç ï¼š

```java
public class Solution {
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
        ListNode PA = headA;
        ListNode PB = headB;
        while (PA != PB) {
            PA = PA == null ? headB : PA.next;
            PB = PB == null ? headA : PB.next;
        }
        return PA;
    }
}
```

#### å³æ—¶å†æˆ˜æˆåŠŸ

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) {
 *         val = x;
 *         next = null;
 *     }
 * }
 */
public class Solution {
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {

        /**
        å°å¿ƒä¸¤ä¸ªé“¾è¡¨çš„å¤´éƒ¨çš„é•¿åº¦æ˜¯ä¸ä¸€è‡´çš„ï¼Œéœ€è¦è®©ä¸¤ä¸ªæŒ‡é’ˆéƒ½èµ°ä¸€éä¸¤ä¸ªåˆ—è¡¨ï¼›è¿™æ ·è¦ä¸èµ°å®Œéƒ½æ²¡ç›¸é‡ï¼Œè¦ä¸åœ¨èµ°å¯¹æ–¹åˆ—è¡¨çš„æ—¶å€™ç›¸é‡
         */

        ListNode ha=headA;
        ListNode hb=headB;

        /**
        éå†æƒ…å†µåˆ†ç±»è®¨è®ºï¼š
        1ï¼Œå¦‚æœä¸¤æ¡é“¾è¡¨ä¸€æ ·é•¿ï¼šå¦‚æœæœ‰å…¬å…±èŠ‚ç‚¹è¯´æ˜å¤´éƒ¨ä¹Ÿä¸€æ ·é•¿ï¼Œé‚£ä¹ˆæŒ‡é’ˆåœ¨éå†å„è‡ªçš„ç¬¬ä¸€æ¡é“¾è¡¨æ—¶å°±èƒ½æ‰¾åˆ°äº¤ç‚¹ï¼›å¦‚æœæ²¡æœ‰å…¬å…±èŠ‚ç‚¹ï¼Œåˆ™ä¸¤ä¸ªæŒ‡é’ˆä¼šåŒæ—¶èµ°åˆ°é“¾è¡¨æœ«å°¾éƒ½ä¸ºnullï¼Œè§¦å‘whileçš„é€€å‡ºï¼Œå³å¯è¿”å›nullå³æ— äº¤ç‚¹ã€‚
        2ï¼Œå¦‚æœä¸¤æ¡é“¾è¡¨ä¸ä¸€æ ·é•¿ï¼šé‚£ä¹ˆè¦å¤„ç†èŠ‚ç‚¹å‰åè·ç¦»å·®çš„é—®é¢˜ï¼Œå¦‚æœæœ‰äº¤ç‚¹ï¼Œé‚£ä¹ˆæŒ‡é’ˆä¼šæŠŠä¸¤ä¸ªé“¾è¡¨éƒ½èµ°ä¸€éï¼Œèµ°åˆ°ç¬¬äºŒä¸ªé“¾è¡¨çš„æ—¶å€™ä¼šåœ¨äº¤ç‚¹å‡ºç›¸äº¤ï¼›å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹çš„è¯ï¼ŒæŒ‡é’ˆä¹Ÿä¼šæŠŠä¸¤ä¸ªé“¾è¡¨éƒ½èµ°ä¸€éï¼Œä¸¤ä¸ªæŒ‡é’ˆä¹Ÿä¼šåŒæ—¶ä»ä¸¤ä¸ªé“¾è¡¨çš„å°¾éƒ¨é€€å‡º

        æ³¨æ„ç”±äºåˆ—è¡¨é•¿åº¦å¯èƒ½ä¸ç­‰ï¼Œæ‰€ä»¥è¦ä¸¤ä¸ªæŒ‡é’ˆéƒ½ä¸ºnullå³éƒ½åˆ°äº†é“¾è¡¨ç»“å°¾ï¼ˆè¦ä¸æ•°ç»„é•¿åº¦ç›¸ç­‰ä¸€éè¿‡æ— äº¤ç‚¹ï¼Œè¦ä¸æ•°ç»„é•¿åº¦ä¸ç­‰ä¸¤éè¿‡æ— äº¤ç‚¹ï¼‰ï¼Œæ‰å…è®¸é€€å‡ºï¼›åªä¸€ä¸ªæŒ‡é’ˆä¸ºnullçš„è¯ï¼Œå¯èƒ½å¦ä¸€ä¸ªæŒ‡é’ˆè¿˜åœ¨éå†ç¬¬ä¸€ä¸ªé“¾è¡¨ï¼Œä¸èƒ½å…è®¸é€€å‡ºã€‚
         */
        while(ha!=hb){
            //å¦‚æœå½“å‰èŠ‚ç‚¹éå†åˆ°ç¬¬ä¸€æ¡é“¾è¡¨çš„æœ«å°¾ï¼Œå¦ä¸€ä¸ªèŠ‚ç‚¹è¿˜åœ¨éå†é“¾è¡¨æ—¶ï¼Œè®©ä»–éå†ç¬¬äºŒæ¡é“¾è¡¨ï¼›æ²¡æœ‰äº¤ç‚¹çš„è¯ç¬¬äºŒæ¡é“¾è¡¨çš„ç»“å°¾ä¸¤ä¸ªæŒ‡é’ˆéƒ½ä¼šæŒ‡å‘nullï¼Œé€€å‡ºwhile
            ha=(ha==null?headB:ha.next);
            hb=(hb==null?headA:hb.next);
        }

        //ha==hbä¸”ha!=nullé€€å‡ºçš„è¯ï¼Œha==hb==äº¤ç‚¹ï¼›ha==hb==nullé€€å‡ºçš„è¯ï¼Œä¹Ÿè¿”å›null
        return ha;
        
    }
}
```



### [å‰‘æŒ‡ Offer 21. è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢](https://leetcode-cn.com/problems/diao-zheng-shu-zu-shun-xu-shi-qi-shu-wei-yu-ou-shu-qian-mian-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public int[] exchange(int[] nums) {
        /**
        åŒæŒ‡é’ˆï¼ŒlæŒ‡å‘å¥‡æ•°æ®µçš„å³éƒ¨å³ä¸€ä½ï¼ŒræŒ‡å‘å¶æ•°æ®µå·¦éƒ¨å·¦ä¸€ä½
        åªç§»åŠ¨ä¸€ä¸ªæŒ‡é’ˆï¼Œæœ¬ä¾‹ç§»åŠ¨å¥‡æŒ‡é’ˆï¼Œå‘ç°å¶æ•°å°±ç»™å¶æŒ‡é’ˆäº¤æ¢ï¼Œå¶æŒ‡é’ˆå†å·¦ç§»åŠ¨ä¸€ä½ï¼Œå¥‡æŒ‡é’ˆé‡æ–°åˆ¤æ–­ï¼›å‘ç°å¥‡æ•°åˆ™å¯„æŒ‡é’ˆå³ç§»ä¸€ä½ï¼›ä¸¤æŒ‡é’ˆé‡åˆæ—¶é€€å‡ºï¼Œé‡åˆä½ç½®çš„å¥‡å¶æ€§æ— æ‰€è°“ï¼Œæ¯•ç«Ÿä½äºå¥‡æ•°æ®µå¶æ•°æ®µçš„äº¤ç‚¹ï¼Œæ˜¯è°éƒ½å¯ä»¥ã€‚
         */

        //å¤„ç†ç‰¹æ®Šæƒ…å†µï¼Œæµ‹è¯•æ¡ˆä¾‹[]çº¯çº¯ä¹Œé±¼å­
        if(nums.length==0)
        return nums;

         int l=0,r=nums.length-1;
         while(l!=r){
             //å·¦æŒ‡é’ˆå‘ç°å¶æ•°
             if(nums[l]%2==0){
                 //äº¤æ¢å·¦å³æŒ‡é’ˆæŒ‡å‘çš„æ•°ç»„å…ƒç´ 
                 int temp=nums[r];
                 nums[r]=nums[l];
                 nums[l]=temp;
                //ç§»åŠ¨å³æŒ‡é’ˆ
                r--;
             }else{//å·¦æŒ‡é’ˆå‘ç°å¥‡æ•°ï¼Œå·¦æŒ‡é’ˆå³ç§»ä¸€ä½
                l++;
             }
             //å¦‚æœå·¦æŒ‡é’ˆå‘ç°å¶æ•°ï¼Œå·¦å³æŒ‡é’ˆæŒ‡å‘çš„æ•°ç»„å…ƒç´ äº¤æ¢åï¼Œå·¦æŒ‡é’ˆä¼šå†æ¬¡æ£€æŸ¥è¢«æ¢æ¥çš„å…ƒç´ æ˜¯å¦ä¸ºå¥‡æ•°
         }
        return nums;
    }
}
```

- æœ‰å®Œæ•´æ€è·¯å’Œä»£ç æ¡†æ¶ï¼Œä½†æ˜¯æ¼äº†â€œå·¦æŒ‡é’ˆç§»åŠ¨â€ï¼Œå’Œâ€ç©ºæ•°ç»„å¤„ç†â€œï¼›ä¸è¿‡è‡ªè¡Œä¿®æ”¹å®Œæ¯•äº†ã€‚

#### å®˜æ–¹-åŒæŒ‡é’ˆ+åŒæ—¶ç§»åŠ¨

è§£é¢˜æ€è·¯ï¼š

è€ƒè™‘å®šä¹‰åŒæŒ‡é’ˆ ii , jj åˆ†åˆ—æ•°ç»„å·¦å³ä¸¤ç«¯ï¼Œå¾ªç¯æ‰§è¡Œï¼š

1. æŒ‡é’ˆ ii ä»å·¦å‘å³å¯»æ‰¾å¶æ•°ï¼›
2. æŒ‡é’ˆ jj ä»å³å‘å·¦å¯»æ‰¾å¥‡æ•°ï¼›
3. å°† å¶æ•° nums[i]nums[i] å’Œ å¥‡æ•° nums[j]nums[j] äº¤æ¢ã€‚

å¯å§‹ç»ˆä¿è¯ï¼š æŒ‡é’ˆ ii å·¦è¾¹éƒ½æ˜¯å¥‡æ•°ï¼ŒæŒ‡é’ˆ jj å³è¾¹éƒ½æ˜¯å¶æ•° ã€‚

![image-20220404161217051](lcof.assets/image-20220404161217051.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220404161240739](lcof.assets/image-20220404161240739.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220404161301033](lcof.assets/image-20220404161301033.png)

ä»£ç ï¼š

![image-20220404161323780](lcof.assets/image-20220404161323780.png)

```java
class Solution {
    public int[] exchange(int[] nums) {
        int i = 0, j = nums.length - 1, tmp;
        while(i < j) {
            while(i < j && (nums[i] & 1) == 1) i++;
            while(i < j && (nums[j] & 1) == 0) j--;
            tmp = nums[i];
            nums[i] = nums[j];
            nums[j] = tmp;
        }
        return nums;
    }
}
```

- æˆ‘ï¼šæœ¬ä»£ç å·¦å³åŒæ—¶åŠ¨ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå»æ‰¾å¦ä¸€ä¸ªï¼Œæ—¶é—´å¤æ‚åº¦ä¸€æ ·ï¼›æˆ‘çš„ä»£ç æ²¡æœ‰åŒå¾ªç¯ï¼Œç”šè‡³æ›´ä¼˜é›…äº›ã€‚

- ç½‘å‹ï¼šæœ¬é¢˜è•´å«å¿«é€Ÿæ’åºçš„æ€æƒ³ï¼

### [å‰‘æŒ‡ Offer 57. å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—](https://leetcode-cn.com/problems/he-wei-sde-liang-ge-shu-zi-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public int[] twoSum(int[] nums, int target) {

        /**
        å°½é‡ç”¨ä¸Šâ€œé€’å¢â€è¿™ä¸ªæ¡ä»¶ï¼Œæ±‚å’Œçš„ä¸¤ä¸ªæ•°è‚¯å®šä¸€å¤§ä¸€å°ï¼›å·¦å³ä¸¤ç«¯ä¸¤ä¸ªæŒ‡é’ˆï¼Œæ±‚å’Œï¼Œå€¼å¤§äº†å·¦ç§»å³æŒ‡é’ˆï¼Œå€¼å°äº†å³ç§»å·¦æŒ‡é’ˆ
         */

        //å¤„ç†ç©ºæ•°ç»„
        if(nums.length==0)return new int[0];

        int left=0,right=nums.length-1;
        while(left<right){
            if(nums[left]+nums[right]<target){
                left++;
            }else if(nums[left]+nums[right]>target){
                right--;
            }else{
                //æ³¨æ„æ˜¯è¾“å‡ºå…ƒç´ å€¼ï¼Œè€Œä¸æ˜¯è¾“å‡ºindex
                return new int[]{nums[left],nums[right]};
            }
        }

        //å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›ç©º
        return new int[0];
    }
}
```

#### å®˜æ–¹-å¯¹æ’åŒæŒ‡é’ˆ

è§£é¢˜æ€è·¯ï¼š

![image-20220404164513158](lcof.assets/image-20220404164513158.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220404164531875](lcof.assets/image-20220404164531875.png)

æ­£ç¡®æ€§è¯æ˜ï¼š

![image-20220404164558086](lcof.assets/image-20220404164558086.png)

- æˆ‘ï¼šæ„ä¼šä¸€ä¸‹ï¼Œè¢«æ’é™¤æ‰çš„å…ƒç´ éƒ½æ˜¯ä¸å¯èƒ½æ„æˆç»“æœçš„ã€‚
  - ä»¥åˆå§‹çŠ¶æ€ä¸ºä¾‹ï¼Œå‡è®¾nums[left]+nums[right]<targetï¼Œé‚£ä¹ˆrightå·¦ç§»ï¼Œæœ€å³è¾¹çš„å…ƒç´ è¢«æ’é™¤åœ¨å¯èƒ½çš„ç»“æœé›†ä¹‹å¤–ï¼Œ
  - é‡‡ç”¨åè¯æ³•ï¼Œå¦‚æœå³è¾¹çš„å…ƒç´ ä¸è¯¥è¢«æ’é™¤åœ¨ç»“æœé›†ä¹‹å¤–ï¼Œé‚£ä¹ˆéœ€è¦ä¸€ä¸ªæ¯”leftæ›´å°çš„å…ƒç´ ï¼Œå¯æ˜¯leftå·²ç»æ˜¯æ•°ç»„ä¸­çš„æœ€å°å€¼äº†ï¼Œä¸ä¼šæœ‰æ›´å°çš„å€¼ï¼Œæ‰€ä»¥åä¾‹ä¸å­˜åœ¨ï¼›
  - æ‰€ä»¥è¢«æ’é™¤çš„æœ€å³è¾¹çš„å…ƒç´ ä¸ä¼šæ˜¯è¢«è¯¯æ’é™¤çš„ï¼Œåè¯æ³•è¯æ¯•ã€‚

å¤æ‚åº¦åˆ†æï¼š

![image-20220404164622003](lcof.assets/image-20220404164622003.png)

ä»£ç ï¼š

```java
class Solution {
    public int[] twoSum(int[] nums, int target) {
        int i = 0, j = nums.length - 1;
        while(i < j) {
            int s = nums[i] + nums[j];
            if(s < target) i++;
            else if(s > target) j--;
            else return new int[] { nums[i], nums[j] };
        }
        return new int[0];
    }
}
```

- ç½‘å‹ï¼šæé†’ä¸€ä¸‹ï¼Œåˆ¤æ–­æ¡ä»¶æœ€å¥½ä¸è¦ç”¨ç›¸åŠ åçš„ç»“æœï¼Œåº”è¯¥ç”¨target - nums[i] è·Ÿ nums[j]æ¯”è¾ƒï¼Œè¿™æ ·ä¿è¯ä¸ä¼šæº¢å‡ºã€‚è™½ç„¶è¿™é¢˜ä¸­ä¸ä¼šå‡ºé”™ã€‚åŒæ ·çš„ä¾‹å­è¿˜æœ‰äºŒåˆ†æŸ¥æ‰¾ï¼Œ(left + right) / 2 å¯ä»¥ç”¨left + ((rigth - left) >> 1))ä»£æ›¿ã€‚



### [å‰‘æŒ‡ Offer 58 - I. ç¿»è½¬å•è¯é¡ºåº](https://leetcode-cn.com/problems/fan-zhuan-dan-ci-shun-xu-lcof/)

#### é¦–æˆ˜å¯„

- å†™çš„æ—¶å€™å°±æ„Ÿè§‰è¦æ˜¯ç”¨ä¸€äº›å·¥å…·ç±»ï¼Œçœ‹é¢˜è§£æœç„¶è‡³å°‘è¦ç”¨StringBuilderã€‚

#### å®˜æ–¹1-åŒæŒ‡é’ˆ

ç®—æ³•è§£æï¼š

![image-20220404172111604](lcof.assets/image-20220404172111604.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220404172131469](lcof.assets/image-20220404172131469.png)

ä»£ç ï¼š

```java
class Solution {
    public String reverseWords(String s) {
        s = s.trim(); // åˆ é™¤é¦–å°¾ç©ºæ ¼
        int j = s.length() - 1, i = j;
        StringBuilder res = new StringBuilder();
        while(i >= 0) {
            while(i >= 0 && s.charAt(i) != ' ') i--; // æœç´¢é¦–ä¸ªç©ºæ ¼
            res.append(s.substring(i + 1, j + 1) + " "); // æ·»åŠ å•è¯
            while(i >= 0 && s.charAt(i) == ' ') i--; // è·³è¿‡å•è¯é—´ç©ºæ ¼
            j = i; // j æŒ‡å‘ä¸‹ä¸ªå•è¯çš„å°¾å­—ç¬¦
        }
        return res.toString().trim(); // è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œå› ä¸ºå•è¯å°¾éƒ¨ä¼šè¢«äººä¸ºåŠ ä¸Šç©ºæ ¼
    }
}
```

- æ³¨æ„`str.substing(å·¦é—­,å³å¼€)`å’Œ`StringBuilder`çš„ç”¨æ³•ã€‚

#### å®˜æ–¹2-åˆ†å‰² + å€’åºï¼ˆä¸å»ºè®®ï¼‰

åˆ©ç”¨ â€œå­—ç¬¦ä¸²åˆ†å‰²â€ã€â€œåˆ—è¡¨å€’åºâ€ çš„å†…ç½®å‡½æ•° *ï¼ˆ**é¢è¯•æ—¶ä¸å»ºè®®ä½¿ç”¨**ï¼‰* ï¼Œå¯ç®€ä¾¿åœ°å®ç°æœ¬é¢˜çš„å­—ç¬¦ä¸²ç¿»è½¬è¦æ±‚ã€‚

ç®—æ³•è§£æï¼š

![image-20220404172258931](lcof.assets/image-20220404172258931.png)

![Picture0.png](lcof.assets/9ef4a9ea565bf1c2d9209ca94881a77288f90f222476cfd44c418fa3f2d2d7c1-Picture0.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220404172508237](lcof.assets/image-20220404172508237.png)

ä»£ç ï¼š

```java
class Solution {
    public String reverseWords(String s) {
        String[] strs = s.trim().split(" "); // åˆ é™¤é¦–å°¾ç©ºæ ¼ï¼Œåˆ†å‰²å­—ç¬¦ä¸²
        StringBuilder res = new StringBuilder();
        for(int i = strs.length - 1; i >= 0; i--) { // å€’åºéå†å•è¯åˆ—è¡¨
            if(strs[i].equals("")) continue; // é‡åˆ°ç©ºå•è¯åˆ™è·³è¿‡
            res.append(strs[i] + " "); // å°†å•è¯æ‹¼æ¥è‡³ StringBuilder
        }
        return res.toString().trim(); // è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ é™¤å°¾éƒ¨ç©ºæ ¼ï¼Œå¹¶è¿”å›
    }
}
```

#### å³æ—¶å†æˆ˜æˆåŠŸ

```java
class Solution {
    public String reverseWords(String s) {
        /**
        ç”¨åŒæŒ‡é’ˆçš„é—´è·å®šä½å•è¯ï¼Œç±»ä¼¼åŒæŒ‡é’ˆå–å€’æ•°ç¬¬nä¸ªæ•°ä¸€æ ·
        æŒæ¡substring(så°å†™)ï¼Œ trimï¼Œ StringBuilderï¼Œ toStringï¼ˆså¤§å†™ï¼‰çš„ä½¿ç”¨
         */

        //å…ˆå‰”é™¤é¦–ä½ç©ºæ ¼ï¼Œä¿è¯æŒ‡é’ˆåˆå§‹æŒ‡å‘çš„ä¸æ˜¯ç©ºæ ¼
        s.trim();

        StringBuilder sb= new StringBuilder();
        //ijæƒ³åšå–å•è¯
        int j=s.length()-1,i=j;
        while(i>=0){
            //å–å•è¯ï¼›åŒæ—¶æ³¨æ„é˜²æ­¢ä¸€è·¯i--å¯¼è‡´è¶…è¿‡å­—ç¬¦ä¸²è¾¹ç•Œ
            while(i>=0&&s.charAt(i)!=' ')i--;
            //å•è¯ä»¥ç©ºæ ¼åˆ†å¼€
            sb.append(s.substring(i+1,j+1)+" ");
            //å‰”é™¤å•è¯é—´çš„ç©ºæ ¼ï¼›è¿™é‡Œä¹Ÿéœ€è¦æ‹…å¿ƒè¶…è¿‡å­—ç¬¦ä¸²è¾¹ç•Œï¼Œå› ä¸ºä¸€è·¯æ¸…é™¤ç©ºæ ¼åˆ°i=-1æ—¶ï¼Œè¿˜ä¼šç»§ç»­æ‰§è¡Œæœ¬å†…å­˜whileï¼Œå¯¼è‡´è¶…è¿‡å­—ç¬¦ä¸²è¾¹ç•Œï¼›
            while(i>=0&&s.charAt(i)==' ')i--;
            //ç©ºæ ¼å‰”é™¤å®Œæ¯•åï¼Œiåœåœ¨ä¸‹ä¸€ä¸ªå•è¯çš„å°¾éƒ¨ï¼ŒæŠŠjç§»åŠ¨è¿‡æ¥
            j=i;
        }

        //è¿”å›sbï¼Œè®°å¾—å»é™¤æœ€åå•è¯åé¢çš„ç©ºæ ¼
        return sb.toString().trim();
    }
}
```

- éš¾ç‚¹å‘ç‚¹ï¼š
  - å†…éƒ¨å¾ªç¯é˜²è¶…è¿‡å­—ç¬¦ä¸²è¾¹ç•Œ
  - æŒæ¡substring(så°å†™)ï¼Œ trimï¼Œ StringBuilderï¼Œ toStringï¼ˆså¤§å†™ï¼‰çš„ä½¿ç”¨



## æœç´¢ä¸å›æº¯ç®—æ³•(ä¸­ç­‰)

### [å‰‘æŒ‡ Offer 12. çŸ©é˜µä¸­çš„è·¯å¾„](https://leetcode-cn.com/problems/ju-zhen-zhong-de-lu-jing-lcof/)

#### é¦–æˆ˜å¯„

å®Œå…¨æ— åˆé€‚æ€è·¯

#### å®˜æ–¹-DFS+å‰ªæ

è§£é¢˜æ€è·¯ï¼š

![image-20220405153358478](lcof.assets/image-20220405153358478.png)

DFS è§£æï¼š

![image-20220405153443132](lcof.assets/image-20220405153443132.png)

- æ³¨æ„è¿™é‡Œjavaä¸­ç©ºå­—ç¬¦çš„è¡¨è¾¾æ–¹å¼

å¤æ‚åº¦åˆ†æï¼š

![image-20220405153605776](lcof.assets/image-20220405153605776.png)

ä»£ç ï¼š

```java
class Solution {
    public boolean exist(char[][] board, String word) {
        char[] words = word.toCharArray();
        for(int i = 0; i < board.length; i++) {
            for(int j = 0; j < board[0].length; j++) {
                if(dfs(board, words, i, j, 0)) return true;
            }
        }
        return false;
    }
    boolean dfs(char[][] board, char[] word, int i, int j, int k) {
        if(i >= board.length || i < 0 || j >= board[0].length || j < 0 || board[i][j] != word[k]) return false;
        if(k == word.length - 1) return true;
        board[i][j] = '\0';
        boolean res = dfs(board, word, i + 1, j, k + 1) || dfs(board, word, i - 1, j, k + 1) || 
                      dfs(board, word, i, j + 1, k + 1) || dfs(board, word, i , j - 1, k + 1);
        board[i][j] = word[k];
        return res;
    }
}
```

- æ³¨æ„ç‚¹ï¼š
  - æ³¨æ„javaä¸­ç©ºå­—ç¬¦çš„è¡¨ç¤ºï¼›é¢˜ç›®è¯´æ•°ç»„åªæœ‰è‹±æ–‡å¤§å°å†™å­—æ¯ï¼Œç©ºå­—ç¬¦å°±èƒ½å’ŒåŸæœ¬çš„å­—ç¬¦åŒºåˆ†å¼€ã€‚[å‚è€ƒ](http://t.csdn.cn/E8dER)ã€‚
  - String è½¬ä¸ºCharArrayçš„æ–¹æ³•ï¼šstr.toCharArray()
  - å¦‚ä½•è§£å†³â€œæœ¬è½®é€’å½’æŠŠå…ƒç´ ç½®ä½ç©ºå­—ç¬¦åï¼Œä¸å½±å“ä¸‹ä¸€è½®é€’å½’â€ï¼Œå³åœ¨æœ¬è½®é€’å½’åç”¨`board[i][j] = word[k];`æŠŠä¿®æ”¹è¿˜åŸã€‚

- æˆ‘ï¼šæ„Ÿè§‰å°±æ˜¯æš´åŠ›ç®—æ³•å•Šï¼Œï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ·±åº¦é€’å½’ï¼›ä¸è¿‡è¿™é¢˜è¦æ±‚å¾—åˆ°ç›®æ ‡å­—ç¬¦ä¸²é¡ºåºçš„è·¯å¾„ï¼Œåº”è¯¥ä¹Ÿåªèƒ½æš´åŠ›é€’å½’

#### åŠæ—¶å†æˆ˜åŠå¯„

```java
class Solution {
    public boolean exist(char[][] board, String word) {
        /**
        å› ä¸ºè¦æ±‚å­—ç¬¦ä¸²çš„é¡ºåºï¼Œæ‰€ä»¥åªèƒ½æš´åŠ›+æ·±åº¦é€’å½’
         */
        //æŠŠå­—ç¬¦ä¸²è½¬åŒ–æˆcharArrrayå¤‡ç”¨
        char[] wordch=word.toCharArray();
        //é¢˜ç›®è§„å®šäº†boardä¸ä¸ºç©ºæ•°ç»„
        for(int i=0;i<board.length;i++){
            for(int j=0;j<board[0].length;j++){
                //å¯¹äºæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ ï¼Œå¼€å§‹æ·±åº¦é€’å½’;æœ€åä¸€ä¸ªå‚æ•°kè®°å½•åŒ¹é…åˆ°wordchçš„ç¬¬å‡ ä¸ªå­—ç¬¦äº†ã€‚å¦‚æœæœ¬è·¯åŠ²ä¸ºå¤´é€’å½’æˆåŠŸï¼Œç›´æ¥è¿”å›trueï¼Œå¦åˆ™ä»¥boardçš„ç›˜é¢çš„å¦ä¸€ä¸ªå­—ç¬¦å¼€å§‹æ–°é€’å½’å°è¯•ã€‚
                if(recur(board,wordch,i,j,0))
                    return true;
            }
        }

        //æ•´ä¸ªboardé€’å½’å®Œéƒ½æ²¡æ•ˆæœçš„è¯ï¼Œè¿”å›false
        return false;

    }
    /**
    è‡ªå·±æ„é€ æ·±åº¦é€’å½’å‡½æ•°
     */
    public boolean recur(char[][] board, char[] wordch,int i,int j,int k){
        //åˆ¤æ–­æ­¤è·¯ä¸é€šï¼Œå³å‰ªæã€‚æ³¨æ„å…ˆåˆ¤æ–­ijçš„èŒƒå›´å†åˆ¤æ–­boardijçš„å€¼ï¼Œè¿™æ ·ä¸ä¼šè¶…è¿‡æ•°ç»„è¾¹ç•Œã€‚
        if(i<0||i>board.length-1||j<0||j>board[0].length-1||board[i][j]!=wordch[k]){
            return false;
        }
        //å¦‚æœä¸Šé¢çš„ifæ²¡é€€å‡ºï¼Œé‚£ä¹ˆè¯´æ˜å½“å‰å­—ç¬¦æ¯”å¯¹æ²¡é—®é¢˜ï¼›è¿™æ—¶å‘ç°wordchå…¨éƒ¨æ¯”å¯¹å®Œæ¯•äº†ï¼Œå°±å¯ä»¥è¿”å›trueï¼›æ³¨æ„è¿™é‡Œè¦ç”¨wordch.length-1ï¼Œåˆ«æ¼æ‰-1
        if(k==wordch.length-1){
            return true;
        }

        //ç©ºå­—ç¬¦ä¸²æ ‡è®°å½“å‰å­—ç¬¦ï¼Œè¡¨ç¤ºä»¥è®¿é—®è¿‡ï¼Œé˜²æ­¢æœ¬è½®é€’å½’å†æ¬¡è®¿é—®ï¼›æ•°ç»„ä¼ é€’çš„æ˜¯åœ°å€ï¼Œå‡½æ•°å†…ä¿®æ”¹æ•°ç»„ä¼šåŒæ—¶å½±å“å‡½æ•°å¤–ï¼›\æ˜¯xçš„ç¬¬ä¸€ç”»ï¼Œç§°ä¸ºåæ–œæ ã€‚
        board[i][j]='\0';
        //å¦‚æœåˆä¸èƒ½è¿”å›ï¼Œå½“å‰å­—ç¬¦æ¯”å¯¹åˆæ²¡é”™ï¼Œå°±è¿›è¡Œæ›´æ·±åº¦çš„é€’å½’(æœå¦å¤–çš„å››ä¸ªæ–¹å‘ï¼Œä¸è¿‡æ¥æ—¶çš„æ–¹å‘ä¼šä¸€è¿›å»ä¼šè¿”å›false)ï¼›å› ä¸ºè¦ä¿®å¤boardijçš„å€¼ï¼Œæ‰€ä»¥è¦æš‚å­˜recurçš„å€¼
        boolean tempb= recur(board,wordch,i-1,j,k+1)||recur(board,wordch,i+1,j,k+1)||recur(board,wordch,i,j-1,k+1)||recur(board,wordch,i,j+1,k+1);
        //æœ¬å±‚æ¬¡æ›´æ·±çš„é€’å½’ç»“æŸåï¼ŒæŠŠboardijè¿˜åŸï¼Œé˜²æ­¢å½±å“ä¸Šå±‚é€’å½’çš„å…¶ä»–æ–¹å‘;èƒ½èµ°åˆ°è¿™ä¸ªä½ç½®è¯´æ˜board[i][j]==wordch[k]
        board[i][j]=wordch[k];

        //è¿”å›é€’å½’çš„ç»“æœ
        return tempb;
    }
}
```

- æ€è·¯éƒ½æœ‰ï¼Œä½†æ˜¯çŠ¯äº†ä¸¤ä¸ªé”™è¯¯ï¼š

  - wordchåˆ¤æ–­ç»“æŸé•¿åº¦æ—¶ç”¨äº†è¶…è¿‡wordchè¾¹ç•Œçš„wordch.lengthï¼Œè€Œæ²¡æ­£ç¡®ä½¿ç”¨wordch.length-1

  - å¿˜è®°ç”¨ç©ºå­—ç¬¦ä¸²æ ‡è®°æœ¬æ¬¡é€’å½’è®¿é—®è¿‡çš„å­—ç¬¦äº†ï¼Œæäº¤å®Œçœ‹åˆ°é”™è¯¯æ¡ˆä¾‹æ‰æ˜ç™½ã€‚



### [å‰‘æŒ‡ Offer 13. æœºå™¨äººçš„è¿åŠ¨èŒƒå›´](https://leetcode-cn.com/problems/ji-qi-ren-de-yun-dong-fan-wei-lcof/)

#### é¦–æˆ˜å¯„

```java
class Solution {
    public int movingCount(int m, int n, int k) {
        /**
        æš´åŠ›æ·±åº¦é€’å½’ï¼ŒæŠŠè®¿é—®è¿‡çš„å­—ç¬¦æ ‡è®°å¹¶ä¸”ä¸æ“¦é™¤ï¼Œæœ€åç»Ÿè®¡è¢«æ ‡è®°çš„å­—ç¬¦æ•°ï¼›å¯è®¿é—®å—å¯èƒ½è¢«ä¸å¯è®¿é—®å—åŒ…å›´ï¼Œé€ æˆä¸å¯è®¿é—®çš„ç°è±¡ã€‚
        ä¸èƒ½ç”¨booleanæ•°ç»„è®°å½•ï¼Œå› ä¸ºæœ‰é»˜è®¤å€¼ï¼Œæ— æ³•åŒºåˆ†æ˜¯è®¤ä¸ºæ ‡è®°çš„è¿˜æ˜¯é»˜è®¤çš„ï¼›è¿˜æ˜¯ç”¨intè®°å½•å§
        1ï¼šå¯è®¿é—®åˆ°
        -1ï¼šä¸å¯è®¿é—®
        0ï¼šè¢«-1åŒ…å›´å¯¼è‡´æ— æ³•è¢«è®¿é—®
        éå†çš„æ—¶å€™åªè€ƒè™‘1çš„ä¸ªæ•°å³å¯
         */
        int [][] board=new int[m][n];
        recur(board,m,n,k,0,0);

        //å¾—åˆ°å¯è¢«åˆ°è¾¾çš„æ•°ç›®
        int result=0;
        for(int i=0;i<board.length;i++){
            for(int j=0;j<board[0].length;j++){
                System.out.println("å½“å‰å…ƒç´ ä¸ºï¼š"+board[i][j]);
                if(board[i][j]==1){
                    result++;
                }
            }
        }

        return result;
    }

    /**
    å‚æ•°è®²è§£ï¼š
    boardï¼šå…¨å±€äºŒç»´æ•°ç»„
    mï¼šæœ€å¤§è¡Œ
    nï¼šæœ€å¤§åˆ—
    kï¼šé™åˆ¶
    iï¼šå½“å‰è¡Œ
    jï¼šå½“å‰åˆ—
     */
    public void recur(int [][] board,int m,int n,int k,int i, int j){
        System.out.println("è¿›å…¥äº†recurï¼Œæ­¤æ—¶i:"+i+" j:"+j);
        //ä¸‹æ ‡ä¸ç¬¦åˆè¦æ±‚çš„ï¼Œç›´æ¥è¿”å›
        if(i<0||i>m-1||j<0||j>n-1){
            System.out.println("ä¸‹æ ‡ä¸å¯¹");
            return;
        }
        //å¦‚æœå·²ç»æ ‡è®°è¿‡ï¼Œè¯´æ˜æ—©è¢«å¤„ç†è¿‡çš„ï¼Œç›´æ¥è¿”å›
        if(board[i][j]==1||board[i][j]==-1){
            System.out.println("è¢«å¤„ç†è¿‡");
            return;
        }

        //å¦‚æœæ²¡æœ‰è¢«æ ‡è®°è¿‡ï¼Œåˆ™å¤„ç†æœ¬å…ƒç´ 
        //è®°å½•æ•°ä½ä¹‹å’Œ
        int isum=0,jsum=0;
        while(i/10>0){
            int temp=i%10;
            isum+=temp;
            i/=10;
        }
        //å•ç‹¬å¤„ç†ä¸€ä¸‹m/10==0æ—¶çš„ä¸ªä½æ•°çš„m
        isum+=i;
        while(j/10>0){
            int temp=j%10;
            jsum+=temp;
            j/=10;
        }
        //å•ç‹¬å¤„ç†ä¸€ä¸‹m/10==0æ—¶çš„ä¸ªä½æ•°çš„m
        jsum+=j;
        //æ ¹æ®æ•°ä½ä¹‹å’Œåšæ ‡è®°
        if(isum+jsum>k){
            System.out.println("è¿™ä¸ªä¸æ˜¯");
            board[i][j]=-1;
        }else{
            System.out.println("æ‰¾åˆ°äº†");
            board[i][j]=1;
        }

        //æœ¬å…ƒç´ å¤„ç†å®Œåï¼Œé€’å½’å¤„ç†å‘¨è¾¹å…ƒç´ 
        recur(board,m,n,k,i-1,j);
        recur(board,m,n,k,i+1,j);
        recur(board,m,n,k,i,j-1);
        recur(board,m,n,k,i,j+1);
    }
}
```

- é—®ç­”é—®ï¼šæŒ‰ç…§è‡ªå·±çš„æ€è·¯ï¼Œæ²¡å‘ç°ä»€ä¹ˆé”™è¯¯ï¼Œä¹Ÿé€šè¿‡äº†32/49çš„æµ‹è¯•æ¡ˆä¾‹ï¼›ä¸è¿‡m==11,n==8,k==16çš„æ¡ˆä¾‹å°±æ²¡é€šè¿‡
  - æˆ‘ï¼šé—®é¢˜æœ‰ä¸¤ä¸ªï¼š
    - `if(isum+jsum>k)`ä¸­ï¼Œæ—¢ç„¶ä¸ç¬¦åˆå°±è¯¥åŠæ—¶è¿”å›
    - æœ€è‡´å‘½çš„é”™è¯¯ï¼š`if(isum+jsum>k)å’Œelse`ä¸­ç»™`board[i][j]`å¤åˆ¶ï¼Œæˆ‘è¿™é‡Œèµ‹å‚æ•°çš„iä¸æ˜¯ä¼ è¿›æ¥çš„iï¼Œå› ä¸ºä¸­é—´æ‰§è¡Œäº†iè‡ªé™¤ï¼ï¼æ‰€ä»¥å‡ºç°äº†m>10å°±ä¼šå‘ç”Ÿå’Œé¢„æœŸç»“æœä¸ä¸€è‡´ï¼Œå› ä¸ºm>10åiæœ€å¤§å°±ä¼šè¶…è¿‡9ï¼Œå³iä¼šå¤§äºç­‰äº10ï¼Œå°±ä¼šå‡ºå‘iè‡ªé™¤ï¼Œå°±ä¼šå¯¼è‡´boardå¡«æ•°é”™è¯¯ã€‚è¿™ä¹Ÿå°±è§£é‡Šäº†ï¼šæ±‚æ•°ä½å’Œçš„ç®—æ³•æ²¡é”™ï¼Œä¸ºä»€ä¹ˆæœ€åboardçš„ç»“æœè¿˜ä¸ä¸€è‡´ï¼›æ±‚å’Œæ˜¯å¯¹çš„ï¼Œä½†æ˜¯æœ€åboardè®°å½•çš„ä½ç½®é”™äº†ï¼ã€‚
      - å¤§ç¥è¯„è®ºï¼šè‡ªé™¤è¿™ç§æ“ä½œï¼Œè¦å°å¿ƒï¼›æœ‰çš„æ—¶å€™å®å¯å¤šä¸€ä¸ªå˜é‡ä¹Ÿåˆ«å°‘ä¸€ä¸ªå˜é‡ã€‚

æ ¹æ®è‡ªå·±å‘ç°çš„ä¸¤å¤„é”™è¯¯ï¼Œç•¥å¾®ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼Œå³æˆåŠŸæäº¤ï¼ï¼š

```java
class Solution {
    public int movingCount(int m, int n, int k) {
        /**
        æš´åŠ›æ·±åº¦é€’å½’ï¼ŒæŠŠè®¿é—®è¿‡çš„å­—ç¬¦æ ‡è®°å¹¶ä¸”ä¸æ“¦é™¤ï¼Œæœ€åç»Ÿè®¡è¢«æ ‡è®°çš„å­—ç¬¦æ•°ï¼›å¯è®¿é—®å—å¯èƒ½è¢«ä¸å¯è®¿é—®å—åŒ…å›´ï¼Œé€ æˆä¸å¯è®¿é—®çš„ç°è±¡ã€‚
        ä¸èƒ½ç”¨booleanæ•°ç»„è®°å½•ï¼Œå› ä¸ºæœ‰é»˜è®¤å€¼ï¼Œæ— æ³•åŒºåˆ†æ˜¯è®¤ä¸ºæ ‡è®°çš„è¿˜æ˜¯é»˜è®¤çš„ï¼›è¿˜æ˜¯ç”¨intè®°å½•å§
        1ï¼šå¯è®¿é—®åˆ°
        -1ï¼šä¸å¯è®¿é—®
        0ï¼šè¢«-1åŒ…å›´å¯¼è‡´æ— æ³•è¢«è®¿é—®
        éå†çš„æ—¶å€™åªè€ƒè™‘1çš„ä¸ªæ•°å³å¯
         */
        int [][] board=new int[m][n];
        recur(board,m,n,k,0,0);

        //å¾—åˆ°å¯è¢«åˆ°è¾¾çš„æ•°ç›®
        int result=0;
        for(int i=0;i<board.length;i++){
            for(int j=0;j<board[0].length;j++){
                //System.out.println("å½“å‰å…ƒç´ ä¸ºï¼š"+board[i][j]);
                if(board[i][j]==1){
                    result++;
                }
            }
        }

        return result;
    }

    /**
    å‚æ•°è®²è§£ï¼š
    boardï¼šå…¨å±€äºŒç»´æ•°ç»„
    mï¼šæœ€å¤§è¡Œ
    nï¼šæœ€å¤§åˆ—
    kï¼šé™åˆ¶
    iï¼šå½“å‰è¡Œ
    jï¼šå½“å‰åˆ—
     */
    public void recur(int [][] board,int m,int n,int k,int i, int j){
        //System.out.println("è¿›å…¥äº†recurï¼Œæ­¤æ—¶i:"+i+" j:"+j);
        //ä¸‹æ ‡ä¸ç¬¦åˆè¦æ±‚çš„ï¼Œç›´æ¥è¿”å›
        if(i<0||i>m-1||j<0||j>n-1){
            //System.out.println("ä¸‹æ ‡ä¸å¯¹");
            return;
        }
        //å¦‚æœå·²ç»æ ‡è®°è¿‡ï¼Œè¯´æ˜æ—©è¢«å¤„ç†è¿‡çš„ï¼Œç›´æ¥è¿”å›
        if(board[i][j]==1||board[i][j]==-1){
            //System.out.println("è¢«å¤„ç†è¿‡");
            return;
        }

        //å¦‚æœæ²¡æœ‰è¢«æ ‡è®°è¿‡ï¼Œåˆ™å¤„ç†æœ¬å…ƒç´ 
        //è®°å½•æ•°ä½ä¹‹å’Œ
        int isum=0,jsum=0;
        //ä¿å­˜ij
        int storedi=i,storedj=j;
        while(i/10>0){
            int temp=i%10;
            isum+=temp;
            i/=10;
        }
        //å•ç‹¬å¤„ç†ä¸€ä¸‹m/10==0æ—¶çš„ä¸ªä½æ•°çš„m
        isum+=i;
        while(j/10>0){
            int temp=j%10;
            jsum+=temp;
            j/=10;
        }
        //å•ç‹¬å¤„ç†ä¸€ä¸‹m/10==0æ—¶çš„ä¸ªä½æ•°çš„m
        jsum+=j;
        //æ ¹æ®æ•°ä½ä¹‹å’Œåšæ ‡è®°
        if(isum+jsum>k){
            //System.out.println("è¿™ä¸ªä¸æ˜¯");
            board[storedi][storedj]=-1;
            //åˆ«å¿˜äº†åœ¨ä¸åˆæ³•çš„æ—¶å€™return
            return;
        }else{
            //System.out.println("æ‰¾åˆ°äº†");
            board[storedi][storedj]=1;
        }

        //æœ¬å…ƒç´ å¤„ç†å®Œåï¼Œé€’å½’å¤„ç†å‘¨è¾¹å…ƒç´ 
        recur(board,m,n,k,storedi-1,storedj);
        recur(board,m,n,k,storedi+1,storedj);
        recur(board,m,n,k,storedi,storedj-1);
        recur(board,m,n,k,storedi,storedj+1);
    }
}
```



#### é«˜èµå¤§ä½¬è¯„è®ºè§£æ³•-ç±»ä¼¼æˆ‘

å®˜æ–¹è¯„è®ºé‡Œæœ‰ä¸€ä¸ªå’Œæˆ‘ä»£ç ç±»ä¼¼çš„ï¼Œå¯ä»¥å¯¹ç…§ä¸‹çœ‹çœ‹å“ªé”™äº†ï¼š

```java
class Solution {
    public int movingCount(int m, int n, int k) {
        boolean[][] visited = new boolean[m][n];
        return dfs(0, 0, m, n, k, visited);
    }

    private int dfs(int i, int j, int m, int n, int k, boolean visited[][]) {
        if (i < 0 || i >= m || j < 0 || j >= n || (i/10 + i%10 + j/10 + j%10) > k || visited[i][j]) {
            return 0;
        }
        visited[i][j] = true;
        return dfs(i + 1, j, m, n, k, visited) + dfs(i - 1, j, m, n, k, visited) + 
               dfs(i, j + 1, m, n, k, visited) + dfs(i, j - 1, m, n, k, visited) + 1;
    }
}
```

- æˆ‘å’Œç½‘å‹é—®ï¼š(i/10 + i%10 + j/10 + j%10) å½“ i = 100 j =100çš„æ—¶å€™ä¸å°± ä¸æˆç«‹äº†å—ï¼Ÿ
  - ç½‘å‹ç­”ï¼šä¸‹æ ‡æœ€å¤§æ˜¯99ï¼Œæ‰€æœ‰ä¸ä¼šå‡ºç°100
- ç½‘å‹é—®ï¼šä¸ºä»€ä¹ˆåˆ¤æ–­æ¡ä»¶è¿˜è¦åŠ ä¸Šå½“å‰è¿™ä¸ªä½ç½®visited[i][j]ï¼Œä¸åŠ ä¸Šå°±ä¸å¯¹ï¼Œè¿™ä¸ªæ—¶å€™çš„è¿™ä¸ªå€¼æ²¡æœ‰å®šä¹‰ï¼Œè‚¯å®šæ˜¯falseå•Š
  - æˆ‘ç­”ï¼šæ²¡è¢«è®¿é—®è¿‡ä¸ºé»˜è®¤çš„falseï¼Œæ‰€ä»¥ä¼šå¾€ä¸‹èµ°ï¼›å¦‚æœè¢«è®¿é—®è¿‡å³ä¸ºtrueï¼Œåˆ™ä¼šreturnè€Œä¸ä¼šå¾€ä¸‹èµ°ã€‚

#### å®˜æ–¹-BFS/DFSåˆå§‹åˆ†æ

- æˆ‘ï¼šè¿™ä¸¤ä¸ªè§£æ³•ç°åœºå¾ˆéš¾æƒ³åˆ°â€œå¢é‡å…¬å¼â€çš„æ€è·¯ï¼Œä¸ªäººä¸å»ºè®®

è§£é¢˜æ€è·¯ï¼š

- æœ¬é¢˜ä¸ [çŸ©é˜µä¸­çš„è·¯å¾„](https://leetcode-cn.com/problems/ju-zhen-zhong-de-lu-jing-lcof/solution/mian-shi-ti-12-ju-zhen-zhong-de-lu-jing-shen-du-yo/) ç±»ä¼¼ï¼Œæ˜¯å…¸å‹çš„æœç´¢ & å›æº¯é—®é¢˜ã€‚åœ¨ä»‹ç»å›æº¯ç®—æ³•ç®—æ³•å‰ï¼Œä¸ºæå‡è®¡ç®—æ•ˆç‡ï¼Œé¦–å…ˆè®²è¿°ä¸¤é¡¹å‰ç½®å·¥ä½œï¼š **æ•°ä½ä¹‹å’Œè®¡ç®—** ã€ **å¯è¾¾è§£åˆ†æ** ã€‚

æ•°ä½ä¹‹å’Œè®¡ç®—ï¼š

![image-20220405194741529](lcof.assets/image-20220405194741529.png)

```java
int sums(int x)
    int s = 0;
    while(x != 0) {
        s += x % 10;
        x = x / 10;
    }
    return s;

```

![image-20220405194811250](lcof.assets/image-20220405194811250.png)

æ•°ä½å’Œå¢é‡å…¬å¼:

![image-20220405194840568](lcof.assets/image-20220405194840568.png)

![image-20220405194851009](lcof.assets/image-20220405194851009.png)

ä»¥ä¸‹ä»£ç ä¸ºå¢é‡å…¬å¼çš„ä¸‰å…ƒè¡¨è¾¾å¼å†™æ³•ï¼Œå°†æ•´åˆå…¥æœ€ç»ˆä»£ç ä¸­ã€‚

```java
(x + 1) % 10 != 0 ? s_x + 1 : s_x - 8;
```

å¯è¾¾è§£åˆ†æï¼š

![image-20220405195157201](lcof.assets/image-20220405195157201.png)

![image-20220405195214003](lcof.assets/image-20220405195214003.png)

#### å®˜æ–¹-DFS

![image-20220405195255693](lcof.assets/image-20220405195255693.png)

![image-20220405195324541](lcof.assets/image-20220405195324541.png)

ä»£ç ï¼š

```java
class Solution {
    int m, n, k;
    boolean[][] visited;
    public int movingCount(int m, int n, int k) {
        this.m = m; this.n = n; this.k = k;
        this.visited = new boolean[m][n];
        return dfs(0, 0, 0, 0);
    }
    public int dfs(int i, int j, int si, int sj) {
        if(i >= m || j >= n || k < si + sj || visited[i][j]) return 0;
        visited[i][j] = true;
        return 1 + dfs(i + 1, j, (i + 1) % 10 != 0 ? si + 1 : si - 8, sj) + dfs(i, j + 1, si, (j + 1) % 10 != 0 ? sj + 1 : sj - 8);
    }
}
```

- Java/C++ ä»£ç ä¸­ `visited` ä¸ºè¾…åŠ©çŸ©é˜µï¼Œ

#### å®˜æ–¹-BFS

![image-20220405195545232](lcof.assets/image-20220405195545232.png)

![image-20220405195559049](lcof.assets/image-20220405195559049.png)

ä»£ç ï¼š

```java
class Solution {
    public int movingCount(int m, int n, int k) {
        boolean[][] visited = new boolean[m][n];
        int res = 0;
        Queue<int[]> queue= new LinkedList<int[]>();
        queue.add(new int[] { 0, 0, 0, 0 });
        while(queue.size() > 0) {
            int[] x = queue.poll();
            int i = x[0], j = x[1], si = x[2], sj = x[3];
            if(i >= m || j >= n || k < si + sj || visited[i][j]) continue;
            visited[i][j] = true;
            res ++;
            queue.add(new int[] { i + 1, j, (i + 1) % 10 != 0 ? si + 1 : si - 8, sj });
            queue.add(new int[] { i, j + 1, si, (j + 1) % 10 != 0 ? sj + 1 : sj - 8 });
        }
        return res;
    }
}
```

- Java/C++ ä»£ç ä¸­ `visited` ä¸ºè¾…åŠ©çŸ©é˜µ

#### åŠæ—¶å†æˆ˜æˆåŠŸ

æ²¡æœ‰ç”¨å®˜æ–¹çš„è§£æ³•ï¼Œç”¨æˆ‘+å¤§ä½¬çš„æ€è·¯ï¼Œä¿®æ”¹äº†ä¸‹åˆ¤æ–­kçš„æ¡ä»¶å°±æˆåŠŸäº†ï¼›çœ‹æ¥ä¹‹å‰ç¡®å®åˆ¤æ–­kçš„ç®—æ³•æœ‰æ¼æ´ã€‚

```java
class Solution {
    public int movingCount(int m, int n, int k) {
        /**
        æš´åŠ›æ·±åº¦é€’å½’ï¼ŒæŠŠè®¿é—®è¿‡çš„å­—ç¬¦æ ‡è®°å¹¶ä¸”ä¸æ“¦é™¤ï¼Œæœ€åç»Ÿè®¡è¢«æ ‡è®°çš„å­—ç¬¦æ•°ï¼›å¯è®¿é—®å—å¯èƒ½è¢«ä¸å¯è®¿é—®å—åŒ…å›´ï¼Œé€ æˆä¸å¯è®¿é—®çš„ç°è±¡ã€‚
        ä¸èƒ½ç”¨booleanæ•°ç»„è®°å½•ï¼Œå› ä¸ºæœ‰é»˜è®¤å€¼ï¼Œæ— æ³•åŒºåˆ†æ˜¯è®¤ä¸ºæ ‡è®°çš„è¿˜æ˜¯é»˜è®¤çš„ï¼›è¿˜æ˜¯ç”¨intè®°å½•å§
        1ï¼šå¯è®¿é—®åˆ°
        -1ï¼šä¸å¯è®¿é—®
        0ï¼šè¢«-1åŒ…å›´å¯¼è‡´æ— æ³•è¢«è®¿é—®
        éå†çš„æ—¶å€™åªè€ƒè™‘1çš„ä¸ªæ•°å³å¯
         */
        int [][] board=new int[m][n];
        recur(board,m,n,k,0,0);

        //å¾—åˆ°å¯è¢«åˆ°è¾¾çš„æ•°ç›®
        int result=0;
        for(int i=0;i<board.length;i++){
            for(int j=0;j<board[0].length;j++){
                System.out.println("å½“å‰å…ƒç´ ä¸ºï¼š"+board[i][j]);
                if(board[i][j]==1){
                    result++;
                }
            }
        }

        return result;
    }

    /**
    å‚æ•°è®²è§£ï¼š
    boardï¼šå…¨å±€äºŒç»´æ•°ç»„
    mï¼šæœ€å¤§è¡Œ
    nï¼šæœ€å¤§åˆ—
    kï¼šé™åˆ¶
    iï¼šå½“å‰è¡Œ
    jï¼šå½“å‰åˆ—
     */
    public void recur(int [][] board,int m,int n,int k,int i, int j){
        //System.out.println("è¿›å…¥äº†recurï¼Œæ­¤æ—¶i:"+i+" j:"+j);
        //ä¸‹æ ‡ä¸ç¬¦åˆè¦æ±‚çš„ï¼Œç›´æ¥è¿”å›
        if(i<0||i>m-1||j<0||j>n-1){
            //System.out.println("ä¸‹æ ‡ä¸å¯¹");
            return;
        }
        //å¦‚æœå·²ç»æ ‡è®°è¿‡ï¼Œè¯´æ˜æ—©è¢«å¤„ç†è¿‡çš„ï¼Œç›´æ¥è¿”å›
        if(board[i][j]==1||board[i][j]==-1){
            //System.out.println("è¢«å¤„ç†è¿‡");
            return;
        }

        // //å¦‚æœæ²¡æœ‰è¢«æ ‡è®°è¿‡ï¼Œåˆ™å¤„ç†æœ¬å…ƒç´ 
        // //è®°å½•æ•°ä½ä¹‹å’Œ
        // int isum=0,jsum=0;
        // while(i/10>0){
        //     int temp=i%10;
        //     isum+=temp;
        //     i/=10;
        // }
        // //å•ç‹¬å¤„ç†ä¸€ä¸‹m/10==0æ—¶çš„ä¸ªä½æ•°çš„m
        // isum+=i;
        // while(j/10>0){
        //     int temp=j%10;
        //     jsum+=temp;
        //     j/=10;
        // }
        // jsum+=j;
        // //æ ¹æ®æ•°ä½ä¹‹å’Œåšæ ‡è®°
        // if(isum+jsum>k){
        //     System.out.println("è¿™ä¸ªä¸æ˜¯");
        //     board[i][j]=-1;
        // }else{
        //     System.out.println("æ‰¾åˆ°äº†");
        //     board[i][j]=1;
        // }
        if(i/10 + i%10 + j/10 + j%10>k){
            board[i][j]=-1;
            return ;
        }else{
            board[i][j]=1;
        }


        //æœ¬å…ƒç´ å¤„ç†å®Œåï¼Œé€’å½’å¤„ç†å‘¨è¾¹å…ƒç´ 
        recur(board,m,n,k,i-1,j);
        recur(board,m,n,k,i+1,j);
        recur(board,m,n,k,i,j-1);
        recur(board,m,n,k,i,j+1);
    }
}
```

- æ³¨æ„ï¼šé¢˜ç›®è¯´må’Œnå¯ä»¥ä¸º100ï¼Œä½†æ˜¯æ•°ç»„ä¸‹æ ‡ä¸ºm-1å’Œn-1ï¼Œæœ€å¤š2ä½æ•°ã€‚

- ä¹‹åæ¨èâ€œé«˜èµå¤§ä½¬è¯„è®ºè§£æ³•â€çš„åšæ³•ï¼Œæ•ˆç‡é«˜ï¼š
  - ä»–åªç”¨booleanæ ‡è®°å·²è®¿é—®ï¼Œæ˜¯å› ä¸ºå®ƒç›´æ¥ç”¨dfsè¿”å›å€¼äº†ï¼Œè¯´æ˜æœ¬èº«è¿”å›çš„å€¼å°±æ˜¯æ‰€æœ‰å¯è¾¾å…ƒç´ çš„å€¼ï¼›ä½†æ˜¯æˆ‘è¿™è§£æ³•è¦éå†ä¸€ébooleanæ•°ç»„ï¼Œä¸çŸ¥é“æœ‰å“ªäº›æ˜¯ä¸å¯è¾¾ï¼ˆè¢«ä¸åˆæ³•åŒ…å›´äº†å¯¼è‡´è¿‡ä¸å»ï¼‰ï¼Œæœ‰å“ªäº›æ˜¯å¯è¾¾ä½†ä¸åˆæ³•ï¼Œæ‰€ä»¥æˆ‘è‡³å°‘éœ€è¦ä¸‰ä¸ªçŠ¶æ€æ¥è®°å½•ï¼Œbooleanå°±ä¸åˆé€‚äº†ã€‚

- è‡³äºä¸ºä»€ä¹ˆè‡ªå·±çš„ç®—æ³•ä¸è¡Œï¼Œå‚è§â€œé¦–æˆ˜å¯„â€

### [å‰‘æŒ‡ Offer 34. äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„](https://leetcode-cn.com/problems/er-cha-shu-zhong-he-wei-mou-yi-zhi-de-lu-jing-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode() {}
 *     TreeNode(int val) { this.val = val; }
 *     TreeNode(int val, TreeNode left, TreeNode right) {
 *         this.val = val;
 *         this.left = left;
 *         this.right = right;
 *     }
 * }
 */
class Solution {
    //å»ºç«‹å…¨å±€åˆ—è¡¨ä¾¿äºæ“ä½œ
    List<List<Integer>>result=new LinkedList<>();
    public List<List<Integer>> pathSum(TreeNode root, int target) {
        /**
        5000*1000<2çš„9æ¬¡æ–¹ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒæ•°ç»„å€¼æ±‚å’Œå¯¼è‡´è¶…è¿‡æ•´æ•°è¾¹ç•Œ

        åˆæ­¥æ€è·¯ï¼šdfs+å‰ªæ
         */
        recur(root,target,new LinkedList<>());

        return result;
    }
    public void recur(TreeNode root, int target, Deque<Integer> way){
        //è¿”å›å€¼å¤„ç†  
        if(root==null){//æ³¨æ„èŠ‚ç‚¹å¯ä»¥ä¸ºè´Ÿæ•°ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨target<root.valåˆ¤æ–­è·¯å¾„ä¸é€š;æ­¤æ­¥è¿˜å¯ä»¥é˜²æ­¢åé¢æ“ä½œç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚
            return;
        }else if(target==root.val&&root.left==null&&root.right==null){//æ‰¾åˆ°åˆç†è·¯å¾„;æ³¨æ„å•å•target==root.valè¿˜ä¸å¤Ÿï¼Œé¢˜ç›®è¦æ±‚æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·¯å¾„
            //æŠŠæœ¬å…ƒç´ å‹å…¥wayï¼Œå†æŠŠwayå‹å…¥å…¨å±€resultä¸­;æŠŠlinkedlistå®ç°çš„dequeå¼ºè½¬ä¸ºlist
            way.offerLast(root.val);
            //!!!ä¸èƒ½ç›´æ¥result.add((List<Integer>)way);å­˜èŠ‚ç‚¹ï¼Œè¿™æ ·wayä¸­ä¿®æ”¹å¢åˆ èŠ‚ç‚¹ä¼šå½±å“resultï¼Œåº”è¯¥ç”¨newå¦ç»™ç©ºé—´æˆç«‹æ–°å¯¹è±¡ã€‚
            result.add(new LinkedList<>((List<Integer>)way));
            //æŠŠwayä¸­æœ¬å…ƒç´ å–å‡ºæ¥ï¼Œé¿å…å½±å“å…¶ä»–å…„å¼Ÿæçš„é€’å½’
            way.pollLast();
            //æ‰¾åˆ°åˆç†è·¯åŠ²è¡¨ç¤ºå½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå¯ä»¥ç›´æ¥è¿”å›ï¼Œä¸éœ€è¦å†å¯¹å·¦å³å­æ ‘åšé€’å½’äº†
            return;
        }
        //ä»¥ä¸Šéƒ½æ²¡è¿”å›ï¼Œè¯´æ˜æ­¤è·¯å¾„è¿˜å¯ä»¥å†é€’å½’è¯•è¯•
        way.offerLast(root.val);
        recur(root.left,target-root.val,way);
        recur(root.right,target-root.val,way);
        //æœ¬èŠ‚ç‚¹ç›¸å…³çš„é€’å½’å¤„ç†å®Œäº†ï¼Œä»è·¯å¾„ä¸­æ‹¿å‡ºæœ¬èŠ‚ç‚¹ï¼Œé˜²æ­¢å½±å“å…¶ä»–å…„å¼Ÿæçš„é€’å½’
        way.pollLast();

    }
}
```

- æ³¨æ„ç‚¹ï¼š
  - å…¨å±€å˜é‡å¾€å¾€ä¼šè®©äº‹æƒ…ç®€å•ä¸€ç‚¹ï¼Œä¸ç”¨å„ç§ä¼ å‚å’Œè€ƒè™‘è¿”å›ï¼Œå®¹æ˜“ç»•æ™•ã€‚
  - ä¸èƒ½ç›´æ¥result.add((List\<Integer>)way);å­˜èŠ‚ç‚¹ï¼Œè¿™æ ·wayä¸­ä¿®æ”¹å¢åˆ èŠ‚ç‚¹ä¼šå½±å“resultï¼Œåº”è¯¥ç”¨newå¦ç»™ç©ºé—´æˆç«‹æ–°å¯¹è±¡ã€‚LinkedListå’ŒArrayListçš„æ„é€ å‡½æ•°éƒ½æ”¯æŒä¼ å…¥ä¸€ä¸ªåˆ—è¡¨ï¼Œè¡¨ç¤ºæ ¹æ®åˆ—è¡¨çš„å†…å®¹æ–°å»ºæœ¬åˆ—è¡¨ã€‚ï¼ˆè¿™ä¸ªåœ¨å®˜æ–¹è§£æä¸­ä¹Ÿæåˆ°äº†ï¼‰
  - é€’å½’å‰å¾€åˆ—è¡¨æ”¾æœ¬èŠ‚ç‚¹çš„å€¼ï¼Œé€’å½’ï¼Œé€’å½’åæ‹¿å‡ºæœ¬èŠ‚ç‚¹å¾€åˆ—è¡¨æ”¾çš„å€¼ï¼Œï¼ˆå¤„ç†å¹¶è¿”å›ï¼‰
    - å¯ä»¥åˆ©ç”¨dequeçš„ç‰¹æ€§ï¼Œç²¾å‡†ä»å°¾éƒ¨å¾€é“¾è¡¨å¢åˆ èŠ‚ç‚¹ã€‚
- åæ€ï¼š
  - æˆ‘æ— æ„ä¸­æ­£ç”¨äº†dfs-å…ˆåºéå†ï¼Œå³æŒ‰ç…§ â€œæ ¹ã€å·¦ã€å³â€ çš„é¡ºåºï¼Œéå†æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚

#### å®˜æ–¹

è§£é¢˜æ€è·¯ï¼šæœ¬é—®é¢˜æ˜¯å…¸å‹çš„äºŒå‰æ ‘æ–¹æ¡ˆæœç´¢é—®é¢˜ï¼Œä½¿ç”¨å›æº¯æ³•è§£å†³ï¼Œå…¶åŒ…å« å…ˆåºéå† + è·¯å¾„è®°å½• ä¸¤éƒ¨åˆ†ã€‚

- å…ˆåºéå†ï¼š æŒ‰ç…§ â€œæ ¹ã€å·¦ã€å³â€ çš„é¡ºåºï¼Œéå†æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚
- è·¯å¾„è®°å½•ï¼š åœ¨å…ˆåºéå†ä¸­ï¼Œè®°å½•ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„ã€‚å½“è·¯å¾„ä¸º â‘  æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹å½¢æˆçš„è·¯å¾„ ä¸” â‘¡ å„èŠ‚ç‚¹å€¼çš„å’Œç­‰äºç›®æ ‡å€¼ sum æ—¶ï¼Œå°†æ­¤è·¯å¾„åŠ å…¥ç»“æœåˆ—è¡¨ã€‚

![image-20220406145505142](lcof.assets/image-20220406145505142.png)

ç®—æ³•æµç¨‹ï¼š

- pathSum(root, sum) å‡½æ•°ï¼š
  - åˆå§‹åŒ–ï¼š ç»“æœåˆ—è¡¨ res ï¼Œè·¯å¾„åˆ—è¡¨ path ã€‚
  - è¿”å›å€¼ï¼š è¿”å› res å³å¯ã€‚
- recur(root, tar) å‡½æ•°ï¼š
  - é€’æ¨å‚æ•°ï¼š å½“å‰èŠ‚ç‚¹ root ï¼Œå½“å‰ç›®æ ‡å€¼ tar ã€‚
  - ç»ˆæ­¢æ¡ä»¶ï¼š è‹¥èŠ‚ç‚¹ root ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ã€‚
  - é€’æ¨å·¥ä½œï¼š
    1. è·¯å¾„æ›´æ–°ï¼š å°†å½“å‰èŠ‚ç‚¹å€¼ root.val åŠ å…¥è·¯å¾„ path ï¼›
    2. ç›®æ ‡å€¼æ›´æ–°ï¼š tar = tar - root.valï¼ˆå³ç›®æ ‡å€¼ tar ä» sum å‡è‡³ 00 ï¼‰ï¼›
    3. è·¯å¾„è®°å½•ï¼š å½“ â‘  root ä¸ºå¶èŠ‚ç‚¹ ä¸” â‘¡ è·¯å¾„å’Œç­‰äºç›®æ ‡å€¼ ï¼Œåˆ™å°†æ­¤è·¯å¾„ path åŠ å…¥ res ã€‚
    4. å…ˆåºéå†ï¼š é€’å½’å·¦ / å³å­èŠ‚ç‚¹ã€‚
    5. è·¯å¾„æ¢å¤ï¼š å‘ä¸Šå›æº¯å‰ï¼Œéœ€è¦å°†å½“å‰èŠ‚ç‚¹ä»è·¯å¾„ path ä¸­åˆ é™¤ï¼Œå³æ‰§è¡Œ path.pop() ã€‚

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š Nä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œå…ˆåºéå†éœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹ã€‚
- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œpath å­˜å‚¨æ‰€æœ‰æ ‘èŠ‚ç‚¹ï¼Œä½¿ç”¨ O(N)é¢å¤–ç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    LinkedList<List<Integer>> res = new LinkedList<>();
    LinkedList<Integer> path = new LinkedList<>(); 
    public List<List<Integer>> pathSum(TreeNode root, int sum) {
        recur(root, sum);
        return res;
    }
    void recur(TreeNode root, int tar) {
        if(root == null) return;
        path.add(root.val);
        tar -= root.val;
        if(tar == 0 && root.left == null && root.right == null)
            res.add(new LinkedList(path));
        recur(root.left, tar);
        recur(root.right, tar);
        path.removeLast();
    }
}
```

- å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè®°å½•è·¯å¾„æ—¶è‹¥ç›´æ¥æ‰§è¡Œ res.append(path) ï¼Œåˆ™æ˜¯å°† path å¯¹è±¡åŠ å…¥äº† res ï¼›åç»­ path æ”¹å˜æ—¶ï¼Œ res ä¸­çš„ path å¯¹è±¡ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚
  - æ­£ç¡®åšæ³•ï¼šres.append(list(path)) ï¼Œç›¸å½“äºå¤åˆ¶äº†ä¸€ä¸ª path å¹¶åŠ å…¥åˆ° res ã€‚

- ç½‘å‹è¯„è®ºï¼šå‰ªæå‰ªäº†ä¸ªå¯‚å¯ã€‚ã€‚ã€‚ã€‚åˆ° å¶å­ ç»“ç‚¹ï¼ï¼ï¼

- æˆ‘ï¼šæœ¬ä¾‹ç”¨ä¸€å¯¹å¢åˆ èŠ‚ç‚¹åŒ…è£¹æ•´ä¸ªrecuræ–¹æ³•å†…å®¹çš„æ–¹å¼å€¼å¾—å€Ÿé‰´ï¼›æˆ‘è‡ªå·±å†™çš„æ–¹æ³•ï¼Œåšäº†ä¸¤å¤„å¢åˆ èŠ‚ç‚¹æ“ä½œï¼Œä¸é‚£ä¹ˆä¼˜é›…äº†ã€‚



### [å‰‘æŒ‡ Offer 36. äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨](https://leetcode-cn.com/problems/er-cha-sou-suo-shu-yu-shuang-xiang-lian-biao-lcof/)

#### é¦–æˆ˜å¯„

åªæœ‰å¤§æ¦‚æ€è·¯ï¼Œä½†æ˜¯æ²¡æœ‰è·‘é€šï¼š

```java
/*
// Definition for a Node.
class Node {
    public int val;
    public Node left;
    public Node right;

    public Node() {}

    public Node(int _val) {
        val = _val;
    }

    public Node(int _val,Node _left,Node _right) {
        val = _val;
        left = _left;
        right = _right;
    }
};
*/
class Solution {
    int min=Integer.MAX_VALUE;
    public Node treeToDoublyList(Node root) {
        /**
        ä¸­åºéå†ï¼Œå¯ä»¥å®ç°èŠ‚ç‚¹ä»å°åˆ°å¤§é˜…è¯»
        äºŒå‰æœç´¢æ ‘ï¼šå·¦å­æ ‘å°äºæœ¬èŠ‚ç‚¹ï¼Œå³å­æ ‘å¤§äºæœ¬èŠ‚ç‚¹
        é€’å½’è¿”å›çš„æ—¶å€™ï¼Œæ­£æ˜¯äºŒå‰æœç´¢æ ‘çš„æŒ‡é’ˆèƒ½é€†å‘çš„æ—¶æœºï¼ˆè¿”å›æœ¬èŠ‚ç‚¹ï¼Œåˆ°ä¸Šä¸€å±‚é€’å½’è®©è¢«è¿”å›çš„èŠ‚ç‚¹æŒ‡å‘ä¸Šä¸€å±‚é€’å½’çš„èŠ‚ç‚¹ï¼‰
        é¦–å°¾èŠ‚ç‚¹è¦å•ç‹¬è®°å½•æ‰èƒ½è¿ä¸Šï¼Œä½†æ˜¯è¿™é‡Œè¦æ±‚ä¸èƒ½æ–°å»ºèŠ‚ç‚¹ï¼Œå°±æœ‰ç‚¹éš¾æã€‚ï¼ˆå› ä¸ºåŒå‘åˆ—è¡¨æ˜¯æœ‰åºçš„ï¼Œæ‰¾åˆ°æœ€å°çš„èŠ‚ç‚¹å°±èƒ½æ‰¾åˆ°æœ€å¤§çš„èŠ‚ç‚¹ï¼Œå°±èƒ½é€šè¿‡å³æŒ‡é’ˆæ‰¾åˆ°æœ€å¤§çš„èŠ‚ç‚¹ï¼Œä¸­é—´è®°å½•ç»è¿‡èŠ‚ç‚¹æ•°ï¼Œwhile(èŠ‚ç‚¹æ•°)æ¥è¿ä¸Šæ”¶å°¾èŠ‚ç‚¹ï¼Œè¿™é‡Œåªæ˜¯è·å¾—æ”¶å°¾èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œæ‰€ä»¥æ²¡æ–°å»ºèŠ‚ç‚¹ï¼‰
         */
        //è¿”å›çš„æ˜¯é“¾è¡¨ä¸­æœ€å¤§çš„èŠ‚ç‚¹,ä¸€ç›´æŸ¥æ‰¾å·¦æŒ‡é’ˆå³å¯æ‹¿åˆ°æœ€å°èŠ‚ç‚¹ï¼Œæœ€å°èŠ‚ç‚¹çš„å·¦æŒ‡é’ˆä¸ºnullï¼Œå³æŒ‡é’ˆæŒ‡å‘å€’æ•°ç¬¬2å°çš„èŠ‚ç‚¹
        Node max=recur(root);
        Node min=null,maxStored=max;//minæ˜¾å¼è®¾ç½®ä¸ºnullï¼Œé˜²æ­¢ç¼–è¯‘ä¸é€šè¿‡ï¼Œè¯´â€œminçš„å€¼æ— â€
        while(max!=null){
            System.out.println(max.val);
            if(max.left==null){//æ‰¾åˆ°å½“å‰èŠ‚ç‚¹ä¸ºæœ€å°èŠ‚ç‚¹
                min=max;
            }
            max=max.left;
        }
        //æŠŠminçš„å·¦æŒ‡é’ˆç»ƒåˆ°maxStoredï¼ŒæŠŠmaxStoredçš„å³æŒ‡é’ˆè¿åˆ°min
        min.left=maxStored;
        maxStored.right=min;

        //è¿”å›é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        return min;
        
    }
    public Node recur(Node root){
        //é€’å½’æœ€é‡è¦çš„ï¼šè®¾ç½®è¿”å›æ¡ä»¶
        //è®¾ç½®å¶å­èŠ‚ç‚¹è¿”å›
        if(root.left==null&&root.right==null)return root;
        //ä¸­åºéå†ï¼Œå…ˆéå†å·¦èŠ‚ç‚¹ï¼Œæ‹¿åˆ°å·¦èŠ‚ç‚¹
        Node left=recur(root.left);
        //è®©å·¦å­èŠ‚ç‚¹å³æŒ‡é’ˆæŒ‡å‘è‡ªå·±(å³æŒ‡é’ˆæ¯”è‡ªå·±å¤§)
        left.right=root;
        if(root.right!=null){
            root.right.left=root;
        }
        
        //å¾—åˆ°çš„å³å­èŠ‚ç‚¹ï¼Œè¿”å›ç»™å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œå› ä¸ºå³å­èŠ‚ç‚¹åœ¨å½“å‰èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¹‹é—´
        return recur(root.right);
    }
}
```

- è™½ç„¶æ²¡æœ‰åšå‡ºæ¥ï¼Œä½†æ˜¯æˆ‘æŠ“ä½äº†ï¼š
  - äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ä¸º **é€’å¢åºåˆ—** ã€‚
  - æ€è·¯å’Œé¢˜è§£ä¸€è‡´

#### å®˜æ–¹-ä¸­åºéå†

è§£é¢˜æ€è·¯ï¼š

- æœ¬æ–‡è§£æ³•åŸºäºæ€§è´¨ï¼šäºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ä¸º é€’å¢åºåˆ— ã€‚
- å°† äºŒå‰æœç´¢æ ‘ è½¬æ¢æˆä¸€ä¸ª â€œæ’åºçš„å¾ªç¯åŒå‘é“¾è¡¨â€ ï¼Œå…¶ä¸­åŒ…å«ä¸‰ä¸ªè¦ç´ ï¼š
  - æ’åºé“¾è¡¨ï¼š èŠ‚ç‚¹åº”ä»å°åˆ°å¤§æ’åºï¼Œå› æ­¤åº”ä½¿ç”¨ ä¸­åºéå† â€œä»å°åˆ°å¤§â€è®¿é—®æ ‘çš„èŠ‚ç‚¹ã€‚
  - åŒå‘é“¾è¡¨ï¼š åœ¨æ„å»ºç›¸é‚»èŠ‚ç‚¹çš„å¼•ç”¨å…³ç³»æ—¶ï¼Œè®¾å‰é©±èŠ‚ç‚¹ pre å’Œå½“å‰èŠ‚ç‚¹ cur ï¼Œä¸ä»…åº”æ„å»º pre.right = cur ï¼Œä¹Ÿåº”æ„å»º cur.left = pre ã€‚
  - å¾ªç¯é“¾è¡¨ï¼š è®¾é“¾è¡¨å¤´èŠ‚ç‚¹ head å’Œå°¾èŠ‚ç‚¹ tail ï¼Œåˆ™åº”æ„å»º head.left = tail å’Œ tail.right = head ã€‚

![image-20220406173635111](lcof.assets/image-20220406173635111.png)

**ä¸­åºéå†** ä¸ºå¯¹äºŒå‰æ ‘ä½œ â€œå·¦ã€æ ¹ã€å³â€ é¡ºåºéå†ï¼Œé€’å½’å®ç°å¦‚ä¸‹ï¼š

```java
// æ‰“å°ä¸­åºéå†
void dfs(Node root) {
    if(root == null) return;
    dfs(root.left); // å·¦
    System.out.println(root.val); // æ ¹
    dfs(root.right); // å³
}
```

æ ¹æ®ä»¥ä¸Šåˆ†æï¼Œè€ƒè™‘ä½¿ç”¨ä¸­åºéå†è®¿é—®æ ‘çš„å„èŠ‚ç‚¹ cur ï¼›å¹¶åœ¨è®¿é—®æ¯ä¸ªèŠ‚ç‚¹æ—¶æ„å»º cur å’Œå‰é©±èŠ‚ç‚¹ pre çš„å¼•ç”¨æŒ‡å‘ï¼›ä¸­åºéå†å®Œæˆåï¼Œæœ€åæ„å»ºå¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹çš„å¼•ç”¨æŒ‡å‘å³å¯ã€‚

ç®—æ³•æµç¨‹ï¼š

- dfs(cur): é€’å½’æ³•ä¸­åºéå†ï¼›

  1. ç»ˆæ­¢æ¡ä»¶ï¼š å½“èŠ‚ç‚¹ cur ä¸ºç©ºï¼Œä»£è¡¨è¶Šè¿‡å¶èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›ï¼›

  2. é€’å½’å·¦å­æ ‘ï¼Œå³ dfs(cur.left) ï¼›
  3. æ„å»ºé“¾è¡¨ï¼š
     1. å½“ pre ä¸ºç©ºæ—¶ï¼š ä»£è¡¨æ­£åœ¨è®¿é—®é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œè®°ä¸º head ï¼›
     2. å½“ pre ä¸ä¸ºç©ºæ—¶ï¼š ä¿®æ”¹åŒå‘èŠ‚ç‚¹å¼•ç”¨ï¼Œå³ pre.right = cur ï¼Œ cur.left = pre ï¼›
     3. ä¿å­˜ cur ï¼š æ›´æ–° pre = cur ï¼Œå³èŠ‚ç‚¹ cur æ˜¯åç»§èŠ‚ç‚¹çš„ pre ï¼›
  4. é€’å½’å³å­æ ‘ï¼Œå³ dfs(cur.right) ï¼›

- treeToDoublyList(root)ï¼š
  1. ç‰¹ä¾‹å¤„ç†ï¼š è‹¥èŠ‚ç‚¹ root ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ï¼›
  2. åˆå§‹åŒ–ï¼š ç©ºèŠ‚ç‚¹ pre ï¼›
  3. è½¬åŒ–ä¸ºåŒå‘é“¾è¡¨ï¼š è°ƒç”¨ dfs(root) ï¼›
  4. æ„å»ºå¾ªç¯é“¾è¡¨ï¼š ä¸­åºéå†å®Œæˆåï¼Œhead æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œ pre æŒ‡å‘å°¾èŠ‚ç‚¹ï¼Œå› æ­¤ä¿®æ”¹ head å’Œ pre çš„åŒå‘èŠ‚ç‚¹å¼•ç”¨å³å¯ï¼›
  5. è¿”å›å€¼ï¼š è¿”å›é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head å³å¯ï¼›

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š Nä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œä¸­åºéå†éœ€è¦è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ã€‚
- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œé€’å½’æ·±åº¦è¾¾åˆ° Nï¼Œç³»ç»Ÿä½¿ç”¨ O(N)æ ˆç©ºé—´ã€‚

ä»£ç ï¼š

```java
class Solution {
    Node head, pre;
    public Node treeToDoublyList(Node root) {
        if(root==null) return null;
        dfs(root);

        pre.right = head;
        head.left =pre;//è¿›è¡Œå¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹çš„ç›¸äº’æŒ‡å‘ï¼Œè¿™ä¸¤å¥çš„é¡ºåºä¹Ÿæ˜¯å¯ä»¥é¢ å€’çš„

        return head;

    }

    public void dfs(Node cur){
        if(cur==null) return;
        dfs(cur.left);

        //preç”¨äºè®°å½•åŒå‘é“¾è¡¨ä¸­ä½äºcurå·¦ä¾§çš„èŠ‚ç‚¹ï¼Œå³ä¸Šä¸€æ¬¡è¿­ä»£ä¸­çš„cur,å½“pre==nullæ—¶ï¼Œcurå·¦ä¾§æ²¡æœ‰èŠ‚ç‚¹,å³æ­¤æ—¶curä¸ºåŒå‘é“¾è¡¨ä¸­çš„å¤´èŠ‚ç‚¹
        if(pre==null) head = cur;
        //åä¹‹ï¼Œpre!=nullæ—¶ï¼Œcurå·¦ä¾§å­˜åœ¨èŠ‚ç‚¹preï¼Œéœ€è¦è¿›è¡Œpre.right=curçš„æ“ä½œã€‚
        else pre.right = cur;
       
        cur.left = pre;//preæ˜¯å¦ä¸ºnullå¯¹è¿™å¥æ²¡æœ‰å½±å“,ä¸”è¿™å¥æ”¾åœ¨ä¸Šé¢ä¸¤å¥if elseä¹‹å‰ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚

        pre = cur;//preæŒ‡å‘å½“å‰çš„cur
        dfs(cur.right);//å…¨éƒ¨è¿­ä»£å®Œæˆåï¼ŒpreæŒ‡å‘åŒå‘é“¾è¡¨ä¸­çš„å°¾èŠ‚ç‚¹
    }
}
```

#### å³æ—¶å†æˆ˜æˆåŠŸ

```java
/*
// Definition for a Node.
class Node {
    public int val;
    public Node left;
    public Node right;

    public Node() {}

    public Node(int _val) {
        val = _val;
    }

    public Node(int _val,Node _left,Node _right) {
        val = _val;
        left = _left;
        right = _right;
    }
};
*/
class Solution {
    Node prev=null,min=null;
    public Node treeToDoublyList(Node root) {
        /**
        äºŒå‰æœç´¢æ ‘ï¼Œä¸­åºéå†å¾—åˆ°é€’å¢çš„æ•°
        é€šè¿‡å…¨å±€æŒ‡é’ˆï¼Œå¤„ç†preå’Œcurçš„å…³ç³»ï¼›ç”±äºæœç´¢äºŒå‰æ ‘çš„åŸºç¡€ï¼Œå³æŒ‡é’ˆæŒ‡å‘æ¯”è‡ªå·±å¤§çš„ï¼Œå·¦æŒ‡é’ˆæŒ‡å‘æ¯”è‡ªå·±å°çš„
         */
        //å¤„ç†æ¶å¿ƒäººçš„ç‰¹æ®Šæƒ…å†µ[],ä¼ å…¥ç©ºèŠ‚ç‚¹æ—¶ï¼Œä¸åšä¸‹é¢çš„å¤„ç†çš„è¯ï¼Œprevä¸ä¼šè¢«èµ‹å€¼ï¼Œä¼šå¯¼è‡´prev.rihtæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸
        if(root==null){
            return null;
        }
        //dfs-ä¸­åºéå† è¿”å›çš„åï¼Œprevä¸ºé“¾è¡¨ä¸­æœ€å¤§çš„å€¼
        dfs(root);
        //æŠŠåŒå‘é“¾è¡¨çš„å¤´å°¾è¿æ¥
        prev.right=min;
        min.left=prev;

        //minæŒ‡å‘é“¾è¡¨æœ€å°å€¼ï¼Œè¿”å›minå³ä¸ºå¤´
        return min;
    }
    
    public void dfs(Node cur){
        //è®¾ç½®è¿”å›æ¡ä»¶ï¼šèŠ‚ç‚¹è¶…è¿‡å¶å­èŠ‚ç‚¹æ—¶
        if(cur==null){
            return;
        }
        //ä¸­åºéå†ï¼šå…ˆè®¿é—®å·¦å­èŠ‚ç‚¹
        dfs(cur.left);
        //ä¸­åºéå†ï¼šå†è®¿é—®æœ¬èŠ‚ç‚¹ï¼Œå¤„ç†æœ¬èŠ‚ç‚¹ç›¸å…³äº‹å®œ
        //prevå³ä¸ºå€¼æ¯”å½“å‰èŠ‚ç‚¹æ›´å°çš„èŠ‚ç‚¹ï¼šå¯èƒ½æ˜¯å½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ï¼ˆå¦‚2çš„1ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯å½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ï¼ˆå¦‚4çš„3ï¼‰
        if(prev==null){//prevä¸ºç©ºè¡¨ç¤ºæ²¡æœ‰æ›´å°çš„æ•°ï¼Œä¹Ÿå³å½“å‰èŠ‚ç‚¹ä¸ºæœ€å°çš„æ•°,è®°å½•ä¿å­˜ä¸‹æ¥
            min=cur;
        }else{//å¦‚æœå½“å‰èŠ‚ç‚¹ä¸æ˜¯æœ€å°çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±å¤„ç†å®ƒå’Œä¹‹å‰èŠ‚ç‚¹çš„å…³ç³»:æ¯æ¬¡éƒ½æ˜¯å¤„ç†å½“å‰èŠ‚ç‚¹å’Œä¹‹å‰æ›´å°èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œå¤Ÿæˆé“¾
            prev.right=cur;
            cur.left=prev;
        }
        //è¦ç¦»å¼€æœ¬èŠ‚ç‚¹äº†ï¼Œæ›´æ–°prevèŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹
        prev=cur;
        //ä¸­åºéå†ï¼šæœ€åé€’å½’éå†å³å­æ ‘
        dfs(cur.right);

    }
}
```

- æˆ‘å’Œå®˜æ–¹æœ‰ä¸€ä¸ªç‚¹ä¸ä¸€æ ·ï¼Œå°±æ˜¯`cur.left=prev;`:
  - æˆ‘æŠŠcur.leftæ”¾åˆ°elseé‡Œï¼Œæ˜¯åªæœ‰éé“¾è¡¨é¦–èŠ‚ç‚¹æ‰éœ€è¦å¤„ç†cur.left
  - å®˜æ–¹æŠŠcur.leftæ”¾åˆ°ifelseå¤–ï¼Œç›¸å½“äºåœ¨ifé‡Œå’Œelseé‡Œéƒ½æ”¾ç½®äº†cur.leftï¼›ä½†æ˜¯ifæ—¶å½“å‰èŠ‚ç‚¹ä¸ºé“¾è¡¨é¦–èŠ‚ç‚¹ï¼Œä¸”æ­¤æ—¶æ— æ³•çŸ¥é“é“¾è¡¨å°¾èŠ‚ç‚¹ï¼Œæ‰€ä»¥å…¶å®ä¸éœ€è¦åœ¨ifä¸­æ”¾`cur.left=prev;`ï¼Œè¿™å¥è¯åœ¨ifä¹Ÿå°±ç›¸å½“äºæ˜¯æŠŠé“¾è¡¨é¦–èŠ‚ç‚¹æœ¬æ¥å°±æ˜¯nullçš„å·¦å­æŒ‡é’ˆåˆèµ‹å€¼ä¸ºnullï¼›è¿™ä¹ˆçœ‹ï¼Œæˆ‘çš„â€å³æ—¶å†æˆ˜â€œç‰ˆçš„ä»£ç æ›´åˆç†ï¼Œæ²¡åšæ— æ„ä¹‰æ“ä½œã€‚



### [å‰‘æŒ‡ Offer 54. äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹](https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-di-kda-jie-dian-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    List<Integer> vals=new ArrayList<>();
    public int kthLargest(TreeNode root, int k) {
        /**
        ç†æƒ³ï¼šäºŒå‰æœç´¢æ ‘ä¸­åºéå†å¾—åˆ°çš„æ˜¯é€’å¢çš„æ•°;åˆ©ç”¨é€€æ ˆè®°å½•å€’æ•°ç¬¬kä¸ªæ•°ï¼Œä½†æ˜¯ä¸­åºé€€æ ˆçš„è¯å°±ä¸ä¼šå›æœ¬èŠ‚ç‚¹äº†ï¼›å…¨å±€å˜é‡è®°å½•ç›®æ ‡å€¼å³å¯ã€‚
        ç°å®ï¼šArrayListå¡«å…¥ç»“æœï¼Œå†å–å‡ºã€‚ä¸å»ºè®®ä½¿ç”¨dequeå­˜å‚¨å€¼ï¼Œå†å€’åºéå†(æŠŠdequeå½“æ ˆç”¨)ï¼Œå› ä¸ºä¸éœ€è¦éå†ï¼Œç›´æ¥æ ¹æ®ä¸‹æ ‡æ‹¿å³å¯ï¼Œè€Œä¸”linkedlistæŸ¥æ‰¾å…ƒç´ æ•ˆç‡ä½ã€‚
        dequeç”¨offerlastæˆ–offerfirstï¼Œarraylistå°±ç”¨addå³åŠ åˆ°é“¾è¡¨å°¾ã€‚
         */

        //å¤„ç†ç‰¹æ®Šæƒ…å†µ(æœ¬ä¾‹åº”è¯¥ä¸ä¼šæœ‰è¿™ä¸ªæƒ…å†µ)
        if(root==null)return -1;

        //åˆ©ç”¨dfsè·å¾—é€’å¢é“¾è¡¨
        dfs(root);
        //ä»é€’å¢é“¾è¡¨ä¸­æ‹¿åˆ°ç»“æœ

         return vals.get(vals.size()-k);

    }
    public void dfs(TreeNode root){
        //è®¾å®šdfsè¿”å›æ¡ä»¶
        if(root==null)return;
        
        //ä¸­åºéå†ï¼šå·¦
        dfs(root.left);
        
        //ä¸­åºéå†ï¼šæœ¬èŠ‚ç‚¹
        //å­˜å€¼
        vals.add(root.val);
        
        //ä¸­åºéå†ï¼šå³
        dfs(root.right);

    }
}
```

- æ€§èƒ½æ¯”è¾ƒå·®ï¼Œæ—¶é—´ç©ºé—´å¤æ‚åº¦éƒ½æ˜¯å30%

- æˆ‘ä¹‹å‰æƒ³ï¼šäºŒå‰æœç´¢æ ‘ä¸­åºéå†å¾—åˆ°çš„æ˜¯é€’å¢çš„æ•°ï¼Œå…¨å±€å˜é‡è®°å½•ä¸€ä¸‹å½“å‰éå†äº†å‡ ä¸ªèŠ‚ç‚¹å³å¯ï¼›ä½†æ˜¯æœ¬é¢˜è¦ç¬¬kå¤§çš„æ•°ï¼Œå³å‡åºé“¾è¡¨å€’æ•°ç¬¬kä¸ªæ•°ï¼Œä½†æ˜¯ä¸­åºéå†åº”è¯¥åˆä¸èƒ½åœ¨é€€æ ˆçš„æ—¶å€™å¤„ç†èŠ‚ç‚¹ï¼ˆä¸­åºéå†å¤„ç†èŠ‚ç‚¹çš„æ“ä½œï¼Œåœ¨å¯¹å·¦å³å­æ ‘dfsä¹‹é—´ï¼‰ï¼›æ‰€ä»¥åªèƒ½ç”¨æœ¬ä¾‹è¿™ä¸ªç¬¨æ–¹æ³•ã€‚
- çœ‹äº†â€œå¤§ä½¬è§£æ³•â€ï¼Œçœ‹æ¥æˆ‘å’Œæœ€ä¼˜è§£å¾ˆæ¥è¿‘äº†ï¼Œæ”¹æˆå…ˆå³å†å·¦çš„ä¸­åºï¼Œå°±å¯ä»¥å¾—åˆ°é€’å‡çš„éå†ï¼

#### å¤§ä½¬-ä¸­åºdfs+é€’å‡

ä½œä¸ºä¸€ä¸ªæ™®é€šäººï¼Œæˆ‘æ¥åˆ†æä¸‹è¿™é¢˜ã€‚

1. å‡è®¾ï¼Œä½ èŠ±äº†ç‚¹æ—¶é—´ï¼Œç»ƒä¹ äº†äºŒå‰æ ‘çš„ä¸‰ç§éå†æ–¹å¼ï¼š a. å‰åºéå† b. ä¸­åºéå† c. åç»­éå†
2. ä½ ä¹Ÿå­¦ä¹ äº†äºŒå‰æœç´¢æ ‘ï¼Œæ·±å…¥ç ”ç©¶äº†äºŒå‰æ ‘æœç´¢æ ‘çš„ç‰¹æ€§ï¼Œå¹¶ä¸”æ·±åˆ»çŸ¥é“äºŒå‰æœç´¢æ ‘çš„ä¸€ä¸ªç‰¹æ€§ï¼šé€šè¿‡ä¸­åºéå†æ‰€å¾—åˆ°çš„åºåˆ—ï¼Œå°±æ˜¯æœ‰åºçš„ã€‚

å¥½ï¼Œæœ‰äº†ä»¥ä¸Šä¸¤ç‚¹çŸ¥è¯†ï¼Œæˆ‘è®¤ä¸ºä½ å¿…é¡»èƒ½æƒ³åˆ°ï¼ˆå¦‚æœæƒ³ä¸åˆ°ï¼Œä»¥ä¸Šä¸¤ç‚¹çŸ¥è¯†è‚¯å®šæ²¡æœ‰å­¦æ‰å®ï¼‰ï¼šä¸­åºéå†äºŒå‰æœç´¢æ ‘ï¼Œéå†çš„åŒæ—¶ï¼ŒæŠŠéå†åˆ°çš„èŠ‚ç‚¹å­˜åˆ°ä¸€ä¸ªå¯å˜æ•°ç»„é‡Œï¼ˆJavaçš„è¯ï¼Œå¯ä»¥ç”¨ArrayList)ã€‚ æ€è·¯è½¬åŒ–ä¸ºä»£ç ï¼Œå¦‚ä¸‹ï¼š

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public int kthLargest(TreeNode root, int k) {
        // clarification:  root == null?   k <= 1?
        List<Integer> list = new ArrayList<>();
        helper(root, list);
        return list.get(list.size() - k);
    }
    
    private void helper(TreeNode root, List<Integer> list) {
        if (root == null) return;
        if (root.left != null) helper(root.left, list);
        list.add(root.val);
        if (root.right != null) helper(root.right, list);
    }
}
```

åˆ°è¿™é‡Œï¼Œè¿™é¢˜ï¼Œæˆ‘è§‰å¾—å·²ç»ç¦»æœ€ä¼˜è§£å¾ˆè¿‘äº†ã€‚ä½œä¸ºä¸€ä¸ªå­¦ä¹ äº†ç®—æ³•çš„äººï¼Œä½ ä¸€å®šä¼šæƒ³ï¼šä¸Šé¢çš„ç®—æ³•ç©ºé—´å¤æ‚åº¦æ˜¯O(n)ï¼Œå¯ä¸å¯ä»¥ä¼˜åŒ–ï¼Ÿ

æ·±å…¥å†æ€è€ƒä¸‹ï¼Œå…¶å®ï¼Œå½“éå†åˆ°äº†ç¬¬Kå¤§æ•°çš„æ—¶å€™ï¼Œå°±å¯ä»¥åœæ­¢éå†äº†ï¼ŒåŒæ—¶ï¼ŒæŠŠéå†åˆ°èŠ‚ç‚¹å¯¹åº”çš„æ•°ä¿å­˜ä¸‹æ¥å³å¯ã€‚

æƒ³åˆ°è¿™é‡Œï¼Œä¸€å®šèƒ½å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    private int ans = 0, count = 0;
    public int kthLargest(TreeNode root, int k) {
        // clarification:  root == null?   k <= 1?
        helper(root, k);
        return ans;
    }
    
    private void helper(TreeNode root, int k) {
        if (root.right != null) helper(root.right, k);
        
        if (++count == k) {
            ans = root.val;
            return;
        }
        
        if (root.left != null) helper(root.left, k);
    }
}
```

ç¬¬äºŒç§æ–¹æ³•è¿”å›äº†++count == kçš„æƒ…å†µï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰ `åœæ­¢` éå†ï¼›å¯ä»¥ç”¨é¢˜ç›®ä¸­çš„ç¬¬äºŒä¸ªæµ‹è¯•ç”¨ä¾‹è¾“å‡ºä¸€ä¸‹countï¼Œå‘ç°countè¿˜åœ¨å¢åŠ çš„ï¼›è¿™æ˜¯å› ä¸ºå¾—åˆ°ç»“æœåï¼Œ++countå‘ç°ä¸ç¬¦åˆåï¼Œä¼šè¿›å…¥leftçš„éå†ï¼Œæˆ‘ä»¬åº”è¯¥è®©å¾—åˆ°ç»“æœåä¸å†è¿›å…¥lefté€’å½’ï¼Œæ”¹è‰¯ä»£ç å¦‚ä¸‹ï¼š

```java
class Solution {
    int n = 0;
    int res = 0;
    public int kthLargest(TreeNode root, int k) {
        n = k;
        helper(root);
        return res;
    }
    public void helper(TreeNode root){
        if(root.right != null && n>0 )  helper(root.right);
        n--;
        if(n==0){
            res = root.val;
            return;
        }
        if(root.left != null && n>0 )  helper(root.left);
    }
}
```

- n>0ä¼šé˜»æ­¢å¾—åˆ°ç›®æ ‡ç»“æœåçš„éå†ã€‚
- æˆ‘ï¼šä»–çš„å¯¹èŠ‚ç‚¹ä¸ºnullçš„åˆ¤æ–­å¯ä»¥åƒæˆ‘ä¸€æ ·ï¼Œè¿›å…¥èŠ‚ç‚¹åå†åˆ¤æ–­ï¼Œè¿™æ ·ifåˆ¤æ–­çš„å†…å®¹å°±ä¼šå°‘äº›ï¼Œæ›´æ¸…æ™°ã€‚

è¿™é¢˜åˆ°è¿™å°±æ¯”è¾ƒå®Œç¾äº†ã€‚

#### å®˜æ–¹-ä¸­åºéå†+æå‰è¿”å›

è§£é¢˜æ€è·¯ï¼š

æœ¬æ–‡è§£æ³•åŸºäºæ­¤æ€§è´¨ï¼šäºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ä¸º é€’å¢åºåˆ— ã€‚

- æ ¹æ®ä»¥ä¸Šæ€§è´¨ï¼Œæ˜“å¾—äºŒå‰æœç´¢æ ‘çš„ ä¸­åºéå†å€’åº ä¸º é€’å‡åºåˆ— ã€‚
- å› æ­¤ï¼Œæ±‚ â€œäºŒå‰æœç´¢æ ‘ç¬¬ kå¤§çš„èŠ‚ç‚¹â€ å¯è½¬åŒ–ä¸ºæ±‚ â€œæ­¤æ ‘çš„ä¸­åºéå†å€’åºçš„ç¬¬ kä¸ªèŠ‚ç‚¹â€ã€‚

![Picture1.png](lcof.assets/4ebcaefd4ecec0d76bfab98474dfed323fb86bfcd685d1a5bf610200fdca4405-Picture1.png)

ä¸­åºéå† ä¸º â€œå·¦ã€æ ¹ã€å³â€ é¡ºåºï¼Œé€’å½’æ³•ä»£ç å¦‚ä¸‹ï¼š

```java
// æ‰“å°ä¸­åºéå†
void dfs(TreeNode root) {
    if(root == null) return;
    dfs(root.left); // å·¦
    System.out.println(root.val); // æ ¹
    dfs(root.right); // å³
}
```

ä¸­åºéå†çš„å€’åº ä¸º â€œå³ã€æ ¹ã€å·¦â€ é¡ºåºï¼Œé€’å½’æ³•ä»£ç å¦‚ä¸‹ï¼š

```java
// æ‰“å°ä¸­åºéå†å€’åº
void dfs(TreeNode root) {
    if(root == null) return;
    dfs(root.right); // å³
    System.out.println(root.val); // æ ¹
    dfs(root.left); // å·¦
}
```

ä¸ºæ±‚ç¬¬ k ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦å®ç°ä»¥ä¸‹ ä¸‰é¡¹å·¥ä½œ ï¼š

1. é€’å½’éå†æ—¶è®¡æ•°ï¼Œç»Ÿè®¡å½“å‰èŠ‚ç‚¹çš„åºå·ï¼›
2. é€’å½’åˆ°ç¬¬ kkä¸ªèŠ‚ç‚¹æ—¶ï¼Œåº”è®°å½•ç»“æœ resres ï¼›
3. è®°å½•ç»“æœåï¼Œåç»­çš„éå†å³å¤±å»æ„ä¹‰ï¼Œåº”æå‰ç»ˆæ­¢ï¼ˆå³è¿”å›ï¼‰ã€‚

é€’å½’è§£æï¼š

![image-20220407152836167](lcof.assets/image-20220407152836167.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220407152901363](lcof.assets/image-20220407152901363.png)

ä»£ç ï¼š

![image-20220407153000649](lcof.assets/image-20220407153000649.png)

```java
class Solution {
    int res, k;
    public int kthLargest(TreeNode root, int k) {
        this.k = k;
        dfs(root);
        return res;
    }
    void dfs(TreeNode root) {
        if(root == null) return;
        dfs(root.right);
        if(k == 0) return;
        if(--k == 0) res = root.val;
        dfs(root.left);
    }
}
```

- æˆ‘ï¼šå®˜æ–¹ä»£ç å°±ç”¨äº†`if(k == 0) return;`åšäº†æå‰è¿”å›ï¼Œæ¯”â€œå¤§ä½¬è§£æ³•â€çš„ä»£ç æ›´ç®€æ´æ˜“è¯»ï¼›ä¸è¿‡â€œå¤§ä½¬è§£æ³•â€çš„ä¼˜åŒ–æ€è·¯è¿˜æ˜¯å¾ˆå€¼å¾—å€Ÿé‰´çš„ã€‚

## æ’åº(ç®€å•)

### [å‰‘æŒ‡ Offer 45. æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°](https://leetcode-cn.com/problems/ba-shu-zu-pai-cheng-zui-xiao-de-shu-lcof/)

#### é¦–æˆ˜å¯„

åº”è¯¥æ˜¯æŒ‰ç…§æ•°å­—æœ€é«˜ä½å»é™åºæ’åºï¼Œæ²¡æ€è·¯

- ç½‘å‹è¯„ï¼šè¿™é“é¢˜ä¼¼ä¹å˜æˆäº†lambdaè®¨è®ºä¼šï¼Œå…¶å®æˆ‘è§‰å¾—a+b < b+a çœŸçš„å¥½éš¾æƒ³
- ç½‘å‹ï¼šæˆ‘åœ¨çº¸ä¸Šåå¤å†™ï¼Œæ‰¾è§„å¾‹ï¼Œè„‘å­éƒ½è¦ç‚¸äº†ï¼Œç„¶åçªç„¶å‘ç°ï¼Œå°±æ˜¯åœ¨æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ä¸åŒé¡ºåºç›¸åŠ çš„ç»“æœï¼Œç„¶åå°±è±ç„¶å¼€æœ—ã€‚
- ç½‘å‹ï¼šåä¸ºæœºè¯•+ç¬¬ä¸€è½®æŠ€æœ¯é¢çš„é¢˜ï¼Œæœ‰ç‚¹é«˜é¢‘ã€‚

#### å®˜æ–¹-è‡ªå®šä¹‰æ’åº

è§£é¢˜æ€è·¯ï¼š

![image-20220407155555720](lcof.assets/image-20220407155555720.png)

æ’åºè§„åˆ™çš„ä¼ é€’æ€§è¯æ˜ï¼š

- è¿™é‡Œæ˜¯è¯æ˜ï¼Œä¸ç„¶ä¸Šé¢çš„è§£é‡Šå¤ªç‰µå¼ºäº†ï¼Œæ­¤é¢˜è§£ä½œè€…ä¼°è®¡ä¹Ÿä¸çœŸæ­£æ˜ç™½ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·åšï¼Œè¿™é“é¢˜ç›®å…¶å®å±äºå¾ˆéš¾çš„é¢˜ç›®ï¼Œä¸èƒ½è®©äººä¿¡æœä¸ºä»€ä¹ˆé‚£æ ·æ’åºä¸€ä¸‹å°±å¯ä»¥ï¼Œä¹Ÿä¸æ˜¯ç®€å•çš„ x +y > y +x åˆ™ x > y è­¬å¦‚ x=6, y=305 x+y(6305) > y+x(3056) ä½†æ˜¯çœŸå®æ•°å­—ä¸Šx < y

ä¸ºä»€ä¹ˆè¿™æ ·æ’ä¸ªåºå°±å¯ä»¥äº†å‘¢ï¼Ÿç®€å•è¯æ˜ä¸€ä¸‹ã€‚æ ¹æ®ç®—æ³•ï¼Œå¦‚æœa < bï¼Œé‚£ä¹ˆaæ’åœ¨bå‰é¢ï¼Œå¦åˆ™bæ’åœ¨aå‰é¢ã€‚å¯åˆ©ç”¨åè¯æ³•ï¼Œå‡è®¾æ’æˆçš„æœ€å°æ•°å­—ä¸ºxxxxxxï¼Œå¹¶ä¸”è‡³å°‘å­˜åœ¨ä¸€å¯¹å­—ç¬¦ä¸²æ»¡è¶³è¿™ä¸ªå…³ç³»ï¼ša > bï¼Œä½†æ˜¯åœ¨ç»„æˆçš„æ•°å­—ä¸­aæ’åœ¨bå‰é¢ã€‚æ ¹æ®aå’Œbå‡ºç°çš„ä½ç½®ï¼Œåˆ†ä¸‰ç§æƒ…å†µè€ƒè™‘ï¼š

```
  ï¼ˆ1ï¼‰xxxxabï¼Œç”¨baä»£æ›¿abå¯ä»¥å¾—åˆ°xxxxbaï¼Œè¿™ä¸ªæ•°å­—æ˜¯å°äºxxxxabï¼Œä¸å‡è®¾çŸ›ç›¾ã€‚å› æ­¤æ’æˆçš„æœ€å°æ•°å­—ä¸­ï¼Œä¸å­˜åœ¨ä¸Šè¿°å‡è®¾çš„å…³ç³»ã€‚

  ï¼ˆ2ï¼‰abxxxxï¼Œç”¨baä»£æ›¿abå¯ä»¥å¾—åˆ°baxxxxï¼Œè¿™ä¸ªæ•°å­—æ˜¯å°äºabxxxxï¼Œä¸å‡è®¾çŸ›ç›¾ã€‚å› æ­¤æ’æˆçš„æœ€å°æ•°å­—ä¸­ï¼Œä¸å­˜åœ¨ä¸Šè¿°å‡è®¾çš„å…³ç³»ã€‚

  ï¼ˆ3ï¼‰axxxxbï¼Œè¿™ä¸€æ­¥è¯æ˜éº»çƒ¦äº†ä¸€ç‚¹ã€‚å¯ä»¥å°†ä¸­é—´éƒ¨åˆ†çœ‹æˆä¸€ä¸ªæ•´ä½“aybï¼Œåˆ™æœ‰ay < yaï¼Œyb < byæˆç«‹ã€‚å°†ayå’Œbyè¡¨ç¤ºæˆ10è¿›åˆ¶æ•°å­—å½¢å¼ï¼Œåˆ™æœ‰ä¸‹è¿°å…³ç³»å¼ï¼Œè¿™é‡Œaï¼Œyï¼Œbçš„ä½æ•°åˆ†åˆ«ä¸ºnï¼Œmï¼Œkã€‚

    å…³ç³»1ï¼š ay < ya => a * 10^m + y < y * 10^n + a => a * 10^m - a < y * 10^n - y => a( 10^m - 1)/( 10^n - 1) < y

    å…³ç³»2ï¼š yb < by => y * 10^k + b < b * 10^m + y => y * 10^k - y < b * 10^m - b => y < b( 10^m -1)/( 10^k -1) 

    å…³ç³»3ï¼š a( 10^m - 1)/( 10^n - 1) < y < b( 10^m -1)/( 10^k -1)  => a/( 10^n - 1)< b/( 10^k -1) => a*10^k - a < b * 10^n - b =>a*10^k + b < b * 10^n + a => a < b

   è¿™ä¸å‡è®¾a > bçŸ›ç›¾ã€‚å› æ­¤æ’æˆçš„æœ€å°æ•°å­—ä¸­ï¼Œä¸å­˜åœ¨ä¸Šè¿°å‡è®¾çš„å…³ç³»ã€‚

   ç»¼ä¸Šæ‰€è¿°ï¼Œå¾—å‡ºå‡è®¾ä¸æˆç«‹ï¼Œä»è€Œå¾—å‡ºç»“è®ºï¼šå¯¹äºæ’æˆçš„æœ€å°æ•°å­—ï¼Œä¸å­˜åœ¨æ»¡è¶³ä¸‹è¿°å…³ç³»çš„ä¸€å¯¹å­—ç¬¦ä¸²ï¼ša > bï¼Œä½†æ˜¯åœ¨ç»„æˆçš„æ•°å­—ä¸­aå‡ºç°åœ¨bçš„å‰é¢ã€‚ä»è€Œå¾—
```

- æ ¹æ®æœ¬è¯æ˜ï¼Œåªè¦åˆ—è¡¨æ’åºåä¸ºxyzï¼Œä¸”ä¿è¯xy<yx,yz<zyï¼Œå°±å¯ä»¥ä¿è¯xyzæ˜¯ç”¨ã€x y zã€‘ä¸‰ä¸ªæ•´æ•°èƒ½å®ç°çš„æœ€å°çš„æ‹¼æ¥æ•°ï¼›æ‰€ä»¥æˆ‘ä»¬å°±è‡ªå®šä¹‰ComparatoræŠŠã€x y zã€‘æŒ‰ç…§â€œè‹¥xy<yxï¼Œåˆ™xå¿…é¡»æ”¾yå‰é¢â€çš„è§„åˆ™æ’åºå¥½å³å¯ã€‚

ç®—æ³•æµç¨‹ï¼š

![image-20220407155615917](lcof.assets/image-20220407155615917.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220407155640803](lcof.assets/image-20220407155640803.png)

ä»£ç ï¼š

æœ¬æ–‡åˆ—ä¸¾ å¿«é€Ÿæ’åº å’Œ å†…ç½®å‡½æ•° ä¸¤ç§æ’åºæ–¹æ³•ï¼Œå…¶ä»–æ’åºæ–¹æ³•ä¹Ÿå¯å®ç°ã€‚

å¿«é€Ÿæ’åºï¼š

- éœ€ä¿®æ”¹å¿«é€Ÿæ’åºå‡½æ•°ä¸­çš„æ’åºåˆ¤æ–­è§„åˆ™ã€‚å­—ç¬¦ä¸²å¤§å°ï¼ˆå­—å…¸åºï¼‰å¯¹æ¯”çš„å®ç°æ–¹æ³•ï¼š
  - Java ä¸­ä½¿ç”¨å‡½æ•° A.compareTo(B)ï¼›

```java
public String minNumber(int[] nums) {
    String[] strs = new String[nums.length];
    for (int i = 0; i < nums.length; i++) {
        strs[i] = String.valueOf(nums[i]);
    }
    quickSort(strs, 0, strs.length - 1);
    StringBuilder res = new StringBuilder();
    for (String s : strs)
        res.append(s);
    return res.toString();
}

public void quickSort(String[] strs, int low, int high) {
    if (low < high) {
        int middle = getMiddle(strs, low, high);
        quickSort(strs, low, middle - 1);
        quickSort(strs, middle + 1, high);
    }
}

public int getMiddle(String[] strs, int low, int high) {
    //æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºå‡†å…ƒç´ 
    String temp = strs[low];
    while (low < high) {
        //ä»åå‘å‰æ‰¾æ¯”åŸºå‡†å°çš„æ•°
        while (low < high && (strs[high] + temp).compareTo(temp + strs[high]) >= 0)
            high--;
        //æŠŠæ¯”åŸºå‡†å°çš„æ•°ç§»åˆ°ä½ç«¯
        strs[low] = strs[high];
        //ä»å‰å‘åæ‰¾æ¯”åŸºå‡†å¤§çš„æ•°
        while (low < high && (strs[low] + temp).compareTo(temp + strs[low]) <= 0)
            low++;
        //æŠŠæ¯”åŸºå‡†å¤§çš„æ•°ç§»åˆ°é«˜ç«¯
        strs[high] = strs[low];
    }
    strs[low] = temp;
    return low;
}
```

- ç½‘å‹è¯„ï¼šä½ è¿™ä¸ªå†™æ³•åƒå·¦ç¥ã€‚

å†…ç½®å‡½æ•°ï¼š

- éœ€å®šä¹‰æ’åºè§„åˆ™ï¼š
  - Java å®šä¹‰ä¸º (x, y) -> (x + y).compareTo(y + x) ï¼›

```java
class Solution {
    public String minNumber(int[] nums) {
        //æ„å»ºå­—ç¬¦ä¸²æ•°ç»„
        String[] strs = new String[nums.length];
        for(int i = 0; i < nums.length; i++)
            strs[i] = String.valueOf(nums[i]);
        //æ’åºå­—ç¬¦ä¸²æ•°ç»„
        Arrays.sort(strs, (x, y) -> (x + y).compareTo(y + x));
        //åˆå¹¶å­—ç¬¦ä¸²æ•°ç»„
        StringBuilder res = new StringBuilder();
        for(String s : strs)
            res.append(s);
        return res.toString();
    }
}
```

- Arrays.sortæ–¹æ³•ä½¿ç”¨ï¼Œ[å‚è€ƒ](https://blog.csdn.net/ted_cs/article/details/82713706)ï¼›æœ¬ä¾‹ç”¨çš„ Compareableæ¥å£ï¼Œè€Œä¸æ˜¯Compartoræ¥å£ã€‚
  - ä½†æ˜¯æˆ‘çœ‹å®˜æ–¹çš„sortæ¥å£æ˜¯ä¼ å…¥Comparatoræ¥å£çš„å®ç°ç±»ï¼Œæˆ‘è¿˜æ˜¯å®‰è£…javaå®˜æ–¹çš„æ¥å§ï¼Œå³è‡ªå·±ä¼ Comparatorã€‚

- [Javaä¸­java.util.Comparatorç”¨æ³•](https://www.cnblogs.com/XDU-Lakers/p/13985258.html)
  - é‡å†™æ–¹æ³•`public int compare(String o1, String o2) `ï¼Œå‡¡æ˜¯è¿”å›1æˆ–è€…å¤§äº0çš„æ­£æ•°çš„æ—¶å€™å°±è¦äº¤æ¢ä½ç½®
  - Comparatoræ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œæ‰€ä»¥èƒ½ç”¨lamdaè¡¨è¾¾å¼è¡¨ç¤ºã€‚

#### å³æ—¶å†æˆ˜åŠå¯„

```java
class Solution {
    public String minNumber(int[] nums) {
        /**
        æ ¸å¿ƒå°±æ˜¯è¦æŠŠæ•°ç»„ï¼ŒæŒ‰ç…§é¦–ä½æ’åºï¼ˆå‡åºï¼‰ï¼›é¦–ä½ä¸€æ ·çš„æ¯”è¾ƒç¬¬äºŒä½ã€‚ä½†æ˜¯æœ‰ä¸€ç§ç®€å•çš„ç®—æ³•ï¼š
        1. æŠŠæ•´æ•°æ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ•°ç»„
        2. æŠŠå­—ç¬¦ä¸²æ•°ç»„æ’åºã€‚ä¾‹å¦‚x=="1"ä¸”y=="45"ï¼Œè‹¥x+y<y+xï¼Œå³è®¤ä¸ºx<y
        3. æŠŠå­—ç¬¦ä¸²æ•°ç»„æ’å¥½å‡åºï¼Œå°±æ„å‘³ç€
         */
        //æ•´æ•°æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ•°ç»„ã€‚æ–°å»ºæ•°ç»„åˆ—è¡¨çš„æœ«å°¾ä¸éœ€è¦æ‹¬å·ï¼Œåˆ«å†™æˆnew String[nums.length]()
        String [] nstr=new String[nums.length];
        for(int i=0;i<nums.length;i++){
            nstr[i]=nums[i]+"";
        }
        //æ’åºæ•°ç»„ï¼Œä½¿ç”¨sort+Comparatoræ¥å£ã€‚æ³¨æ„åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•ï¼Œè¦æŠŠé‡å†™æ–¹æ³•å†™åœ¨èŠ±æ‹¬å·{}é‡Œã€‚
        Arrays.sort(nstr,new Comparator<String>(){
            //é‡å†™public compareæ–¹æ³•ï¼ŒæŒ‡ç¤ºå…ƒç´ é—´å¤§å°å…³ç³»çš„åˆ¤æ–­ã€‚æ³¨è§£é¦–å­—æ¯å¤§å†™ï¼Œå‚ç…§@Autowired
            @Override
            public int compare(String s1,String s2){
                //é˜²æ­¢è¶…è¿‡æ•´æ•°è¾¹ç•Œ
                long s1s2= Long.valueOf(s1+s2).longValue();
                long s2s1= Long.valueOf(s2+s1).longValue();
                if(s1s2<s2s1){//è¿”å›-1ï¼Œè¡¨ç¤ºä¸äº¤æ¢s1å’Œs2çš„å€¼ï¼Œå› ä¸ºæ­¤æ—¶s1æœ¬æ¥å°±å°äºs2
                    return -1;
                }else if(s1s2==s2s1){
                    return 0;
                }else{
                    return 1;//è¿”å›1è¡¨ç¤ºäº¤æ¢s1å’Œs2çš„å€¼
                }
            }
        });
        //æŠŠæ’åºåçš„æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²,StringBuilderçº¿ç¨‹ä¸å®‰å…¨ï¼Œä½†æ˜¯æ•ˆç‡é«˜äº›
        StringBuilder sb=new StringBuilder();
        for(int i=0;i<nstr.length;i++){
            sb.append(nstr[i]);
        }
        return sb.toString();
    }
}
```

- æ€è·¯å’Œä»£ç ä¸»é¢˜æ²¡é—®é¢˜ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªçŸ¥è¯†ç‚¹æ²¡è®°ç‰¢ï¼Œé ç™¾åº¦å’Œdebugè§£å†³çš„ï¼š
  - æ–°å»ºå­—ç¬¦æ•°ç»„ç”¨`String [] nstr=new String[nums.length];`ï¼Œè€Œä¸æ˜¯String [] nstr=new String[nums.length]\();å°±æ˜¯æ³¨æ„ä¸åº”è¯¥æœ‰å°æ‹¬å·ã€‚
  - Comparator.compare()æ–¹æ³•æ˜¯publicçš„ï¼›å¹¶ä¸”æ­¤æ–¹æ³•è¦é‡å†™åœ¨åŒ¿åå†…éƒ¨ç±»çš„èŠ±æ‹¬å·ä¸­ï¼Œç”¨lamdaè¡¨è¾¾å¼ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¸ªäººæ„Ÿè§‰å¯è¯»æ€§å·®ã€‚
  - ç†è§£â€œè‹¥x+y<y+xï¼Œå³è®¤ä¸ºx<yï¼ŒæŒ‰ç…§æ­¤è§„åˆ™æ’åºå®Œæ•°ç»„åä¸ºä»€ä¹ˆå°±èƒ½è®©æ‹¼æ¥æˆçš„â€å­—ç¬¦ä¸²å€¼æœ€å°

- è‡ªæˆ‘è¡¨æ‰¬ï¼š
  - è®°ä½äº†æ³¨è§£é¦–å­—æ¯å¤§å†™
  - ç”¨`long`é¿å…è¶…è¿‡æ•´æ•°è¾¹ç•Œï¼Œç”¨`Long.valueOf(obj)`æŠŠå­—ç¬¦ä¸²è½¬åŒ–ä¸ºLong(longçš„åŒ…è£…ç±»)ï¼Œç”¨`Long.longValue();`æŠŠLongè½¬åŒ–æˆåŸºæœ¬æ•°æ®ç±»å‹longã€‚
  - åŸºæœ¬èƒ½è‡ªä¸»å†™å‡ºArrays.sortè‡ªå®šä¹‰æ’åºã€‚

### [å‰‘æŒ‡ Offer 61. æ‰‘å…‹ç‰Œä¸­çš„é¡ºå­](https://leetcode-cn.com/problems/bu-ke-pai-zhong-de-shun-zi-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public boolean isStraight(int[] nums) {
        /**
        æ’åºï¼ŒæŸ¥gapå’Œ0çš„å…³ç³»
         */

        //é¢˜ç›®è¯´æŠ½5å¼ ç‰Œï¼Œæ‰€ä»¥ä¸éœ€è¦å¤„ç†ç‰¹æ®Šæƒ…å†µ

        //æ’åºæ•°ç»„ï¼Œé»˜è®¤å‡åº
        Arrays.sort(nums);

        //éå†æ’åºåçš„æ•°ç»„ï¼Œè®°å½•gapå’Œ0
        int zNum=0,lastNum=-1,gapNum=0,i=0;
        //è®°å½•0çš„ä¸ªæ•°
        while(nums[i]==0){
            zNum++;
            i++;
        }
        //è®°å½•gapçš„æ€»é•¿åº¦
        lastNum=nums[i];//ä¿å­˜ç¬¬ä¸€ä¸ªé0çš„æ•°ï¼Œä½œä¸ºlastNum
        i++;
        while(i<nums.length){
            if(nums[i]-lastNum>1){//ä¾¦æŸ¥åˆ°gap
                gapNum+=(nums[i]-lastNum-1);
            }else if(nums[i]==lastNum){//è€ƒè™‘æ•°ç›®ç›¸åŒçš„æƒ…å†µï¼Œåªè¦å‡ºç°é0æ•°ç›®ç›¸åŒï¼Œå³ä¸æ˜¯æ‰‘å…‹ç‰Œçš„é¡ºå­ï¼Œç›´æ¥è¿”å›falseã€‚ä¹‹å‰ä»¥ä¸ºæ ¹æ®é¢˜æ„ï¼Œä¸ç”¨è€ƒè™‘é0æ•°å¤šæ¬¡å‡ºç°ã€‚ã€‚å¤±ç­–äº†
                return false;
            }

            //ä¸ç®¡æœ‰æ²¡æœ‰ä¾¦æŸ¥åˆ°gapï¼Œéƒ½æ›´æ–°lastNumå’Œi
            lastNum=nums[i];
            i++;
        }

        return gapNum<=zNum;

    }
}
```

- åˆå§‹æ€è·¯ï¼šå‡åºæ’åºæ•°ç»„ï¼›éå†æ•°ç»„ï¼Œç¢°åˆ°0è®°å½•ä¸‹æ€»æ•°ï¼Œç¢°åˆ°gapåŒºè®°å½•ä¸‹é•¿åº¦ã€‚éå†å®Œæ¯•åï¼Œå¦‚æœgapçš„æ€»é•¿åº¦<=0çš„ä¸ªæ•°ï¼Œå³é¡ºå­ã€‚
- æ³¨æ„ï¼šè™½ç„¶é¢˜ç›®æ²¡æœ‰è¯´æ˜ç™½â€œç‰Œè¿ç»­â€çš„æ¦‚å¿µï¼Œä½†æ˜¯æ‰‘å…‹ç‰Œé‡Œï¼Œæ‰‹ç‰Œä¸­æœ‰é0é‡å¤çš„ç‰Œçš„è¯ï¼Œä¸ç®—é¡ºå­ã€‚

#### å®˜æ–¹1-seté›†åˆ+éå†

è§£é¢˜æ€è·¯ï¼š

![image-20220408165259162](lcof.assets/image-20220408165259162.png)

é›†åˆ Set + éå†ï¼Œåšæ³•ï¼š

- éå†äº”å¼ ç‰Œï¼Œé‡åˆ°å¤§å°ç‹ï¼ˆå³ 0 ï¼‰ç›´æ¥è·³è¿‡ã€‚
- **åˆ¤åˆ«é‡å¤**ï¼š åˆ©ç”¨ Set å®ç°éå†åˆ¤é‡ï¼Œ Set çš„æŸ¥æ‰¾æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼›
- **è·å–æœ€å¤§ / æœ€å°çš„ç‰Œ**ï¼š å€ŸåŠ©è¾…åŠ©å˜é‡ ma å’Œ miï¼Œéå†ç»Ÿè®¡å³å¯ã€‚

å¤æ‚åº¦åˆ†æï¼š

![image-20220408165525298](lcof.assets/image-20220408165525298.png)

ä»£ç ï¼š

```java
class Solution {
    public boolean isStraight(int[] nums) {
        Set<Integer> repeat = new HashSet<>();
        int max = 0, min = 14;
        for(int num : nums) {
            if(num == 0) continue; // è·³è¿‡å¤§å°ç‹
            max = Math.max(max, num); // æœ€å¤§ç‰Œ
            min = Math.min(min, num); // æœ€å°ç‰Œ
            if(repeat.contains(num)) return false; // è‹¥æœ‰é‡å¤ï¼Œæå‰è¿”å› false
            repeat.add(num); // æ·»åŠ æ­¤ç‰Œè‡³ Set
        }
        return max - min < 5; // æœ€å¤§ç‰Œ - æœ€å°ç‰Œ < 5 åˆ™å¯æ„æˆé¡ºå­
    }
}
```

#### å®˜æ–¹2-æ’åº + éå†

![image-20220408165708980](lcof.assets/image-20220408165708980.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220408165727381](lcof.assets/image-20220408165727381.png)

ä»£ç ï¼š

```java
class Solution {
    public boolean isStraight(int[] nums) {
        int joker = 0;
        Arrays.sort(nums); // æ•°ç»„æ’åº
        for(int i = 0; i < 4; i++) {
            if(nums[i] == 0) joker++; // ç»Ÿè®¡å¤§å°ç‹æ•°é‡
            else if(nums[i] == nums[i + 1]) return false; // è‹¥æœ‰é‡å¤ï¼Œæå‰è¿”å› false
        }
        return nums[4] - nums[joker] < 5; // æœ€å¤§ç‰Œ - æœ€å°ç‰Œ < 5 åˆ™å¯æ„æˆé¡ºå­
    }
}
```

- æˆ‘å’Œç½‘å‹ï¼šmax - min < 5çš„æ€è·¯å¾ˆèµï¼è¿™æ ·æ•ˆç‡å°±æ¯”æˆ‘ç¡¬æ‰§è¡Œé«˜ã€‚

### [å‰‘æŒ‡ Offer 40. æœ€å°çš„kä¸ªæ•°](https://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
class Solution {
    public int[] getLeastNumbers(int[] arr, int k) {
        /** 
        æ•°ç»„splice(é—­,å¼€)è¡¨ç¤ºåˆ‡æ•°ç»„ï¼›ç±»ä¼¼çš„æœ‰Stringç”¨substringåˆ‡
        */
        //å¿«æ’
        Arrays.sort(arr);
        
        //return arr.splice(0,k);è¿™ä¸ªå‡½æ•°æ€ä¹ˆç”¨ï¼Ÿ
        int[] result=new int[k];
        for(int i=0;i<k;i++){
            result[i]=arr[i];
        }

        return result;
    }
}
```

- åçœï¼šå¿˜è®°äº†æ•°ç»„åˆ‡å‰²çš„å‡½æ•°

#### å®˜æ–¹-å•çº¯å¿«é€Ÿæ’åº

æœ¬é¢˜ä½¿ç”¨æ’åºç®—æ³•è§£å†³æœ€ç›´è§‚ï¼Œå¯¹æ•°ç»„ arr æ‰§è¡Œæ’åºï¼Œå†è¿”å›å‰ kä¸ªå…ƒç´ å³å¯ã€‚ä½¿ç”¨ä»»æ„æ’åºç®—æ³•çš†å¯ï¼Œæœ¬æ–‡é‡‡ç”¨å¹¶ä»‹ç» å¿«é€Ÿæ’åº ï¼Œä¸ºä¸‹æ–‡ æ–¹æ³•äºŒ åšé“ºå«ã€‚

å¿«é€Ÿæ’åºåŸç†ï¼š

- å¿«é€Ÿæ’åºç®—æ³•æœ‰ä¸¤ä¸ªæ ¸å¿ƒç‚¹ï¼Œåˆ†åˆ«ä¸º â€œå“¨å…µåˆ’åˆ†â€ å’Œ â€œé€’å½’â€ ã€‚

å“¨å…µåˆ’åˆ†æ“ä½œï¼š 

- ä»¥æ•°ç»„æŸä¸ªå…ƒç´ ï¼ˆä¸€èˆ¬é€‰å–é¦–å…ƒç´ ï¼‰ä¸º åŸºå‡†æ•° ï¼Œå°†æ‰€æœ‰å°äºåŸºå‡†æ•°çš„å…ƒç´ ç§»åŠ¨è‡³å…¶å·¦è¾¹ï¼Œå¤§äºåŸºå‡†æ•°çš„å…ƒç´ ç§»åŠ¨è‡³å…¶å³è¾¹ã€‚

> å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ºå“¨å…µåˆ’åˆ†æ“ä½œæµç¨‹ã€‚é€šè¿‡ä¸€è½® å“¨å…µåˆ’åˆ† ï¼Œå¯å°†æ•°ç»„æ’åºé—®é¢˜æ‹†åˆ†ä¸º ä¸¤ä¸ªè¾ƒçŸ­æ•°ç»„çš„æ’åºé—®é¢˜ ï¼ˆæœ¬æ–‡ç§°ä¹‹ä¸ºå·¦ï¼ˆå³ï¼‰å­æ•°ç»„ï¼‰ã€‚

![image-20220408174558724](lcof.assets/image-20220408174558724.png)

- åŸç‰ˆçš„è¿™ä¸ªåŠ¨å›¾ä¸é”™

é€’å½’ï¼š å¯¹ å·¦å­æ•°ç»„ å’Œ å³å­æ•°ç»„ é€’å½’æ‰§è¡Œ å“¨å…µåˆ’åˆ†ï¼Œç›´è‡³å­æ•°ç»„é•¿åº¦ä¸º 1 æ—¶ç»ˆæ­¢é€’å½’ï¼Œå³å¯å®Œæˆå¯¹æ•´ä¸ªæ•°ç»„çš„æ’åºã€‚

> å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ºç¤ºä¾‹æ•°ç»„ [2,4,1,0,3,5] çš„å¿«é€Ÿæ’åºæµç¨‹ã€‚è§‚å¯Ÿå‘ç°ï¼Œå¿«é€Ÿæ’åºå’Œ äºŒåˆ†æ³• çš„åŸç†ç±»ä¼¼ï¼Œéƒ½æ˜¯ä»¥ \loglog æ—¶é—´å¤æ‚åº¦å®ç°æœç´¢åŒºé—´ç¼©å°ã€‚

![Picture1.png](lcof.assets/1612615552-rifQwI-Picture1.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220408174755183](lcof.assets/image-20220408174755183.png)

- [å‚è€ƒï¼šå¿«æ’æ—¶é—´å¤æ‚åº¦åˆ†æ](https://zhuanlan.zhihu.com/p/341201904)

ä»£ç ï¼š

```java
class Solution {
    public int[] getLeastNumbers(int[] arr, int k) {
        quickSort(arr, 0, arr.length - 1);
        return Arrays.copyOf(arr, k);
    }
    private void quickSort(int[] arr, int l, int r) {
        // å­æ•°ç»„é•¿åº¦ä¸º 1 æ—¶ç»ˆæ­¢é€’å½’
        if (l >= r) return;
        // å“¨å…µåˆ’åˆ†æ“ä½œï¼ˆä»¥ arr[l] ä½œä¸ºåŸºå‡†æ•°ï¼‰
        int i = l, j = r;
        while (i < j) {
            while (i < j && arr[j] >= arr[l]) j--;
            while (i < j && arr[i] <= arr[l]) i++;
            swap(arr, i, j);
        }
        swap(arr, i, l);
        // é€’å½’å·¦ï¼ˆå³ï¼‰å­æ•°ç»„æ‰§è¡Œå“¨å…µåˆ’åˆ†
        quickSort(arr, l, i - 1);
        quickSort(arr, i + 1, r);
    }
    private void swap(int[] arr, int i, int j) {
        int tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
    }
}
```

- åœ¨é€‰æœ€å·¦è¾¹çš„æ•°ä¸ºå“¨å…µçš„å‰æä¸‹ï¼Œå› ä¸ºå…ˆwhilej--ï¼Œå†whilei++ï¼Œå¯¼è‡´äº†æœ€åä¸€æ­¥æ€»æ˜¯jæ—©å°±åœåœ¨äº†ä¸€ä¸ªæ¯”å“¨å…µå°çš„æ•°ï¼Œè€Œiä¸»åŠ¨é è¿‡æ¥å¯¼è‡´ijé‡åˆï¼›æ‰€ä»¥é‡åˆçš„åœ°æ–¹åº”è¯¥å½’å·¦è¾¹ï¼Œå³äº¤æ¢å“¨å…µå’Œé‡åˆä½ç½®çš„å…ƒç´ ã€‚ï¼ˆçœ‹åŠ¨å›¾çœ‹çš„æ›´æ¸…æ™°ï¼‰
- æ³¨æ„ï¼šè¿™é‡ŒArrays.copyOf(arr, k)æœ‰æˆªå–æ•°ç»„çš„åŠŸèƒ½ï¼Œkè¡¨ç¤ºæˆªå–å‰kä¸ªæ•°ã€‚

#### å®˜æ–¹-åŸºäºå¿«é€Ÿæ’åºçš„æ•°ç»„åˆ’åˆ†

ä¼˜åŒ–æ€è·¯ï¼š

![image-20220408175159330](lcof.assets/image-20220408175159330.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220408175449452](lcof.assets/image-20220408175449452.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220408175517282](lcof.assets/image-20220408175517282.png)

ä»£ç ï¼š

```java
class Solution {
    public int[] getLeastNumbers(int[] arr, int k) {
        if (k >= arr.length) return arr;
        return quickSort(arr, k, 0, arr.length - 1);
    }
    private int[] quickSort(int[] arr, int k, int l, int r) {
        int i = l, j = r;
        while (i < j) {
            while (i < j && arr[j] >= arr[l]) j--;
            while (i < j && arr[i] <= arr[l]) i++;
            swap(arr, i, j);
        }
        swap(arr, i, l);
        if (i > k) return quickSort(arr, k, l, i - 1);
        if (i < k) return quickSort(arr, k, i + 1, r);
        return Arrays.copyOf(arr, k);
    }
    private void swap(int[] arr, int i, int j) {
        int tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
    }
}
```

### [å‰‘æŒ‡ Offer 41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°](https://leetcode-cn.com/problems/shu-ju-liu-zhong-de-zhong-wei-shu-lcof/)

#### é¦–æˆ˜åŠå¯„

æ€è·¯å¯¹ï¼Œæœ‰äººç”¨æˆ‘è¿™ç§æš´åŠ›æ³•ä¹Ÿè¿‡äº†ï¼Œå¯èƒ½æˆ‘è¿™æš´åŠ›ä¸­é—´æœ‰äº›å¤šä½™æ­¥éª¤ï¼Œå¯¼è‡´è¶…æ—¶ï¼›ä¸è¶…æ—¶çš„æš´åŠ›å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ°ã€‚

```java
class MedianFinder {

    /** initialize your data structure here. */
    //ä½¿ç”¨åˆ—è¡¨å­˜å‚¨æ•°æ®ï¼Œæ¯æ¬¡å–ä¸­ä½æ•°ä¹‹å‰æ’åºä¸€ä¸‹
    List<Integer> list=null; 
    int lsSize=0;//è‡ªå·±ä¿å­˜åˆ—è¡¨å¤§å°ï¼Œçœçš„æ¯æ¬¡éƒ½onæŸ¥æ‰¾åˆ—è¡¨å¤§å°
    public MedianFinder() {
        list=new ArrayList<>();
    }
    
    public void addNum(int num) {
        list.add(num);
        lsSize++;
    }
    
    public double findMedian() {
        //æ’åºï¼›åˆ—è¡¨
        list.sort(new Comparator<Integer>(){
            @Override
            public int compare(Integer o1,Integer o2){
                if(o1<=o2){//æœ¬èº«å‡åºçš„è¯ï¼Œä¸äº¤æ¢ä½ç½®
                    return -1;
                }else{
                    return 1;//1è¡¨ç¤ºäº¤æ¢ä½ç½®
                }
            }
        });

        //æ‹¿ä¸­ä½æ•°
        if(lsSize%2==0){
            //æ‹¿å‡ºæ•°ï¼Œå¹¶æŠŠæ•°è½¬ä¸ºdouble
            double templ=(double)list.get(lsSize/2-1).intValue();
            double tempr=(double)list.get(lsSize/2).intValue();
            return templ/2+tempr/2;//é˜²æ­¢è¶…è¿‡è¾¹ç•Œ
        }else{
            return (double)list.get(lsSize/2).intValue();
        }
    }
}

/**
 * Your MedianFinder object will be instantiated and called as such:
 * MedianFinder obj = new MedianFinder();
 * obj.addNum(num);
 * double param_2 = obj.findMedian();
 */
```

- å¤±è´¥åŸå› ï¼šè¶…æ—¶ã€‚æˆ‘çš„ç®—æ³•å¯¹äºè¾“å…¥ä¸å¤šçš„æ—¶å€™éƒ½okï¼Œä½†æ˜¯å¯¹äºé•¿è¾“å…¥ä¼šæœ‰è¶…æ—¶ï¼›ä¼°è®¡æ˜¯å› ä¸ºé•¿åˆ—è¡¨æ’åºå¤ªæ¶ˆè€—æ—¶é—´äº†ã€‚

- æ³¨æ„ï¼š

  - æˆ‘è¿™æ–¹æ³•æ¯æ¬¡æ’å…¥éƒ½å¾—æ’åºåˆ—è¡¨ã€‚åƒArrays.sort()åªèƒ½æ’åºæ•°ç»„è€Œä¸èƒ½æ’åºlistï¼Œæƒ³æ’åºåˆ—è¡¨lså°±å¯ä»¥ç”¨ls.sort(new Comparator\<T>(){})ï¼›æˆ–è€…ç”¨`Collections.sort(List<T> list, Comparator<? super T> c)`ã€‚
    - æ³¨æ„æœ¬åŒ¿åå†…éƒ¨ç±»Comparatorï¼Œâ€å°–æ‹¬å·ï¼Œå°æ‹¬å·ï¼ŒèŠ±æ‹¬å·â€œéƒ½ä¸èƒ½å°‘ã€‚
    - æˆ‘ï¼šè¿˜æ˜¯å–œæ¬¢**Collectionsçš„é™æ€æ–¹æ³•sort**ä¸€ç‚¹ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•å’ŒArrays.sortçš„æ ·å¼ç»Ÿä¸€ï¼›javaæš´åŠ›ç®—æ³•è¿‡çš„è€å“¥ä¹Ÿæ˜¯ç”¨è¿™ä¸ªæ–¹æ³•ã€‚

  - å®˜æ–¹è§£æ³•ç”¨æ¥å †æ’åºï¼Œ[å †æ’åºå®æˆ˜å‚è€ƒ](https://blog.csdn.net/qq_41682302/article/details/95910651)ï¼Œè¿™é‡Œä»‹ç»çš„å †æ’åºå®æˆ˜å’Œå®˜æ–¹ä½¿ç”¨çš„PriorityQueueä¸€è‡´ï¼

  - å®˜æ–¹ç”¨çš„å †æ’åºï¼Œå’Œæˆ‘è‡ªå·±ç”¨çš„å¿«é€Ÿæ’åºçš„[å¯¹æ¯”](https://www.cnblogs.com/gzshan/p/10904254.html)ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨å †æ’åºï¼Ÿ
    - æˆ‘ç†è§£ï¼š
      - ä½¿ç”¨æ’å…¥æ’åºçš„è¯ï¼Œè™½ç„¶æ¯æ¬¡æ’å…¥è€—æ—¶é—´ä½†æ˜¯å–æ•°æ®èŠ‚çœæ—¶é—´ï¼›æ•°ç»„å®ç°æ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯on2ï¼Œå–æ•°æ®å®ç°å¤æ‚åº¦æ˜¯o1ï¼›ä½†æ˜¯é“¾è¡¨å®ç°æ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯onï¼ˆé“¾è¡¨æ’å…¥æ•°æ®ä¸ç”¨ç§»åŠ¨åç»­æ•°æ®ï¼‰ï¼Œå–æ•°æ®æ—¶é—´å¤æ‚åº¦æ˜¯o1ã€‚ã€‚äºæ­¤åŒæ—¶ä½¿ç”¨é“¾è¡¨+å¿«é€Ÿæ’åºçš„è¯ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™ï¼ˆåŒ…å«æ’åºï¼‰æ—¶é—´å¤æ‚åº¦æ˜¯onlognï¼Œæ’å…¥çš„æ—¶å€™æ—¶é—´å¤æ‚åº¦æ˜¯o1ã€‚æ‰€ä»¥næ¯”è¾ƒå¤§æ—¶ï¼Œâ€œé“¾è¡¨+å¿«é€Ÿæ’åºâ€çš„ç»¼åˆæ€§èƒ½ï¼Œå¼±äºâ€œé“¾è¡¨+æ’å…¥æ’åºâ€ï¼Œæ‰€ä»¥é¦–å…ˆæ’é™¤ç”¨çš„è¿™ç§â€œæ¯æ¬¡æŸ¥è¯¢æ—¶å¿«æ’â€çš„æ–¹å¼
      - ç°åœ¨å†çœ‹å †æ’åºï¼Œä½†æ˜¯ä½¿ç”¨å †æ’åºçš„è¯ï¼Œå¯ä»¥å®ç°olognçš„æ’å…¥ï¼Œå’Œo1çš„æŸ¥æ‰¾ï¼Œç»¼åˆæ€§èƒ½æ¯”â€œé“¾è¡¨+æ’å…¥æ’åºâ€æ›´é«˜ã€‚

æœ‰è€å“¥å°±ç”¨javaæš´åŠ›æ³•è¿‡äº†ï¼Œæ–¹æ³•å’Œæˆ‘ç±»ä¼¼ï¼Œä½†æ˜¯å°‘äº†â€œè‡ªå®šä¹‰æ’åºï¼Œæ‰‹åŠ¨è£…ç®±æ‹†ç®±ï¼Œç±»å‹å¼ºè½¬â€œã€‚

```java
class MedianFinder { 
List<Integer> list = new ArrayList<Integer>();
/** initialize your data structure here. */
public MedianFinder() {
}

public void addNum(int num) {
    list.add(num);
}

public double findMedian() {
    Collections.sort(list);
    int len = list.size();
    if (len == 0) {
        return 0.0;
    }
    if (len%2 == 1) {
        return list.get(len/2);
    } else {
        return (list.get(len/2-1) + list.get(len/2))/2.0;
    }
}
}
```

#### å®˜æ–¹-ä¼˜å…ˆé˜Ÿåˆ—/å †

è§£é¢˜æ€è·¯ï¼š

![image-20220408204404242](lcof.assets/image-20220408204404242.png)

- billibiliå †æ’åº[æ•™å­¦](https://www.bilibili.com/video/BV1Eb41147dK?from=search&seid=8087900261957567930&spm_id_from=333.337.0.0)

![Picture1.png](lcof.assets/25837f1b195e56de20587a4ed97d9571463aa611789e768914638902add351f4-Picture1.png)

ç®—æ³•æµç¨‹ï¼š

![image-20220408204443165](lcof.assets/image-20220408204443165.png)

- æˆ‘ï¼šä¹‹æ‰€ä»¥è¦å…ˆæ’å…¥åˆ«äººé‚£ï¼Œæ˜¯å› ä¸ºè¦è®©å¯¹æ–¹å †ä¹Ÿèƒ½æ ¹æ®æ–°åˆ°æ•°æ®æ’åºï¼Œæ›´æ–°å¯¹æ–¹çš„å †ï¼›å¹¶ä¸”æ‹¿å›æ¥çš„æ•°æ®ï¼Œå¯èƒ½åœ¨å¯¹æ–¹å †çš„æ•°æ®ä¸­é—´ï¼Œå¯¼è‡´æ‹¿å›æ¥çš„æ•°æ®å’Œæ’å…¥å¯¹æ–¹å †çš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„ã€‚

å¤æ‚åº¦åˆ†æï¼š

![image-20220408204754191](lcof.assets/image-20220408204754191.png)

ä»£ç ï¼š

Java ä½¿ç”¨ `PriorityQueue<>((x, y) -> (y - x))` å¯æ–¹ä¾¿å®ç°å¤§é¡¶å †ã€‚

```java
class MedianFinder {
    Queue<Integer> A, B;
    public MedianFinder() {
        A = new PriorityQueue<>(); // å°é¡¶å †ï¼Œä¿å­˜è¾ƒå¤§çš„ä¸€åŠ
        B = new PriorityQueue<>((x, y) -> (y - x)); // å¤§é¡¶å †ï¼Œä¿å­˜è¾ƒå°çš„ä¸€åŠ
    }
    public void addNum(int num) {
        if(A.size() != B.size()) {
            A.add(num);
            B.add(A.poll());
        } else {
            B.add(num);
            A.add(B.poll());
        }
    }
    public double findMedian() {
        return A.size() != B.size() ? A.peek() : (A.peek() + B.peek()) / 2.0;
    }
}
```

- `/2.0`ä¼šè‡ªåŠ¨æŠŠâ€œintegerè‡ªåŠ¨æ‹†ç®±å¾—åˆ°çš„intâ€è½¬åŒ–ä¸ºdoubleã€‚
- [PriorityQueueè¯¦è§£](https://www.jianshu.com/p/f1fd9b82cb72):
  - åˆ©ç”¨å †æ’åºï¼Œä¿è¯æ ‘é‡Œæ€»æ˜¯æœ€å¤§/æœ€å°çš„å…ƒç´ åœ¨çˆ¶èŠ‚ç‚¹ï¼›å¹¶ä¸”é™¤é¡¶éƒ¨æ˜¯æœ€å¤§å€¼/æœ€å°å€¼å¤–ï¼Œé›†åˆçš„å…¶ä½™éƒ¨åˆ†æ˜¯ä¸ä¿è¯æœ‰åºçš„ã€‚
  - Comparatorè‡ªå®šä¹‰æ’åºçš„è¯ï¼Œè¿”å›-1è¡¨ç¤ºo1å’Œo2çš„é¡ºåºæ˜¯é»˜è®¤çš„å‡åºï¼Œå³o1<o2ï¼Œæ‰€ä»¥ä¸ç”¨äº¤æ¢ä¸¤è€…é¡ºåºã€‚

#### å³æ—¶å†æˆ˜åŠå¯„

```java
class MedianFinder {

    /** initialize your data structure here. */
    /**
    smalleræ˜¯è¾ƒå°çš„ä¸€åŠé›†åˆï¼Œç”¨å¤§é¡¶å †å¤„ç†è¿™ä¸ªé›†åˆï¼Œè®©è¾ƒå°é›†åˆé‡Œçš„æœ€å¤§å€¼å§‹ç»ˆåœ¨å †é¡¶éƒ¨ï¼Œå³åœ¨ä¸­ä½æ•°é™„è¿‘ï¼›å…è®¸smalleræ¯”biggerå¤šä¸€ä¸ªå…ƒç´ 
    biggeræ˜¯è¾ƒå¤§çš„ä¸€åŠé›†åˆï¼Œç”¨å°é¡¶å †å¤„ç†è¿™ä¸ªé›†åˆï¼Œè®©è¾ƒå¤§é›†åˆé‡Œçš„æœ€å°å€¼å§‹ç»ˆåœ¨å †é¡¶éƒ¨ï¼Œå³åœ¨ä¸­ä½æ•°é™„è¿‘
     */
    PriorityQueue<Integer> smaller=null;
    PriorityQueue<Integer> bigger=null;
    public MedianFinder() {
        smaller=new PriorityQueue<>(new Comparator<Integer>(){//å¤§é¡¶å †é€’å‡ï¼Œä¸æ˜¯é»˜è®¤çš„ï¼Œè¦è‡ªå®šä¹‰æ¯”è¾ƒè§„åˆ™
            @Override
            public int compare(Integer o1,Integer o2){
                if(o1<o2){//å¦‚æœå‰é¢çš„æ›´å°ï¼Œè¿”å›1è¡¨ç¤ºäº¤æ¢ä¸¤è€…é¡ºåºï¼Œå³ä¸ºäº†è®©å‰é¢çš„æ›´å¤§ï¼ˆå³å®ç°é™åºï¼‰
                    return 1;
                }else if(o1>o2){
                    return -1;
                }else{
                    return 0;
                }
            }
        });
        //smaller=new PriorityQueue<>((x, y) -> (y - x));
        bigger=new PriorityQueue<>();//å°é¡¶å †é€’å¢
    }
    
    public void addNum(int num) {
        //å› ä¸ºå¾…æ’å…¥å€¼å¯èƒ½å±äºå¯¹é¢å †ï¼Œæ‰€ä»¥æ¯ä¸ªå€¼éƒ½è¦å…ˆå¡«å…¥å¯¹é¢å †ï¼Œå†ä»å¯¹é¢å †é¡¶éƒ¨æ‹¿å€¼ï¼›
        if(smaller.size()==bigger.size()){//å¦‚æœä¸¤ä¸ªå †æ•°ç›®ç›¸åŒï¼Œå¾€smallerä¸­æ’å…¥ï¼›ä½†æ˜¯å…ˆæ’å…¥biggerä¿è¯smalleræ˜¯æ€»é›†åˆçš„è¾ƒå°ä¸€åŠæ•°çš„é›†åˆ
            bigger.offer(num);
            smaller.offer(bigger.poll());
        }else{//å¦‚æœsmalleræ•°ç›®å¤š1ï¼Œå°±å¾€biggerå †æ’å…¥ï¼›ä½†æ˜¯å…ˆæ’å…¥smaller,æ‰èƒ½ä¿è¯biggeræ˜¯æ€»é›†åˆçš„è¾ƒå¤§ä¸€åŠæ•°çš„é›†åˆ
            smaller.offer(num);
            bigger.offer(smaller.poll());
        }
    }
    
    public double findMedian() {
        if(smaller.size()==bigger.size()){//å¦‚æœä¸¤ä¸ªå †çš„å…ƒç´ æ•°ç›®ç›¸åŒï¼Œé‚£ä¹ˆå„å–å †é¡¶è®¡ç®—ä¸­ä½æ•°
            return (smaller.peek()+bigger.peek())/2.0;//2.0è‡ªåŠ¨æŠŠæ•´ä¸ªå¼å­è½¬åŒ–ä¸ºfloatï¼›è¿”å›ç±»å‹æ˜¯doubleï¼Œæˆ‘ä¼°è®¡å°±è‡ªåŠ¨è½¬åŒ–äº†ã€‚æ³¨æ„æŸ¥æ‰¾ä¸­ä½æ•°ä¸èƒ½æ‰§è¡Œpollï¼Œpollä¼šç§»é™¤å…ƒç´ ï¼Œè¦ç”¨peek
        }else{//å¦‚æœsmallerçš„å…ƒç´ å¤š1ï¼Œè¯´æ˜å…±å¥‡æ•°ä¸ªå…ƒç´ ï¼Œç›´æ¥æ‹¿smallerå †çš„å †é¡¶è¿”å›å³å¯
            return smaller.peek();
        }
    }
}

/**
 * Your MedianFinder object will be instantiated and called as such:
 * MedianFinder obj = new MedianFinder();
 * obj.addNum(num);
 * double param_2 = obj.findMedian();
 */
```

- å…³äº[`size()`æ—¶é—´å¤æ‚åº¦](https://blog.csdn.net/Kevin___________/article/details/108681594)

- é”™è¯¯ç‚¹ï¼š

  - æ±‚ä¸­ä½æ•°æ—¶ï¼Œè¯¯ç”¨pollå–æ•°ï¼Œå¯¼è‡´æ›´æ”¹äº†å †å½±å“åç»­æ“ä½œï¼›åº”è¯¥ç”¨peekã€‚
  - pollçš„æ˜¯å †é¡¶ï¼Œå°é¡¶å †æ˜¯é€’å¢ï¼Œé‚£ä¹ˆpollå‡ºçš„å°±æ˜¯æœ€å°å€¼ï¼›åä¹‹å¤§é¡¶å †pollå‡ºæ¥çš„å°±æ˜¯æœ€å¤§å€¼ã€‚

- é—®ç­”é—®ï¼šä¸ºä»€ä¹ˆéƒ½ç”¨äº†å †æ’åºï¼Œæˆ‘çš„æ•ˆç‡æ¯”å®˜æ–¹ä½è¿™ä¹ˆå¤šï¼Ÿï¼ˆçº¢æ¡†æ˜¯æˆ‘ï¼Œç»¿æ¡†æ˜¯å®˜æ–¹ï¼‰

  <img src="lcof.assets/image-20220409010404047.png" alt="image-20220409010404047" style="zoom:50%;" />

  - ç»è¿‡ä½¿ç”¨å®˜æ–¹çš„lamdaè¡¨è¾¾å¼å†³å®šå¤§é¡¶å †ï¼Œä½†æ˜¯çº¿æ•ˆç‡æ²¡å˜ï¼Œè¯´æ˜æ˜¯å…¶ä»–éƒ¨ä½å¯¼è‡´çš„ã€‚

  - è‡ªç­”ï¼šå‘ç°ä»£ç é—ç•™äº†debugæ—¶è®¾ç½®çš„System.out.println()ï¼Œåˆ æ‰ä¹‹åæ•ˆç‡å’Œå®˜æ–¹ä¸€è‡´ï¼›çœ‹æ¥è¾“å‡ºå¾ˆè€—æ—¶å•Šï¼

    <img src="lcof.assets/image-20220409010830512.png" alt="image-20220409010830512" style="zoom:50%;" />

## æœç´¢ä¸å›æº¯ç®—æ³•(ä¸­ç­‰)

### [å‰‘æŒ‡ Offer 55 - I. äºŒå‰æ ‘çš„æ·±åº¦](https://leetcode-cn.com/problems/er-cha-shu-de-shen-du-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public int maxDepth(TreeNode root) {
        //åˆ¤æ–­è¿”å›æ¡ä»¶
        if(root==null)return 0;

        //é€’å½’æ‹¿åˆ°å·¦å³å­æ ‘çš„æ·±åº¦ã€‚å–å¤§çš„æ·±åº¦ï¼ŒåŠ ä¸€è¿”å›ä¸ºæœ¬èŠ‚ç‚¹è¿”å›çš„æœ€å¤§æ·±åº¦
        return Math.max(maxDepth(root.left),maxDepth(root.right))+1;

    }
}
```

#### å®˜æ–¹1-ååºéå†ï¼ˆDFSï¼‰

æ ‘çš„éå†æ–¹å¼æ€»ä½“åˆ†ä¸ºä¸¤ç±»ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ã€å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ï¼›

- å¸¸è§çš„ DFS ï¼š å…ˆåºéå†ã€ä¸­åºéå†ã€ååºéå†ï¼›
- å¸¸è§çš„ BFS ï¼š å±‚åºéå†ï¼ˆå³æŒ‰å±‚éå†ï¼‰ã€‚

æ±‚æ ‘çš„æ·±åº¦éœ€è¦éå†æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæœ¬æ–‡å°†ä»‹ç»åŸºäº ååºéå†ï¼ˆDFSï¼‰ å’Œ å±‚åºéå†ï¼ˆBFSï¼‰ çš„ä¸¤ç§è§£æ³•ã€‚

æ€è·¯ï¼š

![image-20220409165709831](lcof.assets/image-20220409165709831.png)

ç®—æ³•è§£æï¼š

![image-20220409165731652](lcof.assets/image-20220409165731652.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220409165757840](lcof.assets/image-20220409165757840.png)

ä»£ç ï¼š

```java
class Solution {
    public int maxDepth(TreeNode root) {
        if(root == null) return 0;
        return Math.max(maxDepth(root.left), maxDepth(root.right)) + 1;
    }
}
```

- æ˜¯åœ¨å¾—åˆ°å·¦å³å­æ ‘ç»“æœåï¼Œæ“ä½œæœ¬èŠ‚ç‚¹ï¼ˆå³+1ï¼‰ï¼Œæ‰€ä»¥æ˜¯ååºéå†

#### å®˜æ–¹2-å±‚åºéå†ï¼ˆBFSï¼‰

æ€è·¯ï¼š

- æ ‘çš„å±‚åºéå† / å¹¿åº¦ä¼˜å…ˆæœç´¢å¾€å¾€åˆ©ç”¨ **é˜Ÿåˆ—** å®ç°ã€‚
- **å…³é”®ç‚¹ï¼š** æ¯éå†ä¸€å±‚ï¼Œåˆ™è®¡æ•°å™¨ +1+1 ï¼Œç›´åˆ°éå†å®Œæˆï¼Œåˆ™å¯å¾—åˆ°æ ‘çš„æ·±åº¦ã€‚

ç®—æ³•è§£æï¼š

1. ç‰¹ä¾‹å¤„ç†ï¼š å½“ root ä¸ºç©ºï¼Œç›´æ¥è¿”å› æ·±åº¦ 00 ã€‚
2. åˆå§‹åŒ–ï¼š é˜Ÿåˆ— queue ï¼ˆåŠ å…¥æ ¹èŠ‚ç‚¹ root ï¼‰ï¼Œè®¡æ•°å™¨ res = 0ã€‚
3. å¾ªç¯éå†ï¼š å½“ queue ä¸ºç©ºæ—¶è·³å‡ºã€‚
   1. åˆå§‹åŒ–ä¸€ä¸ªç©ºåˆ—è¡¨ tmp ï¼Œç”¨äºä¸´æ—¶å­˜å‚¨ä¸‹ä¸€å±‚èŠ‚ç‚¹ï¼›
   2. éå†é˜Ÿåˆ—ï¼š éå† queue ä¸­çš„å„èŠ‚ç‚¹ node ï¼Œå¹¶å°†å…¶å·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚ç‚¹åŠ å…¥ tmpï¼›
   3. æ›´æ–°é˜Ÿåˆ—ï¼š æ‰§è¡Œ queue = tmp ï¼Œå°†ä¸‹ä¸€å±‚èŠ‚ç‚¹èµ‹å€¼ç»™ queueï¼›
   4. ç»Ÿè®¡å±‚æ•°ï¼š æ‰§è¡Œ res += 1 ï¼Œä»£è¡¨å±‚æ•°åŠ  11ï¼›
4. è¿”å›å€¼ï¼š è¿”å› res å³å¯ã€‚

å¤æ‚åº¦åˆ†æï¼š

![image-20220409170223187](lcof.assets/image-20220409170223187.png)

ä»£ç ï¼š

```java
public int maxDepth(TreeNode root) {
    if (root == null) return 0;
    Queue<TreeNode> queue = new LinkedList<>();
    queue.add(root);
    int res = 0;
    while (!queue.isEmpty()) {
        res++;
        int n = queue.size();
        for (int i = 0; i < n; i++) {
            TreeNode node = queue.poll();
            if (node.left != null) queue.add(node.left);
            if (node.right != null) queue.add(node.right);
        }
    }
    return res;
}
```

- æˆ‘å’Œç½‘å‹ï¼šè¿™ä¸ªå¾ˆåƒä»ä¸Šå¾€ä¸‹åˆ†å±‚æ‰“å°äºŒå‰æ ‘ã€‚

### [å‰‘æŒ‡ Offer 55 - II. å¹³è¡¡äºŒå‰æ ‘](https://leetcode-cn.com/problems/ping-heng-er-cha-shu-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public boolean isBalanced(TreeNode root) {
        if(root==null)return true;

        //æŸ¥è¯¢æœ¬èŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘ï¼Œçš„å·¦å³å­æ ‘æ·±åº¦æ˜¯å¦æ»¡è¶³å¹³è¡¡
        if(depth(root.left)-depth(root.right)>1||depth(root.left)-depth(root.right)<-1){
            return false;
        }
        //é€’å½’æŸ¥è¯¢å·¦å³å­æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å¹³è¡¡æ€§
        return isBalanced(root.left)&&isBalanced(root.right);
    }
    public int depth(TreeNode root){//æŸ¥çœ‹æŸèŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘çš„æ·±åº¦ã€‚ä¼šå¯¹æ¯ä¸ªèŠ‚ç‚¹æ±‚å·¦å³å­æ ‘æ·±åº¦ï¼Œå¯¼è‡´å¤§é‡é‡å¤è®¡ç®—ï¼Œæœ€å¥½æ˜¯treeæœ‰ä¸ªå­—æ®µå­˜ä¸€ä¸‹æ·±åº¦ï¼Œä½†æ˜¯è¿™åˆæ²¡æœ‰
        if(root==null)return 0;

        return Math.max(depth(root.right),depth(root.left))+1;
    }
}
```

- å¯¹æ¯ä¸ªèŠ‚ç‚¹åå¤è®¡ç®—äº†æ·±åº¦ï¼Œé‡å¤è®¡ç®—äº†ï¼›ä½†æ˜¯æ²¡æƒ³åˆ°æ›´å¥½çš„è§£æ³•ã€‚

#### å®˜æ–¹1-ååºéå† + å‰ªæ ï¼ˆä»åº•è‡³é¡¶ï¼‰

åšé¢˜å‰æï¼š

![image-20220409173300101](lcof.assets/image-20220409173300101.png)

æ€è·¯ï¼š

> ååºéå† + å‰ªæ ï¼ˆä»åº•è‡³é¡¶ï¼‰ä¸ºæ­¤æ–¹æ³•ä¸ºæœ¬é¢˜çš„æœ€ä¼˜è§£æ³•ï¼Œä½†å‰ªæçš„æ–¹æ³•ä¸æ˜“ç¬¬ä¸€æ—¶é—´æƒ³åˆ°ã€‚

æ€è·¯æ˜¯å¯¹äºŒå‰æ ‘åšååºéå†ï¼Œä»åº•è‡³é¡¶è¿”å›å­æ ‘æ·±åº¦ï¼Œè‹¥åˆ¤å®šæŸå­æ ‘ä¸æ˜¯å¹³è¡¡æ ‘åˆ™ â€œå‰ªæâ€ ï¼Œç›´æ¥å‘ä¸Šè¿”å›ã€‚

ç®—æ³•æµç¨‹ï¼š

![image-20220409173850610](lcof.assets/image-20220409173850610.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220409174009514](lcof.assets/image-20220409174009514.png)

ä»£ç ï¼š

```java
class Solution {
    public boolean isBalanced(TreeNode root) {
        return recur(root) != -1;
    }

    private int recur(TreeNode root) {
        if (root == null) return 0;
        int left = recur(root.left);
        if(left == -1) return -1;
        int right = recur(root.right);
        if(right == -1) return -1;
        return Math.abs(left - right) < 2 ? Math.max(left, right) + 1 : -1;
    }
}
```

- å­¦ä¹ å‰ªææ€æƒ³ã€‚ç”¨è¿”å›å€¼ä¸º-1å‰ªææ˜¯æ²¡æƒ³åˆ°çš„ï¼›è‡ªå·±å†™çš„æ—¶å€™ä¸€ç›´æƒ³åœ¨æ ‘èŠ‚ç‚¹å¤„è®°å½•ä¿¡æ¯ï¼Œåœ¨é€’å½’æŸ¥è¯¢çš„æ—¶å€™æŸ¥è¯¢èŠ‚ç‚¹çš„å†å²è®°å½•æ¥å‰ªæã€‚
- æˆ‘è®¤ä¸ºæ€æƒ³ï¼šæ±‚æ·±åº¦çš„å‡½æ•°ï¼Œä¸å•å•æ˜¯æ±‚æ·±åº¦äº†ï¼Œåœ¨æ±‚æ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦æ—¶ï¼Œè¿˜ä¼šæ±‚å·²æœ¬èŠ‚ç‚¹ä¸ºé¡¶ç‚¹çš„äºŒå‰æ ‘æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚

#### å®˜æ–¹2-å…ˆåºéå† + åˆ¤æ–­æ·±åº¦ ï¼ˆä»é¡¶è‡³åº•ï¼‰

> æ­¤æ–¹æ³•(å°±æ˜¯æˆ‘çš„ç®—æ³•)å®¹æ˜“æƒ³åˆ°ï¼Œä½†ä¼šäº§ç”Ÿå¤§é‡é‡å¤è®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦è¾ƒé«˜ã€‚

æ€è·¯æ˜¯æ„é€ ä¸€ä¸ªè·å–å½“å‰å­æ ‘çš„æ·±åº¦çš„å‡½æ•° depth(root) ï¼ˆå³ é¢è¯•é¢˜55 - I. äºŒå‰æ ‘çš„æ·±åº¦ ï¼‰ï¼Œé€šè¿‡æ¯”è¾ƒæŸå­æ ‘çš„å·¦å³å­æ ‘çš„æ·±åº¦å·® abs(depth(root.left) - depth(root.right)) <= 1 æ˜¯å¦æˆç«‹ï¼Œæ¥åˆ¤æ–­æŸå­æ ‘æ˜¯å¦æ˜¯äºŒå‰å¹³è¡¡æ ‘ã€‚è‹¥æ‰€æœ‰å­æ ‘éƒ½å¹³è¡¡ï¼Œåˆ™æ­¤æ ‘å¹³è¡¡ã€‚

ç®—æ³•æµç¨‹ï¼š

![image-20220409174524696](lcof.assets/image-20220409174524696.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220409174554930](lcof.assets/image-20220409174554930.png)

ä»£ç ï¼š

```java
class Solution {
    public boolean isBalanced(TreeNode root) {
        if (root == null) return true;
        return Math.abs(depth(root.left) - depth(root.right)) <= 1 && isBalanced(root.left) && isBalanced(root.right);
    }

    private int depth(TreeNode root) {
        if (root == null) return 0;
        return Math.max(depth(root.left), depth(root.right)) + 1;
    }
}
```

### [å‰‘æŒ‡ Offer 64. æ±‚1+2+â€¦+n](https://leetcode-cn.com/problems/qiu-12n-lcof/)

#### é¦–æˆ˜å¯„

æ²¡æ€è·¯ï¼›å¹¶ä¸”codetopæ˜¾ç¤ºè¿™é“é¢˜å°±å‡ºç°è¿‡2æ¬¡ï¼Œè¯´æ˜ä¸æ˜¯è€ƒå¯Ÿç‚¹ï¼›è¿™é¢˜ç›®è¿˜æœ‰ä¸ªâ€œè„‘ç­‹æ€¥è½¬å¼¯â€çš„æ ‡ç­¾ã€‚ã€‚

#### å®˜æ–¹-é€»è¾‘ç¬¦çŸ­è·¯

è§£é¢˜æ€è·¯ï¼š

![image-20220409192607863](lcof.assets/image-20220409192607863.png)

æ–¹æ³•ä¸€ï¼š å¹³å‡è®¡ç®—

![image-20220409192632853](lcof.assets/image-20220409192632853.png)

æ–¹æ³•äºŒï¼š è¿­ä»£

![image-20220409192654183](lcof.assets/image-20220409192654183.png)

æ–¹æ³•ä¸‰ï¼š é€’å½’

![image-20220409192805645](lcof.assets/image-20220409192805645.png)

![Picture1.png](lcof.assets/2d25bb3aec987712b717f7954d93494beb0a3e352acee486b3ce58bce60ee07c-Picture1.png)

é€»è¾‘è¿ç®—ç¬¦çš„çŸ­è·¯æ•ˆåº”ï¼š

![image-20220409193031359](lcof.assets/image-20220409193031359.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220409193047238](lcof.assets/image-20220409193047238.png)

ä»£ç ï¼š

![image-20220409193156424](lcof.assets/image-20220409193156424.png)

```java
class Solution {
    int res = 0;
    public int sumNums(int n) {
        boolean x = n > 1 && sumNums(n - 1) > 0;
        res += n;
        return res;
    }
}
```

#### å³æ—¶å†æˆ˜æˆåŠŸ

```java
class Solution {
    int res=0;
    public int sumNums(int n) {
        //n==1çš„æ—¶å€™ç»ˆæ­¢é€’å½’ï¼Œå¼€å§‹é€€æ ˆ
        boolean x=n>1&&sumNums(n-1)>0;
        res+=n;
        return res;
    }
}
```

### [å‰‘æŒ‡ Offer 68 - I. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-zui-jin-gong-gong-zu-xian-lcof/)

#### é¦–æˆ˜å‘Šæ·

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    //å…¨å±€å˜é‡ä¿å­˜ç»“æœ
    TreeNode result=null;
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        /**
        ååºéå†ï¼Œå…ˆæ‹¿åˆ°å·¦å³å­æ ‘æ˜¯å¦æœ‰ç»™å®šèŠ‚ç‚¹ï¼›å†çœ‹æœ¬èŠ‚ç‚¹æ˜¯å¦æœ‰ç»™å®šèŠ‚ç‚¹ï¼›ç„¶åå‰ªæè¿”å›
         */
        //å¤„ç†ç‰¹æ®Šæƒ…å†µ
        if(root==null)return null;
        
        //æ·±åº¦é€’å½’ï¼ŒæŸ¥æ‰¾å…¬å…±ç¥–å…ˆ
        recur(root,p,q);

        //recurè¿‡åç›®æ ‡èŠ‚ç‚¹ä¿å­˜åœ¨resultä¸­ï¼Œç›´æ¥è¿”å›
        return result;
    }
    public boolean recur(TreeNode root, TreeNode p, TreeNode q){
        //å¤„ç†è¿”å›æ¡ä»¶ã€‚åªè¦æœ¬èŠ‚ç‚¹åŒ…å«ç›®æ ‡èŠ‚ç‚¹ï¼Œå°±ç»™ä¸Šå±‚é€’å½’è¿”å›trueï¼›æ³¨æ„root==pæˆ–qçš„æ—¶å€™ä¸èƒ½ç›´æ¥è¿”å›trueï¼Œå› ä¸ºè¦å¯¹ä»–åšå…¬å…±ç¥–å…ˆçš„åˆ¤æ–­
        if(root==null)return false;
        // else if(root==p)return true;
        // else if(root==q)return true;

        if(result!=null){//å‰ªæã€‚é˜²æ­¢å¾—åˆ°ç»“æœåè¿˜ä¸åœé€’å½’ã€‚è¿™ç§ä¸€ä¸ªifæ²¡elseçš„å‰ªæåˆ¤æ–­æ„Ÿè§‰å¯è¯»æ€§è¾ƒå¥½
            return false;
        }

        //ååºéå†
        boolean left=recur(root.left,p,q);
        boolean right=recur(root.right,p,q);
        
        //å¦‚æœå·¦å³å­æ ‘+æœ¬èŠ‚ç‚¹ä¸­åŒ…å«äº†ä¸¤ä¸ªç›®æ ‡èŠ‚ç‚¹ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å°±æ˜¯å…¬å…±ç¥–å…ˆï¼Œä¿å­˜å½“å‰èŠ‚ç‚¹
        if((left&&right)||(left&&root==p)||(left&&root==q)||(right&&root==p)||(right&&root==q)){
            //System.out.println("æ‰¾åˆ°rootä¸ºï¼š"+root.val);
            result=root;
            return false;
        }

        //å¦‚æœå·¦å³å­æ ‘+æœ¬èŠ‚ç‚¹ä¸­åŒ…å«äº†ä¸€ä¸ªç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å›trueã€‚å¦‚æœåŒ…å«äº†ä¸¤ä¸ªï¼Œåœ¨ä¸Šé¢ä¸€ä¸ªåˆ¤æ–­å°±ä¼šè¿”å›äº†
        if(left||right||root==p||root==q)return true;

        //å¦‚æœå·¦å³å­æ ‘éƒ½ä¸åŒ…å«ç›®æ ‡èŠ‚ç‚¹ï¼Œå½“å‰èŠ‚ç‚¹ä¹Ÿä¸æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å›falseã€‚å¦‚æœåŒ…å«ä¸¤ä¸ªæˆ–1ä¸ªï¼Œåœ¨ä¸Šé¢çš„ä¸¤ä¸ªåˆ¤æ–­ä¹‹ä¸€å°±ä¼šè¿”å›äº†
        return false;
    }
}
```

- æˆ‘è¿™ç”±åº•å‘é¡¶çš„ï¼Œdfsåç»­éå†é€’å½’å¤„ç†ï¼Œæ²¡æœ‰åšé‡å¤åˆ¤æ–­ï¼Œæ•ˆç‡åº”è¯¥è¿˜è¡Œã€‚ä½†æ˜¯æˆ‘æ„Ÿè§‰ä¸‰ä¸ªifçš„åˆ¤æ–­è¯­å¥é‚£å¯ä»¥ä¼˜åŒ–ï¼Œæ¯”å¦‚ç”¨if(root==q||root==p)å¥—ifï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸å¿…è¦çš„åˆ¤æ–­ï¼›ä½†æ˜¯å¯è¯»æ€§ä¼šç¨å·®ï¼Œæ¯•ç«Ÿå°±ä¸æ˜¯å¹¶è¡Œçš„ä¸‰ä¸ªåˆ¤æ–­äº†

- å€’æ•°çš„ä¸‰ä¸ªåˆ¤æ–­çš„è¿™ç§é¡ºåºå¯ä»¥å‚è€ƒï¼š
  1. å…ˆæ”¾å‡ºç°å¤šç§æƒ…å†µçš„
  2. å†æ”¾åªå‡ºç°ä¸€ç§æƒ…å†µçš„ï¼ˆæ­¤æ—¶å°±ä¸åœ¨éœ€è¦åˆ¤æ–­å¤šç§æƒ…å†µï¼‰
  3. å†æ”¾ä¸€ç§æƒ…å†µéƒ½ä¸å‡ºç°çš„ï¼ˆæ­¤æ—¶ç”šè‡³éƒ½ä¸éœ€è¦åšåˆ¤æ–­ï¼‰
- åæ€ï¼š
  - æ²¡è®¤çœŸçœ‹é¢˜ç›®ï¼Œï¼Œæ²¡ç”¨ä¸Šâ€œäºŒå‰æœç´¢æ ‘â€çš„æ¡ä»¶ï¼Œå½“æ™®é€šæ ‘å¤„ç†äº†ã€‚

#### å®˜æ–¹1-è¿­ä»£

è§£é¢˜æ€è·¯ï¼š

![image-20220410175623459](lcof.assets/image-20220410175623459.png)

![image-20220410175707490](lcof.assets/image-20220410175707490.png)

è¿­ä»£çš„åšæ³•ï¼š

![image-20220410175729876](lcof.assets/image-20220410175729876.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220410175815304](lcof.assets/image-20220410175815304.png)

ä»£ç ï¼š

```java
class Solution {
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        while(root != null) {
            if(root.val < p.val && root.val < q.val) // p,q éƒ½åœ¨ root çš„å³å­æ ‘ä¸­
                root = root.right; // éå†è‡³å³å­èŠ‚ç‚¹
            else if(root.val > p.val && root.val > q.val) // p,q éƒ½åœ¨ root çš„å·¦å­æ ‘ä¸­
                root = root.left; // éå†è‡³å·¦å­èŠ‚ç‚¹
            else break;
        }
        return root;
    }
}
```

- æˆ‘ï¼šbreakçš„æƒ…å†µï¼Œæ­£å¥½æ˜¯å½“å‰èŠ‚ç‚¹ä¸ºpqçš„æœ€è¿‘å…¬å…±ç¥–å…ˆçš„æƒ…å†µ

ä»£ç ä¼˜åŒ–ï¼Œè‹¥å¯ä¿è¯ p.val < q.val ï¼Œåˆ™åœ¨å¾ªç¯ä¸­å¯å‡å°‘åˆ¤æ–­æ¡ä»¶ï¼š

```java
class Solution {
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        if(p.val > q.val) { // ä¿è¯ p.val < q.val
            TreeNode tmp = p;
            p = q;
            q = tmp;
        }
        while(root != null) {
            if(root.val < p.val) // p,q éƒ½åœ¨ root çš„å³å­æ ‘ä¸­
                root = root.right; // éå†è‡³å³å­èŠ‚ç‚¹
            else if(root.val > q.val) // p,q éƒ½åœ¨ root çš„å·¦å­æ ‘ä¸­
                root = root.left; // éå†è‡³å·¦å­èŠ‚ç‚¹
            else break;
        }
        return root;
    }
}
```

#### å®˜æ–¹2-é€’å½’

é€’å½’æ€è·¯ï¼š

![image-20220410180944663](lcof.assets/image-20220410180944663.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220410181003714](lcof.assets/image-20220410181003714.png)

ä»£ç ï¼š

```java
class Solution {
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        if(root.val < p.val && root.val < q.val)
            return lowestCommonAncestor(root.right, p, q);
        if(root.val > p.val && root.val > q.val)
            return lowestCommonAncestor(root.left, p, q);
        return root;
    }
}
```

- æ ¸å¿ƒï¼šæŠ“ä½äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ï¼

## åˆ†æ²»ç®—æ³•(ä¸­ç­‰)

### [å‰‘æŒ‡ Offer 07. é‡å»ºäºŒå‰æ ‘](https://leetcode-cn.com/problems/zhong-jian-er-cha-shu-lcof/)

#### é¦–æˆ˜å¯„

èƒ½ç”¨ç¬”å®ç°å‡ºæ¥ï¼Œä½†æ˜¯ç”¨ç®—æ³•å®ç°æ²¡æœ‰æ€è·¯ã€‚

#### å®˜æ–¹-åˆ†æ²»

[æ–‡å­—çœ‹ä¸æ‡‚çš„è¯ï¼Œå¯ä»¥çœ‹è¿™ä¸ªè®²è§£è§†é¢‘](https://www.bilibili.com/video/BV1LJ411y7Xa?from=search&seid=7337447768713066113&spm_id_from=333.337.0.0)ï¼Œçœ‹å®Œè§†é¢‘åå†çœ‹ä¸‹é¢çš„è§£æå’Œä»£ç ã€‚

è§£é¢˜æ€è·¯ï¼š

![image-20220411200426772](lcof.assets/image-20220411200426772.png)

![image-20220411200437879](lcof.assets/image-20220411200437879.png)

åˆ†æ²»ç®—æ³•è§£æï¼š

![image-20220411200501485](lcof.assets/image-20220411200501485.png)

å¤æ‚åº¦åˆ†æï¼š

![image-20220411200517480](lcof.assets/image-20220411200517480.png)

ä»£ç ï¼š

> æ³¨æ„ï¼šæœ¬æ–‡æ–¹æ³•åªé€‚ç”¨äº â€œæ— é‡å¤èŠ‚ç‚¹å€¼â€ çš„äºŒå‰æ ‘ã€‚

```java
 //åˆ©ç”¨åŸç†,å…ˆåºéå†çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯æ ¹ã€‚åœ¨ä¸­åºéå†ä¸­é€šè¿‡æ ¹ åŒºåˆ†å“ªäº›æ˜¯å·¦å­æ ‘çš„ï¼Œå“ªäº›æ˜¯å³å­æ ‘çš„
    //å·¦å³å­æ ‘ï¼Œé€’å½’
    HashMap<Integer, Integer> map = new HashMap<>();//æ ‡è®°ä¸­åºéå†
    int[] preorder;//ä¿ç•™çš„å…ˆåºéå†

    public TreeNode buildTree(int[] preorder, int[] inorder) {
        this.preorder = preorder;
        for (int i = 0; i < preorder.length; i++) {
            map.put(inorder[i], i);
        }
        return recursive(0,0,inorder.length-1);
    }

    /**
     * @param pre_root_idx  å…ˆåºéå†çš„ç´¢å¼•
     * @param in_left_idx  ä¸­åºéå†çš„ç´¢å¼•
     * @param in_right_idx ä¸­åºéå†çš„ç´¢å¼•
     */
    public TreeNode recursive(int pre_root_idx, int in_left_idx, int in_right_idx) {
        //ç›¸ç­‰å°±æ˜¯è‡ªå·±
        if (in_left_idx > in_right_idx) {
            return null;
        }
        //root_idxæ˜¯åœ¨å…ˆåºé‡Œé¢çš„
        TreeNode root = new TreeNode(preorder[pre_root_idx]);
        // æœ‰äº†å…ˆåºçš„,å†æ ¹æ®å…ˆåºçš„ï¼Œåœ¨ä¸­åºä¸­è· å½“å‰æ ¹çš„ç´¢å¼•
        int idx = map.get(preorder[pre_root_idx]);

        //å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹å°±æ˜¯ å·¦å­æ ‘çš„(å‰åºéå†ï¼‰ç¬¬ä¸€ä¸ªï¼Œå°±æ˜¯+1,å·¦è¾¹è¾¹ç•Œå°±æ˜¯leftï¼Œå³è¾¹è¾¹ç•Œæ˜¯ä¸­é—´åŒºåˆ†çš„idx-1
        root.left = recursive(pre_root_idx + 1, in_left_idx, idx - 1);

        //ç”±æ ¹èŠ‚ç‚¹åœ¨ä¸­åºéå†çš„idx åŒºåˆ†æˆ2æ®µ,idx å°±æ˜¯æ ¹

        //å³å­æ ‘çš„æ ¹ï¼Œå°±æ˜¯å³å­æ ‘ï¼ˆå‰åºéå†ï¼‰çš„ç¬¬ä¸€ä¸ª,å°±æ˜¯å½“å‰æ ¹èŠ‚ç‚¹ åŠ ä¸Šå·¦å­æ ‘çš„æ•°é‡
        // pre_root_idx å½“å‰çš„æ ¹  å·¦å­æ ‘çš„é•¿åº¦ = å·¦å­æ ‘çš„å·¦è¾¹-å³è¾¹ (idx-1 - in_left_idx +1) ã€‚æœ€å+1å°±æ˜¯å³å­æ ‘çš„æ ¹äº†
        root.right = recursive(pre_root_idx + (idx-1 - in_left_idx +1)  + 1, idx + 1, in_right_idx);
        return root;
    }
```

- æˆ‘ç†è§£ï¼šç”¨hashå…³è”ä¸­åºçš„å€¼å’Œindexï¼Œæ˜¯ä¸ºäº†æ ¹æ®å…ˆåºçš„rootå€¼ï¼Œæ±‚å¾—rootåœ¨ä¸­åºä¸­çš„indexï¼›è¿›è€Œæ ¹æ®ä¸­åºä¸­rootçš„indexï¼Œå¾—åˆ°rootçš„å·¦å³å­æ ‘å…ƒç´ çš„ä¸ªæ•°ã€‚å› ä¸ºæ— è®ºæ˜¯ä¸­åºè¿˜æ˜¯å…ˆåºæ•°ç»„ï¼Œå·¦/å³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ç´§è´´åœ¨ä¸€èµ·çš„ï¼›è€Œä¸­åºéå†çš„ç‰¹ç‚¹å°±æ˜¯rootèƒ½åˆ†å‰²å·¦å³å­æ ‘ï¼Œç‰¹åˆ«é€‚åˆç”¨æ¥åˆ¤æ–­æ•°ç»„ä¸­å·¦/å³å­æ ‘çš„å…ƒç´ çš„ä¸ªæ•°ã€‚

#### å³æ—¶å†æˆ˜æˆåŠŸ

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    int[] pre;
    Map<Integer,Integer> in=new HashMap<>();
    public TreeNode buildTree(int[] preorder, int[] inorder) {
        /**
        åˆ©ç”¨ç‰¹æ€§ï¼š
        1.å…ˆåºéå†çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå½“å‰æ ‘çš„rootï¼›
        2.ä¸­åºä¸­rootåˆ†å‰²å·¦å³å­æ ‘ï¼Œå¯ä»¥æ±‚å¾—å·¦orå³å­æ ‘åˆ†åˆ«æœ‰å¤šå°‘ä¸ªå…ƒç´ 
        
        æœ¬è§£æ³•çš„å‰ææ˜¯æ ‘ä¸­å…ƒç´ éƒ½ä¸å”¯ä¸€
         */

        //å¤„ç†ç‰¹æ®Šæƒ…å†µ
        if(preorder.length==0)return null;

        //ä¸ºäº†åœ¨é€’å½’ä¸­ä½¿ç”¨preorderæ•°ç»„ï¼Œå¹¶ä¸”ä¸å¿…å¾€æ–¹æ³•ä¼ å…¥preorderæ•°ç»„ï¼Œè¿™é‡Œç”¨å…¨å±€å˜é‡ä¿å­˜preorderæ•°ç»„
        pre=preorder;
        //æŠŠinorderä¸­å…ƒç´ å’Œindexç”¨hashå…³è”èµ·æ¥ï¼›ä¾¿äºåç»­æ ¹æ®rootå€¼æ±‚å¾—å·¦å³å­æ ‘çš„å…ƒç´ æ•°ç›®
        for(int i=0;i<inorder.length;i++){
            in.put(inorder[i],i);
        }

        //é€’å½’ï¼Œ æ ¹æ®preä¸­rootçš„index å’Œ inä¸­æ ‘çš„å·¦å³è¾¹ç•Œï¼Œæ„å»ºæ ‘å¹¶è¿”å›æ ¹èŠ‚ç‚¹
        return recur(0,0,inorder.length-1);
    }
    public TreeNode recur(int pre_root_idx, int in_left_idx, int in_right_idx){
        //è®¾ç½®é€’å½’è¿”å›æ¡ä»¶ï¼Œin_left_idxå’Œin_right_idxäº¤å‰æ—¶è¯´æ˜å­æ ‘æ˜¯ç©ºèŠ‚ç‚¹äº†ï¼Œç›´æ¥è¿”å›null
        if(in_left_idx>in_right_idx)return null;

        //å…ˆåˆ©ç”¨pre_root_indexæ‹¿åˆ°rootçš„å€¼
        int rootValue=pre[pre_root_idx];
        //å†æ ¹æ®rootçš„å€¼å¾—åˆ°ä¸­åºéå†æ•°ç»„ä¸­ï¼Œrootçš„ä½ç½®
        int in_root_index=in.get(rootValue);

        //åˆ›å»ºå½“å‰èŠ‚ç‚¹
        TreeNode cur=new TreeNode(rootValue);

        /*
        é€’å½’åˆ›å»ºå½“å‰èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹ï¼š
        1.æ ¹æ®å…ˆåºéå†æ•°ç»„çš„ç‰¹ç‚¹å¯çŸ¥ï¼Œå·¦å­èŠ‚ç‚¹çš„pre_root_idxå³ä¸ºå½“å‰pre_root_idx+1ï¼Œå³å­èŠ‚ç‚¹çš„pre_root_idxå³ä¸ºå½“å‰pre_root_idx+å·¦å­æ ‘èŠ‚ç‚¹ä¸ªæ•°+1(åŠ 1æ˜¯ä¸ºäº†è¶Šè¿‡å·¦å­æ ‘è€Œåˆ°è¾¾å³å­æ ‘)
        2.æ ¹æ®ä¸­åºéå†æ•°ç»„çš„ç‰¹ç‚¹å¯çŸ¥ï¼Œä¸­åºéå†ä¸­ï¼Œå·¦å­æ ‘çš„å·¦è¾¹ç•Œä¸ºin_left_idxï¼Œå·¦å­æ ‘çš„å³è¾¹ç•Œä¸ºin_root_index-1;
                                                  å³å­æ ‘çš„å·¦è¾¹ç•Œä¸ºin_root_index+1ï¼Œå³å­æ ‘çš„å³è¾¹ç•Œä¸ºin_right_idx
         */
        cur.left=recur(pre_root_idx+1,in_left_idx,in_root_index-1);
        cur.right=recur(pre_root_idx+(in_root_index-in_left_idx)+1,in_root_index+1,in_right_idx);

        return cur;
    }
}
```

- æˆ‘ï¼šæˆ‘æ„Ÿè§‰æˆ‘è¿™ä¸ªä»£ç çš„å‘½åå’Œç¼–å†™ï¼Œæ­é…æ³¨é‡Šï¼Œæ¯”å®˜æ–¹è¿˜è¦å®¹æ˜“ç†è§£ã€‚

- æ³¨æ„ï¼šå¯ä»¥å¦‚æœ¬ä¾‹`pre=preorder;`ï¼Œç›´æ¥å¯¹æ•°ç»„å¢åŠ å¼•ç”¨ã€‚

### [å‰‘æŒ‡ Offer 16. æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹](https://leetcode-cn.com/problems/shu-zhi-de-zheng-shu-ci-fang-lcof/)

#### é¦–æˆ˜åŠå¯„

```java
class Solution {
    public double myPow(double x, int n) {
        /**
        å¯¹nåˆ†ç±»è®¨è®ºï¼ŒåŒæ—¶æ³¨æ„åˆ†æ¯ä¸º0çš„æƒ…å†µ
         */
        //é’ˆå¯¹xå¤„ç†ç‰¹æ®Šæƒ…å†µï¼Œå‡å°‘è®¡ç®—
        if(x==1)return 1;
        if(x==0)return 0;
        
        if(n>0){
            double stordX=x;//æ³¨æ„xæ˜¯doubleç±»å‹ï¼Œä¿å­˜çš„xä¹Ÿå¾—æ˜¯å£°æ˜ä¸ºdouble
            for(int i=0;i<n-1;i++){//æŒ‡æ•°æ˜¯nçš„è¯ï¼Œxè‡ªä¹˜n-1æ¬¡ã€‚æ³¨æ„æ˜¯n-1æ¬¡ï¼ï¼ï¼ï¼
                //ä½†æ˜¯ä¸èƒ½ä½¿ç”¨x*=x;è¿™å›å¯¼è‡´ï¼šç¬¬ä¸€æ¬¡è®¡ç®—æ˜¯n*nï¼Œç¬¬äºŒæ¬¡è®¡ç®—å®é™…ä¸Šæ˜¯(nçš„å¹³æ–¹)*(nçš„å¹³æ–¹)äº†
                x*=stordX;
            }
            return x;
        }else if(n<0){
            if(x==0){//0ä¸èƒ½åšåˆ†æ¯
                return 0;
            }
            double stordX=x;
            for(int i=n;i<0;i++){//æŒ‡æ•°æ˜¯-nçš„è¯ï¼Œç”¨1é™¤ä»¥xè¿›è¡Œnæ¬¡
                //x=1/x;ä¸èƒ½ç›´æ¥1/xï¼Œå› ä¸ºç¬¬ä¸€æ¬¡é™¤åä¸º1/xï¼Œå†ç”¨1/(1/x)é‚£ä¹ˆåˆå¾—åˆ°äº†xã€‚ã€‚
                if(i==n){//ç¬¬ä¸€æ¬¡æ˜¯1/xï¼Œå…¶ä»–çš„éƒ½æ˜¯ä¹‹å‰çš„ç»“æœé™¤ä»¥x
                    x=1/x;
                }else{
                    x=x/stordX;
                } 
            }
            return x;
        }else{//æŒ‡æ•°n==0ï¼Œç›´æ¥è¿”å›1å³å¯
            return 1;
        }

    }
}
```

- ç”¨å¸¸è§„æ€è·¯åšçš„ï¼Œé€šè¿‡äº†301/303ä¸ªæµ‹è¯•æ¡ˆä¾‹ï¼Œä½†æ˜¯2.00000çš„ -2147483648æ¬¡æ–¹è®¡ç®—è¶…æ—¶äº†ã€‚
- åæ€ï¼š
  - n>0æ—¶ï¼Œæ²¡ç”¨å¿ƒï¼Œæœ€å¼€å§‹åšæˆäº†æŒ‡æ•°ä¸ºnå°±è‡ªä¹˜næ¬¡ï¼Œå®é™…ä¸Šæ˜¯è‡ªä¹˜n-1æ¬¡ã€‚
  - n<0æ—¶ï¼Œæ²¡ç”¨å¿ƒï¼Œæœ€å¼€å§‹åšæˆäº†æŒ‡æ•°ä¸ºnå°±ä¸åœè®©x=1/xï¼Œä½†æ˜¯è¿™æ ·ç›¸å½“äºæ€»æ˜¯æŠŠ1æ”¾åœ¨åˆ†å­ï¼Œè€Œå®é™…ä¸Šåº”è¯¥æŠŠé™¤åçš„ç»“æœæ”¾åœ¨åˆ†å­ã€‚
  - ä¹‹å‰è®¡ç®—æ—¶ï¼Œæ²¡æŠŠxä¿ç•™ä¸‹æ¥ï¼Œå¯¼è‡´æ¯æ¬¡éƒ½ä¼šæŠŠè®¡ç®—åçš„xå½“æˆåŸxï¼Œå¯¼è‡´é”™è¯¯ã€‚

#### å¤§ä½¬-å¿«é€Ÿå¹‚

å®˜æ–¹çš„è§£é‡Šçš„ä¸æ¸…æ¥šï¼Œå°±ç”¨å¤§ä½¬çš„ã€‚

è§£é¢˜æ€è·¯ï¼š

![image-20220411180036705](lcof.assets/image-20220411180036705.png)

[çŸ¥ä¹å¿«é€Ÿå¹‚](https://zhuanlan.zhihu.com/p/95902286)ï¼š

- æˆ‘ç†è§£ï¼šå°±ä¸è®©cpuæ¯æ¬¡ä¹˜ä¸€ä¸ªå°æ•°ï¼Œè€Œæ˜¯å…ˆä¹˜å¾—ä¸€ä¸ªå¤§æ•°ï¼Œç„¶åä¸¤ä¸ªå¤§æ•°ç›¸ä¹˜ï¼Œè¿™æ ·å°±å‡å°‘äº†ä¹˜æ³•çš„æ¬¡æ•°ã€‚

ä½è¿ç®—ä½¿ç”¨ï¼š

![image-20220411184903746](lcof.assets/image-20220411184903746.png)

æˆ‘ç†è§£ï¼š

![image-20220411183243537](lcof.assets/image-20220411183243537.png)

ä»£ç ï¼š

```java
class Solution {
    public double myPow(double x, int n) {
        if(x == 0) return 0;
        long b = n;
        double res = 1.0;
        //å¦‚æœå¹‚æ˜¯è´Ÿæ•°ï¼Œå°±æŠŠå®ƒè½¬åŒ–ä¸ºæ­£æ•°æ¥å¤„ç†
        if(b < 0) {
            x = 1 / x;
            b = -b;
        }
        while(b > 0){
            // æœ€åä¸€ä½ä¸º1ï¼Œéœ€è¦ä¹˜ä¸Šè¯¥ä½ä¸Šçš„æƒé‡
            if((b & 1) == 1){
                res *= x;
            }
            x *= x;
            b >>= 1;
        }
        return res;
    }
}
```

- ç½‘å‹é—®ï¼šä¸ºä»€ä¹ˆè¦æŠŠå…¶ä¸­çš„næ¢æˆlongç±»å‹ï¼Ÿ
  - ç½‘å‹ç­”ï¼šå› ä¸º32ä½intæ˜¯è¡¥ç å½¢å¼ï¼Œæ­£æ•°æ˜¯å’ŒåŸç ç›¸åŒï¼ŒèŒƒå›´æ˜¯0åˆ°2çš„31æ¬¡æ–¹-1ï¼Œä½†æ˜¯å¯¹äºè´Ÿæ•°ï¼Œéœ€è¦åç +1ï¼ŒèŒƒå›´æ˜¯è´Ÿ2çš„31æ¬¡æ–¹åˆ°0ï¼Œè´Ÿæ•°è¦æ¯”æ­£æ•°å¤šä¸€ä¸ªæ•°å­—ã€‚å¦‚æœä¼ è¿›æ¥çš„intåˆšå¥½æ˜¯è´Ÿ2çš„32æ¬¡æ–¹ï¼Œå–ç›¸åæ•°ä¹‹åå°±è¶…è¿‡int32ç±»å‹çš„å–å€¼èŒƒå›´äº†ï¼Œæ‰€ä»¥éœ€è¦ç”¨longæ¥æ‰©å¤§å–å€¼èŒƒå›´ã€‚ä¸å¥½æ„æ€å•Šï¼Œè¯„è®ºåŒºæ•°å­¦å…¬å¼ä¸å¤ªå¥½æ‰“ã€‚
  - æ³¨æ„ï¼šæœ‰ç¬¦å·çš„è¯æœ‰ä¸ªç¬¦å·ç«™ä½ï¼Œå°±çº§æ•°æ˜¯2çš„31æ¬¡æ–¹ï¼›å¦‚æœæ²¡æœ‰æ­£è´Ÿå·ï¼Œå°±æ‰€æœ‰ä½éƒ½ç”¨æ¥ä¿å­˜æ•°å­—ï¼Œçº§æ•°å°±ä¸º2çš„32æ¬¡æ–¹ã€‚

#### å³æ—¶å†æˆ˜æˆåŠŸ

```java
class Solution {
    public double myPow(double x, int n) {
        /**
        ä½¿ç”¨å¿«é€Ÿå¹‚ï¼Œå°½é‡è®©å¤§æ•°ç›¸ä¹˜ï¼Œä¸è¦è®©å°æ•°ç›¸ä¹˜å ç”¨CPU
         */
        //ç‰¹æ®Šæƒ…å†µå¤„ç†
        if(x==0)return 0;
        
        //ç”¨äºè¿”å›ç»“æœï¼Œéœ€è¦çš„è‡ªä¹˜çš„xçš„ç»“æœä¼šè¢«ä¹˜å…¥res
        double res=1;
        
        //nä¸ºè´Ÿæ•°çš„æ—¶å€™ï¼ŒæŠŠå®ƒè½¬æ¢ä¸ºæ­£æ•°çš„é—®é¢˜æ¥å¤„ç†
        long b=n;//å› ä¸ºè´Ÿæ•°çš„ç»å¯¹å€¼æ›´å¤§ï¼Œä¸ºäº†é˜²æ­¢è´Ÿæ•°å˜æˆæ­£æ•°é—®é¢˜æ—¶è¶…è¿‡è¯ä¹¦è¾¹ç•Œï¼Œå¾—ç”¨longæ¥å¤„ç†n
        if(b<0){
            b=-b;
            x=1/x;//å› ä¸ºxä¸º0çš„æƒ…å†µæ’é™¤äº†ï¼Œæ‰€ä»¥å¯ä»¥å®‰å¿ƒæŠŠxæ”¾åœ¨åˆ†æ¯
        }
        
        //å¼€å§‹å¿«é€Ÿå¹‚è¿ç®—ï¼Œè®©xä¸æ–­è‡ªå·±å¹³æ–¹ï¼Œå½“å¹‚çš„äºŒè¿›åˆ¶çš„å¯¹åº”ä½ä¸º1æ—¶ï¼Œåˆ™è¯´æ˜éœ€è¦æŠŠè‡ªä¹˜xçš„å½“å‰ç»“æœå¾€ç»“æœä¸­ä¹˜
        //å¤„ç†å¹‚è½¬åŒ–ä¸ºäºŒè¿›åˆ¶åçš„æ¯ä¸ªäºŒè¿›åˆ¶ä½
        while(b>0){
            if((b&1)==1){//å¦‚æœå½“å‰å¤„ç†è€ŒäºŒè¿›åˆ¶å¹‚çš„ä½ç½®ä¸º1ï¼Œè¯´æ˜xè‡ªä¹˜çš„å½“å‰ç»“æœè¦ä¹˜å…¥ç»“æœ
                res*=x;
            }
            x*=x;//xä¸æ–­è‡ªå·±å¹³æ–¹ï¼Œæ˜¯å¿«é€Ÿå¹‚èŠ‚çœcpuè¿ç®—çš„å…³é”®
            b=b>>1;//æŠŠå¹‚çš„äºŒè¿›åˆ¶å³ç§»ä¸€ä½ï¼ˆå³ä»ä½ä½ç æ‰ä¸€ä½ï¼‰ï¼Œä¸‹ä¸€æ¬¡å¾ªç¯å°±ä¼šå¤„ç†çš„æ˜¯æ›´é«˜ä¸€ä½
        }

        return res;
    }
}
```

- åæ€ï¼š
  - ä½è¿ç®—>>åä¼šå¾—åˆ°ä¸€ä¸ªç»“æœï¼Œæ‰€ä»¥å¿…é¡»è¦ç”¨ç­‰å·æ¥èµ‹å€¼ã€‚` b=b>>1;`ç­‰ä»·äº` b>>=1;`
  - ä¸è¿ç®—ç¬¦&çš„ä¼˜å…ˆçº§æ²¡æœ‰==é«˜ï¼Œæ‰€ä»¥è¦ç”¨æ‹¬å·åŒ…è£¹`b&1`
    - è¿ç®—ç¬¦ä¼˜å…ˆçº§å®¹æ˜“è®°æ··ï¼Œæ€»æ˜¯ç”¨æ‹¬å·åŒ…è£¹å¥½äº†ï¼›å¯è¯»æ€§è¿˜è›®å¥½ã€‚



### [å‰‘æŒ‡ Offer 33. äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—](https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-hou-xu-bian-li-xu-lie-lcof/)

